# рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржмрж╛ржВрж▓рж╛

ржПржЯрж┐ ржПржХржЯрж┐ рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ ржпрзЗржЦрж╛ржирзЗ рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржПрж░ ржорзМрж▓рж┐ржХ ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рзЛ ржирж┐рзЯрзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

ржПржЗ ржЯрж┐ржЙржЯрзЛрж░рж┐рзЯрж╛рж▓ ржПрж░ ржЙржжрзНржжрзЗрж╢рзНржп ржЖржкржирж╛ржХрзЗ ржорзМрж▓рж┐ржХ ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рзЛрж░ ржзрж╛рж░ржгрж╛ ржжрзЗрзЯрж╛ред ржнрж╛рж▓рзЛ рж▓рж╛ржЧрж▓рзЗ star, watch ржХрж┐ржВржмрж╛ fork ржХрзНрж▓рж┐ржХ ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗржиред

<p align="center">
  <img src="./images/system-design-wallpaper.png" alt="System Design Wallpaper">
</p>

### рж╕рзВржЪрж┐ржкрждрзНрж░

- [Section 1: System Design](#section-1-system-design)
- [Section 2: Database Engineering](#section-2-database-engineering)
- [Section 3: Database Transaction](#section-3-database-transaction)
- [Section 4: Client Server Architecture](#section-4-client-server-architecture)
- [Section 5: Reliability](#section-5-reliability)
- [Section 6: Performance Metrics](#section-6-performance-metrics)
- [Section 7: Distributed System](#section-7-distributed-system)
- [Section 8: Domain Name System](#section-8-domain-name-system)
- [Section 9: Transmission Control Protocol](#section-9-transmission-control-protocol)
- [Section 10: User Datagram Protocol](#section-10-user-datagram-protocol)
- [Section 11: HTTP, TLS and HTTPS](#section-11-http-tls-and-https)
- [Section 12: What happens when you type a URL in your browser](#section-12-what-happens-when-you-type-a-url-in-your-browser)
- [Section 13: Concurrency and Parallelism](#section-13-concurrency-and-parallelism)
- [Section 14: High Concurrency Control](#section-14-high-concurrency-control)
- [Section 15: Functional and Non Functional Requirements](#section-15-functional-and-non-functional-requirements)
- [Section 16: Back Of the Envelope Estimation](#section-16-back-of-the-envelope-estimation)
- [Section 17: Authentication and Authorization](#section-17-authentication-and-authorization)
- [Section 18: Stateful and Stateless Architecture](#section-18-stateful-and-stateless-architecture)
- [Section 19: Proxy](#section-19-proxy)
- [Section 20: REST API](#section-20-rest-api)
- [Section 21: Scalability](#section-21-scalability)
- [Section 22: Database Sharding](#section-22-database-sharding)
- [Section 23: Database Replication](#section-23-database-replication)
- [Section 24: Caching](#section-24-caching)
- [Section 25: Content Delivery Network](#section-25-content-delivery-network)
- [Section 26: Rate Limiter](#section-26-rate-limiter)
- [Section 27: CAP Theorem](#section-27-cap-theorem)
- [Section 28: Consistent Hashing] (ржЪрж▓ржорж╛ржи)
- [Section 29: Polling, Web Socket and Server-Sent Events](#section-29-polling-web-socket-and-server-sent-events)
- [Section 30: Stream and Batch Processing] (ржЪрж▓ржорж╛ржи)
- [Section 31: Message Queue](#section-31-message-queue)
- [Section 32: rpc, gRpc] (ржЪрж▓ржорж╛ржи)
- [Section 33: Single Sign-On](#section-33-single-sign-on)
- [Section 34: Elasticsearch](#section-34-elasticsearch)
- [Section 35: Bloom Filter](#section-35-bloom-filter)
- [Section 36: Load Balancing Algorithms] (ржЪрж▓ржорж╛ржи)
- [Section 37: How Live Streaming works] (ржЪрж▓ржорж╛ржи)
- [Section 38: How OAuth2 works](#section-38-how-oauth2-works)
- [Section 39: Serverless Architecture] (ржЪрж▓ржорж╛ржи)
- [Section 40: High Availability best practices by Netflix](#section-40-high-availability-best-practices-by-netflix)
- [Section 41: Real World Problems](#section-41-real-world-problems)
- [Section 42: Resources](#section-42-resources)

## Section 1: System Design

ржпржЦржи ржЖржорж░рж╛ ржПржХржЯрж┐ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржбрзЗржнрзЗрж▓ржк ржХрж░рж┐, рждржЦржи ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐ржЬрж╛ржЗржи ржЕржирзБрж╕рж░ржг ржХрж░рж╛ ржЬрж░рзБрж░рж┐ред ржПрж░ ржкрзНрж░ржзрж╛ржи ржХрж╛рж░ржг рж╣рж▓рзЛ, ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржпрж╛рждрзЗ ржмрж░рзНрждржорж╛ржирзЗ ржПржмржВ ржнржмрж┐рж╖рзНржпрждрзЗ ржХрзЛржиржУ рж╕ржорж╕рзНржпрж╛ ржЫрж╛рзЬрж╛ржЗ ржнрж╛рж▓ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ, ржпржжрж┐ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржПржХ рж╕ржорзЯ ржкрзНрж░ржЪрзБрж░ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржкрзЗрзЯрзЗ ржерж╛ржХрзЗ, рждржЦржи ржПржЯрж┐ ржкрзНрж░ржЪрзБрж░ рж▓рзЛржб рж╕рж╣рзНржп ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо рж╣рждрзЗ рж╣ржмрзЗ ржПржмржВ ржХрзЛржирзЛ ржХрж╛ржирзЗржХрж╢ржи ржмрж┐ржЪрзНржЫрж┐ржирзНржирждрж╛ ржмрж╛ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕рзЗрж░ ржЕржмржирждрж┐ ржЫрж╛рзЬрж╛ржЗ ржХрж╛ржЬ ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЗ ржзрж░ржирзЗрж░ ржбрж┐ржЬрж╛ржЗржиржХрзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржмрж▓рж╛ рж╣рзЯред

(ржПржЗ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржорзВрж▓ржд ржмрзНржпрж╛ржХржПржирзНржб ржЗржЮрзНржЬрж┐ржирж┐рзЯрж╛рж░рж┐ржВ ржПрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрзГржХрзНрждред)

## Section 2: Database Engineering

рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржХрж░рж╛рж░ рж╕ржорзЯ ржбрзЗржЯрж╛ржмрзЗрж╕ ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯред ржХрзЛржи ржХрзЛржи рж░ржХржорзЗрж░ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПрж░ ржЬржирзНржп ржХрзЛржи ржХрзЛржи рж░ржХржорзЗрж░ ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи, ржбрзЗржЯрж╛ржмрзЗрж╕рзЗрж░ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржХрзЗржоржи, ржЯрзЗржмрж┐рж▓ ржХрж▓рж╛ржо ржПрж░ ржбрзЗржЯрж╛ ржЯрж╛ржЗржк, ржЯрзЗржмрж┐рж▓ size ржЗрждрзНржпрж╛ржжрж┐ ржЬрж╛ржирж╛ ржЖржорж╛ржжрзЗрж░ ржжрж░ржХрж╛рж░ред

ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржбрзЗржнрзЗрж▓ржк ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЬ ржЕржирзБржпрж╛рзЯрзА ржбрзЗржЯрж╛ржмрзЗрж╕ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рждрзЗ рж╣рзЯред рж╕рж╛ржзрж╛рж░ржгржд, ржЖржорж░рж╛ ржкрзНрж░ржзрж╛ржи ржжрзБржЗ ржзрж░ржирзЗрж░ ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрзНржпрж╛ржмрж╣рж╛рж░ ржХрж░рзЗ ржерж╛ржХрж┐ - SQL(рж░рж┐рж▓рзЗрж╢ржирж╛рж▓) ржбрзЗржЯрж╛ржмрзЗрж╕ ржПржмржВ NoSQL(ржиржи-рж░рж┐рж▓рзЗрж╢ржирж╛рж▓) ржбрзЗржЯрж╛ржмрзЗрж╕ред ржЖржорж░рж╛ ржХрзЗржоржи ржмрж╛ ржХрзЛржи ржзрж░ржгрзЗрж░ ржбрж╛ржЯрж╛ рж╖рзНржЯрзЛрж░ ржХрж░рждрзЗ ржЪрж╛ржЗ, ржХрж┐ржнрж╛ржмрзЗ рж╖рзНржЯрзЛрж░ ржХрж░рждрзЗ ржЪрж╛ржЗ, ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЬрзЗрж░ ржкржжрзНржзрждрж┐ ржЗрждрзНржпрж╛ржжрж┐ ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА ржбрзЗржЯрж╛ржмрзЗрж╕ ржмрж╛ржЫрж╛ржЗ ржХрж░рждрзЗ рж╣рзЯред ржбрж╛ржЯрж╛рж░ ржзрж░ржи ржЕржирзБржпрж╛рзЯрзА ржбрзЗржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛ ржЖржорж╛ржжрзЗрж░ ржнрж┐ржирзНржи ржнрж┐ржирзНржи рж╕рзБржмрж┐ржзрж╛ ржжрж┐рзЯрзЗ ржерж╛ржХрзЗред

| SQL                                                                                                                                                   | NoSQL                                                                                               |
| ----------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| ржЯрзЗржмрж┐рж▓рзЗрж░ ржоржзрзНржпрзЗ ржбрж╛ржЯрж╛ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ рж╣рзЯ, ржпрзЗржЦрж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж┐ рж╕рж╛рж░рж┐ ржПржХржЯрж┐ ржПржирзНржЯрж┐ржЯрж┐ ржПржмржВ ржкрзНрж░рждрж┐ржЯрж┐ ржХрж▓рж╛ржо ржПржХржЯрж┐ ржбрж╛ржЯрж╛рж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржирж┐ржжрзЗрж░рзНрж╢ржи ржХрж░рзЗред ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ relation ржерж╛ржХрзЗред | ржХрзЛржи ржкрзНрж░ржХрж╛рж░ relation ржЫрж╛рзЬрж╛ ржбрж╛ржЯрж╛ ржмрж┐ржнрж┐ржирзНржиржнрж╛ржмрзЗ рж╖рзНржЯрзЛрж░ ржХрж░рзЗ ржерж╛ржХрзЗред ржпрзЗржоржиржГ key-value, graph, document ржЗрждрзНржпрж╛ржжрж┐ред |
| ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рзНржХрж┐ржорж╛ ржЕржирзБржпрж╛рзЯрзА ржбрж╛ржЯрж╛ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ рж╣рзЯред (ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕рзНржХрж┐ржорж╛ ржкрж░ржмрж░рзНрждрзАрждрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржпрж╛рзЯред)                                           | NoSQL ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржбрж╛ржЗржирж╛ржорж┐ржХ рж╕рзНржХрж┐ржорж╛ ржерж╛ржХрзЗ, ржЕрж░рзНржерж╛рзО рж╕рзНржХрж┐ржорж╛ ржкрж░рж┐ржмрж░рзНрждржиржпрзЛржЧрзНржпред                                   |

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржбрзЗржЯрж╛ржмрзЗрж╕**
## ржХржЦржи SQL ржХрж┐ржВржмрж╛ NoSQL ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

ржХрзЛржи ржкрзНрж░ржХрж╛рж░рзЗрж░ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░ржм рж╕рзЗржЬржирзНржп ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржирж┐рзЯрзЗ ржирж┐ржЪрзЗрж░ ржмрж┐рж╖рзЯржЧрзБрж▓рзЛрж░ ржЙрждрзНрждрж░ ржЬрж╛ржирж╛ ржжрж░ржХрж╛рж░,

- ржбрж╛ржЯрж╛ржмрзЗрж╕ ржжрж┐рзЯрзЗ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ Query ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЛ ржХрж┐ ржирж╛?
- ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ Table ржХрж┐ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж╕ржВржЦрзНржпржХ ржбрж╛ржЯрж╛ store ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЗ ржХрж┐ ржирж╛?
- ржХрзЯржЯрж┐ ржирзЛржб ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЗ?
- Maintenance ржХрж┐ рж░ржХржо рж╣ржмрзЗ, ржорж╛ржирзЗ schema ржмржжрж▓рж╛ржмрзЗ ржХрж┐ ржирж╛?

ржПржЦржи SQL ржПржмржВ NoSQL ржПрж░ ржХрж┐ржЫрзБ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржЖржЫрзЗ ржпрж╛ ржЖржорж╛ржжрзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗ ржХрзЛржи ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░ржм,

- Predetermined Schema: SQL ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржХрзЛржирзЛ operation (read, insert, update, delete) ржЪрж╛рж▓рж╛ржирзЛрж░ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржЯрзЗржмрж┐рж▓рзЗрж░ schema Predetermined ржерж╛ржХрждрзЗ рж╣ржмрзЗред ржЯрзЗржмрж┐рж▓рзЗрж░ schema Predetermined ржмрж▓рждрзЗ ржмрзБржЭрж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓ ржпрзЗржоржи user table ржПржЦрж╛ржирзЗ schema рж╣ржмрзЗ,

  - id
  - name
  - email
  - password
  - (ржЗрждрзНржпрж╛ржжрж┐)

ржПржЗржЧрзБрж▓рзЛ Predetermined ржорж╛ржирзЗ ржкрзВрж░рзНржмржирж┐рж░рзНржзрж╛рж░рж┐ржд ржерж╛ржХрж▓рзЗ, ржЖржорж░рж╛ SQL ржнрж┐рждрзНрждрж┐ржХ RDBMS Database ржпрзЗржоржи MySQL, PostgreSQL ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмред

ржЕржкрж░ржкржХрзНрж╖рзЗ schema ржпржжрж┐ Predetermined ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ NoSQL ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред NoSQL ржПрж░ ржбрзЗржЯрж╛ рж╕рж╛ржзрж╛рж░ржгржд key-value, Document, Graph ржЖржХрж╛рж░рзЗ ржбрж┐рж╕рзНржХрзЗ рж╕рзНржЯрзЛрж░ рж╣рзЯрзЗ ржерж╛ржХрзЗ, рж╕рзЗржЬржирзНржп schema ржлрж┐ржХрзНрж╕ржб рж╣ржУрзЯрж╛ рж▓рж╛ржЧрзЗ ржирж╛ред

- Scalability: ржбрзЗржЯрж╛ ржЕржирзЗржХ ржмрзЗрж╢рж┐ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ SQL ржнрж┐рждрзНрждрж┐ржХ Database ржЧрзБрж▓рзЛрждрзЗ ржнрж╛рж░рзНржЯрж┐ржХрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржХрж░рж╛ рж╣рзЯ ржорж╛ржирзЗ storage ржПрж░ capacity ржмрзГржжрзНржзрж┐ ржХрж░рж╛ред (рждрж╛ржЫрж╛рзЬрж╛ Database Sharding-ржУ ржХрж░рж╛ рж╣рзЯрзЗ ржерж╛ржХрзЗ)

ржЖрж░ NoSQL ржнрж┐рждрзНрждрж┐ржХ рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржХрж░рж╛ рж╣рзЯ ржорж╛ржирзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ Capacity ржмрзГржжрзНржзрж┐ ржХрж░рж╛рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рж╛ржЗ рж╣рж▓ рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВред

ржПржЦржи ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржП ржХрзЛржи рж░ржХржорзЗрж░ scaling ржХрж░рж▓рзЗ ржЖржорж╛ржжрзЗрж░ system ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржм рждрж╛рж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирж┐ржмред

- ACID: SQL ржнрж┐рждрзНрждрж┐ржХ Database рж╕рж╛ржзрж╛рж░ржгржд ACID property follow ржХрж░рзЗ ржерж╛ржХрзЗред ржпрзЗржЦрж╛ржирзЗ A ржорж╛ржирзЗ Atomicity, C ржорж╛ржирзЗ Consistency, I ржорж╛ржирзЗ Isolation ржПржмржВ D ржорж╛ржирзЗ Durabilityред ржПржЧрзБрж▓рзЛрж░ ржЙржжрзНржжрзЗрж╢рзНржп рж╣рж▓ Data Integrity ржПржмржВ Consistency ржмржЬрж╛рзЯ рж░рж╛ржЦрж╛ред ржпрзЗржоржи Banking Software/ATM Vendor Machine ржПржЧрзБрж▓рзЛрж░ ржЬржирзНржп ACID ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред

ACID ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯред ACID ржмрзБржЭрждрзЗ рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ **Transaction** ржмрзБржЭрждрзЗ рж╣ржмрзЗред

**Transaction ржмрзБржЭрждрзЗ рж╣рж▓рзЗ Section-3 ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржи**

NoSQL ржнрж┐рждрзНрждрж┐ржХ Database, BASE ржорж╛ржирзЗ (Basically Available, Soft state, Eventual consistency) рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред

ржПржЦржи ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗ Data Integrity/Consistency(Strong Consistency) ржмржЬрж╛рзЯ рж░рж╛ржЦрждрзЗ ржЪрж╛ржЗрж▓рзЗ ржЖржорж░рж╛ **SQL ржнрж┐рждрзНрждрж┐ржХ Database ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм**, ржирж╛ рж╣рзЯ **NoSQL ржнрж┐рждрзНрждрж┐ржХ Database**ред

## Database Performance

Database Performance рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржирзЗ ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯред

### Database Indexing

Database Indexing ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржЯрзЗржХржирж┐ржХ ржпрж╛ ржЖржорж╛ржжрзЗрж░ Database Query ржХрзЗ ржжрзНрж░рзБржд рж╕ржорзНржкржирзНржи ржХрж░рзЗ ржерж╛ржХрзЗред

рж╕рж╛ржзрж╛рж░ржгржд ржбрзЗржЯрж╛ Disk-ржП рж╕ржВрж░ржХрзНрж╖ржи рж╣рзЯрзЗ ржерж╛ржХрзЗред ржпржЦржи ржбрзЗржЯрж╛ ржмрзЗрзЬрзЗ ржпрж╛рзЯ рждржЦржи рж╕рзЗржЗ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛ ржерзЗржХрзЗ Query ржХрж░рждрзЗ ржЕржирзЗржХ рж╕ржорзЯ рж▓рж╛ржЧрзЗ, ржПржЗ рж╕ржорзЯ ржХржорж╛ржирзЛрж░ ржЬржирзНржп ржЖрж░рзЗржХржЯрж┐ ржЯрзЗржмрж┐рж▓ Disk-ржП рждрзИрж░рзА рж╣рзЯ ржпрж╛ржХрзЗ Index Table ржмрж▓рзЗред ржПржЗ Index Table-ржП ржорзВрж▓ржд ржЖржорж╛ржжрзЗрж░ ржорзВрж▓ ржЯрзЗржмрж┐рж▓ ржПрж░ row(s) ржПрж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐ рж▓рж┐ржВржХ ржХрж░рж╛ ржерж╛ржХрзЗ, рж╕рзЗржЯрж┐ key-value ржЖржХрж╛рж░рзЗржУ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржпржЦржи ржирждрзБржи row ржХрж┐ржВржмрж╛ entry ржбрзЗржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓рзЗ insert рж╣рзЯ, Index Table-ржП рж╕рзЗржЗ ржирждрзБржи ржбрзЗржЯрж╛рж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐ рж▓рж┐ржВржХ рждрзИрж░рзА рж╣рзЯ (рж╕рзЗржЬржирзНржп ржЖржорж╛ржжрзЗрж░ write operation slow рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржЖрж░ read operation fast рж╣рзЯ)ред

ржкрж░ржмрж░рзНрждрзА рж╕ржорзЯрзЗ ржпржЦржи ржХрзЗржЙ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрзЗржЯрж╛ query ржХрж░ржмрзЗ, рждржЦржи Index Table ржмрж▓рзЗ ржжрж┐ржмрзЗ ржХрзЛржи ржПржбрзНржбрзНрж░рзЗрж╕рзЗ ржмрж╛ ржХрзЛржи ржмрзНрж▓ржХрзЗ ржбрзЗржЯрж╛ ржЖржЫрзЗред

ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирждрзЗ ржЪрж╛ржЗрж▓рзЗ ржЖржорж╛рж░ ржмрзНрж▓ржЧ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржи,

- https://codemacaw.com/database-indexing-makes-db-query-faster/
- https://codemacaw.com/what-is-b-tree-b-tree-in-dbms/

#### ржЖржорж░рж╛ ржХрж┐ рж╕ржм ржХрж▓рж╛ржорзЗ INDEX ржпрзЛржЧ ржХрж░рзЗ ржжрж┐ржмрзЛ?

ржЙрждрзНрждрж░ рж╣рж▓рзЛ, ржирж╛ред ржЖржорж░рж╛ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐рж░ (Cardinality) ржЙржкрж░ ржЧрзБрж░рзБрждрзНржм ржжрж┐ржмред ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж▓рж╛ржорзЗ ржбрзЗржЯрж╛рж░ ржорж╛ржирзЗрж░ ржЕржиржирзНржпрждрж╛ (uniqueness) ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред

ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржПржХржЯрж┐ ржЕрж░рзНржбрж╛рж░ (orders) ржЯрзЗржмрж┐рж▓ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рзБржи, ржпрж╛рж░ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд attribute рж░ржпрж╝рзЗржЫрзЗ:

- id

- customer_id

- status

ржПржЦрж╛ржирзЗ,

- id ржПржмржВ customer_id ржПрж░ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐ ржмрзЗрж╢рж┐ (high cardinality) ржХрж╛рж░ржг ржПржЧрзБрж▓рзЛ uniqueред ржЯрзЗржмрж┐рж▓рзЗрж░ ржЖржХрж╛рж░ ржпржд ржмрзЬ рж╣ржмрзЗ, ржПржЗ ржХрж▓рж╛ржоржЧрзБрж▓рзЛрж░ ржорж╛ржи рждржд ржмрзЗрж╢рж┐ ржЕржиржирзНржп рж╣ржмрзЗ, ржлрж▓рзЗ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐ржУ ржмрж╛рзЬржмрзЗред

- status ржПрж░ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐ ржХржо (low cardinality) ржХрж╛рж░ржг ржПрж░ ржорж╛ржи рж╕рзАржорж┐ржд, ржпрзЗржоржи: "pending", "processing", ржмрж╛ "delivered"ред ржЕрж░рзНржерж╛рзО, ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рж┐рждрзЗ ржПржХржЗ ржорж╛ржи ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВ ржПржмржВ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐:

ржЙржЪрзНржЪ ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐рж░ (high cardinality) ржХрж▓рж╛ржорзЗ ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВ ржХрж░рж▓рзЗ:

- ржЯрзЗржмрж┐рж▓ рж╕рзНржХрзНржпрж╛ржи (table scan) ржХржо рж╣рзЯред

- unique ржорж╛ржи ржЦрзЛржБржЬрж╛ ржжрзНрж░рзБржд рж╣рзЯ (ржпрзЗржоржи, customer_id)ред

ржирж┐ржорзНржи ржХрж╛рж░рзНржбрж┐ржирж╛рж▓рж┐ржЯрж┐рж░ (low cardinality) ржХрж▓рж╛ржорзЗ ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВ ржХрж░рж▓рзЗ:

- ржЯрзЗржмрж┐рж▓ рж╕рзНржХрзНржпрж╛ржи (table scan) ржмрзЗрж╢рж┐ рж╣рзЯред

- ржХрж╛рж░ржг ржХрж▓рж╛ржорзЗрж░ ржорж╛ржи unique ржирзЯ, ржпрж╛ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ (efficiency) ржХржорж┐рзЯрзЗ ржжрзЗрзЯред

### Query Optimization

Query рж▓рж┐ржЦрж╛рж░ рж╕ржорзЯ ржЖржорж░рж╛ Query Optimize ржнрж╛ржмрзЗ рж▓рж┐ржЦрж▓рзЗ ржЖржорж░рж╛ Query Execution Time ржХржорж╛рждрзЗ ржкрж╛рж░ржмрзЛред ржХрж┐ржЫрзБ ржЙржжрж╛рж╣рж░ржг,

- ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржлрж┐рж▓рзНржб (ржпрзЗржоржи, SELECT name, username FROM users) рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ SELECT \* ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗред
- SELECT DISTINCT рж╕ржорзНржнржм рж╣рж▓рзЗ avoid ржХрж░рж╛ред
- WHERE ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ HAVING ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗред
- LIMIT ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред
- INNER JOIN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред
- Number of Sub-queries ржХржорж╛ржирзЛред
- Complex Query ржПрж░ ржЬржирзНржп Stored Procedure ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ Network Traffic ржХржорж╛рждрзЗ ржкрж╛рж░рж┐ред
- WHERE clause ржПрж░ ржнрж┐рждрж░ Scaler Function ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рж╛ред WHERE clause ржПрж░ ржнрж┐рждрж░ Scaler Function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ Query Optimizer, Index ржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред
- Normalize ржЕржержмрж╛ Denormalize ржЕржирзБржпрж╛рзЯрзА Schema Design ржХрж░рж╛ред
- n+1 query execute ржирж╛ ржХрж░рж╛ред

### id ржХрж┐ auto-increment ржирж╛ UUID/ULID рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ?

System Design ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржорж╛ржжрзЗрж░ ржПржЗ ржмрзНржпржкрж╛рж░рзЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирж┐рждрзЗ рж╣рзЯ, ржЖржорж╛ржжрзЗрж░ ржЯрзЗржмрж┐рж▓ ржПрж░ id (primary key) ржХрзЗ ржХрж┐ auto-increment рж░рж╛ржЦржмрзЛ ржирж╛ ржХрж┐ random string ржорж╛ржирзЗ UUID/ULID рж░рж╛ржЦржмрзЛред

ржирж┐рж░рзНржнрж░ ржХрж░рзЗред

- auto-increment ржЕржирзБржорж╛ржиржпрзЛржЧрзНржпред UUID/ULID ржЕржирзБржорж╛ржиржпрзЛржЧрзНржп ржиржпрж╝ред

- auto-increment ржПрж░ рж╕рж╛ржЗржЬ рзк ржмрж╛ржЗржЯ (рзйрзи-ржмрж┐ржЯ ржЗржирзНржЯрж┐ржЬрж╛рж░) ржмрж╛ рзо ржмрж╛ржЗржЯ (рзмрзк-ржмрж┐ржЯ ржЗржирзНржЯрж┐ржЬрж╛рж░)ред UUID/ULID ржПрж░ рж╕рж╛ржЗржЬ рззрзм ржмрж╛ржЗржЯред

ржПржЧрзБрж▓рзЛ ржжрзБржЗржЯрж┐ ржкрзНрж░ржзрж╛ржи ржмрж┐ржмрзЗржЪрзНржп ржмрж┐рж╖ржпрж╝ред ржЖржкржирж┐ ржпрзЗржХрзЛржирзЛ ржПржХржЯрж┐ржХрзЗ ржмрзЗржЫрзЗ ржирж┐рждрзЗ ржкрж╛рж░рзЗржи ржмрж╛ рж╣рж╛ржЗржмрзНрж░рж┐ржб ржкржжрзНржзрждрж┐ржУ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

рждржмрзЗ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕рзЗрж░ ржжрж┐ржХ ржерзЗржХрзЗ ULID, UUID ржПрж░ рждрзБрж▓ржирж╛ржпрж╝ ржнрж╛рж▓рзЛ ржХрж╛ржЬ ржХрж░рзЗред ржХрж╛рж░ржг ULID-ржП рзкрзо-ржмрж┐ржЯ timestamp ржПржмржВ рзорзж-ржмрж┐ржЯ random ржнрзНржпрж╛рж▓рзБ ржерж╛ржХрзЗ, рждрж╛ржЗ ржПрж░ ржкрзНрж░ржержо ржЕржВрж╢ ржЯрж╛ржЗржорж╕рзНржЯрзНржпрж╛ржорзНржк рж╣ржУрзЯрж╛рзЯ ржПржЯрж┐ рж▓рзЗржХрзНрж╕рж┐ржХрзЛржЧрзНрж░рж╛ржлрж┐ржХржнрж╛ржмрзЗ (lexicographically) рж╕рж╛ржЬрж╛ржирзЛ ржпрж╛рзЯред

ржПржЗ рж╕рж╛ржЬрж╛ржирзЛ ржкрзНрж░ржХрзГрждрж┐ ULID-ржХрзЗ B+ Tree ржбрж╛ржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВ, ржЦрзЛржБржЬрж╛ (finding), ржЗржирж╕рж╛рж░рзНржЯ (insertion) ржУ ржбрж┐рж▓рж┐ржЯ (deletion) ржЕржкрж╛рж░рзЗрж╢ржирзЗ ржЖрж░ржУ ржХрж╛рж░рзНржпржХрж░рзА ржХрж░рзЗред

ржЕржирзНржпржжрж┐ржХрзЗ, UUID v4 рж╕ржорзНржкрзВрж░рзНржг random рж╣ржУрзЯрж╛рзЯ ржПржЯрж┐ B+ Tree ржЗржирзНржбрзЗржХрзНрж╕рж┐ржВрзЯрзЗ ржмрзЗрж╢рж┐ ржлрзНрж░рзНржпрж╛ржЧржорзЗржирзНржЯрзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ reebalancing ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯ, ржпрж╛ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржХржорж┐рзЯрзЗ ржжрзЗрзЯред рждрж╛ржЗ ULID ржЕржирзЗржХ ржХрзНрж╖рзЗрждрзНрж░рзЗ UUID-ржПрж░ рждрзБрж▓ржирж╛рзЯ ржжрзНрж░рзБрждрждрж░ рж╣рзЯред

### Database Sharding

Database Sharding рж╣рж▓ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржкрзГржержХ ржХрж░рж╛ред ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрж╛рзЯ, ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржбрзЗржЯрж╛/row ржпржжрж┐ ржмрж╛рзЬрждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржПржд ржкрж░рж┐ржорж╛ржг ржбрзЗржЯрж╛/row ржмрзЗрзЬрзЗ ржЧрзЗрж▓ ржпрж╛рж░ ржлрж▓рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓рзЗ ржЖрж░ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ рждржЦржи ржЖржорж░рж╛ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржорзВрж▓ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржкрзГржержХ ржХрж░рзЗ ржЕржирзНржпрж╛ржирзНржп shard ржЯрзЗржмрж┐рж▓рзЗ distribute ржХрж░рзЗ рж░рж╛ржЦрж┐ рж╕рзЗржЯрж╛ржЗ Database Shardingред ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░ ржПржЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржи рж╣ржмрзЗред

<p align="center">
  <img src="./images/sharding.png" alt="Sharding">
</p>

### Connection Pool

рж╕рж╛ржзрж╛рж░ржгржд ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржХрзЛржирзЛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рзЗ рждржЦржи рждрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ dedicated tcp connection рждрзИрж░рзА рж╣рзЯрзЗ ржерж╛ржХрзЗ, ржпржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рзЯрзЗ ржпрж╛ржмрзЗ рждржЦржи tcp connection рж╢рзЗрж╖ рж╣рзЯрзЗ ржпрж╛ржмрзЗред ред

<p align="center">
  <img src="sections/database/images/db-1.png" alt="database">
</p>

ржПрж░ржХржо ржкрзНрж░рждрж┐ржЯрж┐ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржирждрзБржи connection рждрзИрж░рзА рж╣рзЯред ржПржЦржи рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ connection рждрзИрж░рзА ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ рждржЦржи Latency ржмрзГржжрзНржзрж┐ ржкрж╛рзЯред ржПржЯрж┐ ржПржбрж╝рж╛рждрзЗ Connection Pool ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

ржПржЯрж┐ ржПржХржЯрж┐ pool ржпрзЗржЦрж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ connection open рж╣рзЯрзЗ ржерж╛ржХржмрзЗ, ржпржЦржи ржХрзЛржирзЛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕ржмрзЗ рждржЦржи ржПржХржЯрж┐ connection рж╕рзЗржЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред ржПрждрзЗ ржХрж░рзЗ ржмрж╛рж░ ржмрж╛рж░ connection рждрзИрж░рзА рж╣ржУрзЯрж╛ ржПржмржВ ржирж╖рзНржЯ рж╣ржУрзЯрж╛ ржерзЗржХрзЗ ржПржбрж╝рж╛рждрзЗ ржкрж╛рж░ржмред ржЖржорж░рж╛ specifically ржмрж▓рзЗ ржжрж┐рждрзЗ ржкрж╛рж░ржм ржХрзЯржЯрж┐ connection, pool ржПрж░ ржнрж┐рждрж░ ржерж╛ржХржмрзЗред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ pool ржПрж░ connection ржПрж░ ржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ client ржХрзЗ wait ржХрж░рж╛ рж▓рж╛ржЧржмрзЗред

<p align="center">
  <img src="sections/database/images/db-2.png" alt="database">
</p>

Connection Pool ржПрж░ size randomly рж╕рзЗржЯ ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред Concurrent Users ржПрж░ рж╕ржВржЦрзНржпрж╛ ржирж┐рзЯрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рждрзЗ рж╣ржмрзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржпржжрж┐ ржЖржкржирж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ рзирзжрзжрзж concurrent users ржерж╛ржХрзЗ, рждржмрзЗ рж╕ржм рзирзжрзжрзж ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржХрж╕ржЩрзНржЧрзЗ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржЖржШрж╛ржд ржХрж░ржмрзЗ ржирж╛ред рждрж╛ржЗ ржХржд рж╢рждрж╛ржВрж╢ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржХржпрзЛржЧрзЗ ржбрзЗржЯрж╛ржмрзЗрж╕ request ржХрж░ржмрзЗ рждрж╛ estimate ржХрж░рзБржи ржПржмржВ рж╕рзЗржЗ ржЕржирзБржпрж╛ржпрж╝рзА Connection Pool ржПрж░ size ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзБржиред

ржХрж┐ржнрж╛ржмрзЗ PostgreSQL ржП Connection Pool ржбрж┐ржлрж╛ржЗржи ржХрж░ржмрзЗржи,

```js
const { Pool } = require("pg");

const pool = new Pool({
  user: "your_user",
  host: "localhost",
  database: "your_db",
  password: "your_password",
  port: 5432,
  max: 10, // Maximum number of connections in the pool
  idleTimeoutMillis: 30000, // Close idle connections after 30s
  connectionTimeoutMillis: 2000, // Timeout if connection takes too long
});

// Usage
async function queryDatabase() {
  const client = await pool.connect();
  try {
    const result = await client.query("SELECT * FROM users");
    console.log(result.rows);
  } finally {
    client.release(); // Return client to the pool
  }
}

queryDatabase();
```

ржХрж┐ржнрж╛ржмрзЗ MySQL ржП Connection Pool ржбрж┐ржлрж╛ржЗржи ржХрж░ржмрзЗржи,

```js
const mysql = require("mysql2");

// Create a pool of connections
const pool = mysql.createPool({
  host: "localhost",
  user: "your_user",
  password: "your_password",
  database: "your_db",
  waitForConnections: true, // Allow waiting for available connection
  connectionLimit: 10, // Maximum number of connections in the pool
  queueLimit: 0, // Unlimited queued connections
});

// Query the database
pool
  .execute("SELECT * FROM users")
  .then(([rows, fields]) => {
    console.log(rows);
  })
  .catch((err) => {
    console.error(err);
  });
```

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ MySQL ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓рзЗ Connection Pool рж╕рзЗржЯржЖржк ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи,

ржЖржкржирж┐ рж▓рж┐ржирж╛ржХрзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ, `/etc/mysql/my.cnf`

```
[mysqld]
max_connections = 200       # Maximum number of connections allowed
wait_timeout = 600           # Timeout for waiting for client data
interactive_timeout = 600    # Timeout for interactive connections
```

### Buffer Pool (InnoDB ржЕржирзБрж╕рж╛рж░рзЗ)

ржПржЯрж┐ ржорзВрж▓ ржорзЗржорзЛрж░рж┐ ржмрж╛ RAM ржПрж░ ржнрж┐рждрж░рзЗрж░ ржПржХржЯрж┐ ржПрж▓рж╛ржХрж╛, ржпрзЗржЦрж╛ржирзЗ InnoDB (MySQL ржЗржЮрзНржЬрж┐ржи) ржЯрзЗржмрж┐рж▓ ржПржмржВ ржЗржиржбрзЗржХрзНрж╕ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢ ржХрж░рзЗ рж░рж╛ржЦрзЗ ржпржЦржи рждрж╛ access ржХрж░рж╛ рж╣ржпрж╝ред ржбрзЗржЯрж╛ рж╕рж░рж╛рж╕рж░рж┐ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржерзЗржХрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ query processing ржПрж░ рж╕ржорзЯржХрзЗ ржжрзНрж░рзБрждрждрж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

Buffer Pool ржмрж┐ржнрж┐ржирзНржи pages ржПрж░ рж╕ржоржирзНржмржпрж╝рзЗ ржЧржарж┐ржд, ржПржмржВ ржкрзНрж░рждрж┐ржЯрж┐ page-ржП ржбрзЗржЯрж╛рж░ рж╕рж╛рж░рж┐ (rows of data) ржерж╛ржХрзЗред ржПржЯрж┐ ржорзВрж▓ржд рж▓рж┐ржВржХржб рж▓рж┐рж╕рзНржЯ ржбрзЗржЯрж╛ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржЕржирзБржпрж╛рзЯрзА рж╕рж╛ржЬрж╛ржирзЛ ржерж╛ржХрзЗред

рж╕рж╛ржзрж╛рж░ржгржд ржбрж┐рж╕рзНржХ ржерзЗржХрзЗ ржбрж╛ржЯрж╛ fetch ржХрж░рзЗ ржЖржирж╛, рж╕ржорзЯ рж╕рж╛ржкрзЗржХрзНрж╖ ржмрзНржпрж╛ржкрж╛рж░ред ржПржХрзНрж╖рзЗрждрзНрж░рзЗ Buffer Pool ржЕржирзЗржХ ржЙржкржХрж╛рж░рзАред

ржбрзЗржЯрж╛рж░ ржЬржирзНржп ржбрж┐рж╕рзНржХ ржПрж░ ржоржзрзНржпрзЗ рж╕рж╛рж░рзНржЪ ржХрж░рж╛рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ, ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржерзЗржХрзЗ рж╕рж╛рж░рзНржЪ ржХрж░рзЗ ржбрж╛ржЯрж╛ ржирзЗрзЯрж╛ рж╣рзЯред ржпржжрж┐ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржПрж░ ржоржзрзНржпрзЗ ржбрж╛ржЯрж╛ ржирж╛ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ disk ржПрж░ ржнрж┐рждрж░ рж╕рж╛рж░рзНржЪ ржХрж░рзЗ ржбрж╛ржЯрж╛ ржирзЗрзЯрж╛ рж╣ржмрзЗ, рждрж╛рж░ржкрж░ ржбрж╛ржЯрж╛ржХрзЗ ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ ржнрж┐рждрж░ cache ржХрж░рзЗ рж░рзЗржЦрзЗ ржжрзЗрзЯрж╛ рж╣рзЯред

InnoDB ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЗржЮрзНржЬрж┐ржи ржПрж░ Default buffer pool ржПрж░ size рж╣ржЪрзНржЫрзЗ рззрзирзо ржПржоржмрж┐, ржпрж╛ ржорзВрж▓ржд ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ environment ржПрж░ ржЬржирзНржп, ржкрзНрж░рзЛржбрж╛ржХрж╢ржи environment ржПрж░ ржЬржирзНржп ржПрж░ size ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржХрж┐ржЫрзБ ржмрж┐рж╖рзЯрзЗрж░ ржЙржкрж░ред

ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ size, innodb_buffer_pool_chunk_size \* innodb_buffer_pool_instances ржПрж░ рж╣рзЯ рж╕ржорж╛ржи ржерж╛ржХржмрзЗ ржХрж┐ржВржмрж╛ multiple ржерж╛ржХржмрзЗред

- innodb_buffer_pool_chunk_size: ржПржЯрж┐ ржорзВрж▓ржд ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ chunk size ржХржд рждрж╛ ржмрж▓рзЗ ржжрзЗрзЯред MySQL ржПрж░ InnoDB storage engine ржПрж░ ржнрж┐рждрж░ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ chunk рж╣рж┐рж╕рзЗржмрзЗ ржнрж╛ржЧ ржХрж░рж╛ ржерж╛ржХрзЗред ржкрзНрж░рждрж┐ржЯрж┐ chunk ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорзЗржорзЛрж░рж┐ рж╕рж╛ржЗржЬ ржжрзНржмрж╛рж░рж╛ ржирж┐рж░рзНржзрж╛рж░рж┐ржд рж╣рзЯ, ржпрж╛ innodb_buffer_pool_chunk_size ржжрзНржмрж╛рж░рж╛ configure ржХрж░рж╛ рж╣рзЯред

```sql
SHOW VARIABLES LIKE 'innodb_buffer_pool_chunk_size';
```

ржЙржкрж░рзЗрж░ SQL command ржжрзНржмрж╛рж░рж╛ ржЖржорж░рж╛ ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЛ, ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржХрзЯржЯрж┐ chunk ржП ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

- innodb_buffer_pool_instances: ржПржЯрж┐ ржжрзНржмрж╛рж░рж╛ ржмрзБржЭрж╛ ржпрж╛рзЯ, ржкрзНрж░рждрж┐ржЯрж╛ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ржХрзЗ ржХрзЯржЯрж┐ instance ржП ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

```sql
SHOW VARIABLES LIKE 'innodb_buffer_pool_instances';
```

ржЙржкрж░рзЗрж░ SQL command ржжрзНржмрж╛рж░рж╛ ржЖржорж░рж╛ ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЛ, ржкрзНрж░рждрж┐ржЯрж╛ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ржХрзЗ ржХрзЯржЯрж┐ instance ржП ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

ржоржирзЗ ржХрж░рж┐,

- innodb_buffer_pool_chunk_size = 128MB
- innodb_buffer_pool_instances = 4

рждрж╛рж╣рж▓рзЗ innodb_buffer_pool_size рж╣рждрзЗ ржкрж╛рж░рзЗ,

- 128MB ├Ч 4 = 512MB
- 128MB ├Ч 4 ├Ч 2 = 1024MB = 1GB

ржЖржорж░рж╛ ржпрзЗржХрзЛржи ржПржХржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рждрзЗ ржкрж╛рж░рж┐ред рждржмрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ RAM ржПрж░ ржкрзНрж░рждрж┐ ржЦрзЗрзЯрж╛рж▓ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред

ржзрж░рзЗ ржирж┐, innodb_buffer_pool_size = рзз GB

RAM ржпржжрж┐ рзо GB рж╣рзЯ?

рждрж╛рж╣рж▓рзЗ рзз GB ржорж╛ржирзЗ, рззрзи.рзл% рж╢рзБржзрзБ ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ ржЬржирзНржп ржмрж╛ржХрж┐ рзорзн.рзл% ржЕржирзНржпрж╛ржирзНржп ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПрж░ ржЬржирзНржп ржмрж░рж╛ржжрзНржз ржХрж░рж╛ рж╣рзЯ, ржпрж╛ рж╕рж╛ржзрж╛рж░ржгржд acceptableред

RAM ржпржжрж┐ рзк GB рж╣рзЯ?

рждрж╛рж╣рж▓рзЗ рзз GB ржорж╛ржирзЗ, рзирзл% рж╢рзБржзрзБ ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ ржЬржирзНржп ржмрж╛ржХрж┐ рзнрзл% ржЕржирзНржпрж╛ржирзНржп ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПрж░ ржЬржирзНржп ржмрж░рж╛ржжрзНржз ржХрж░рж╛ рж╣рзЯ, ржпрж╛ рж╕рж╛ржзрж╛рж░ржгржд acceptableред

ржпрзЗрж╕ржм ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рзЛ ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ,

- ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржПрж░ size ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рж╛рж░ ржкрзВрж░рзНржмрзЗ ржжрзЗржЦрждрзЗ рж╣ржмрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо read-heavy ржирж╛ржХрж┐ write-heavyред

- ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржПрж░ size ржмрзЗрж╢рж┐ ржмрзЬ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ, рж╕рж╛рж░рзНржнрж╛рж░ swapping ржХрж░рж╛ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржпрж╛рж░ ржорж╛ржирзЗ ржЕржкрж╛рж░рзЗржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐рж╕рзНржХ ржХрзЗ ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓ ржорзЗржорж░рж┐ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░ржмрзЗред ржпрж╛ performance ржирж╛ржорж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред

### Hardware ржПржмржВ Infrastructure

ржЖржорж╛ржжрзЗрж░ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржПрж░ ржкрж╛рж░ржлрж░ржорзЗржирзНрж╕ ржнрж╛рж▓рзЛ ржХрж░рждрзЗ ржкрж╛рж░рзЗ рж╕рзЗржЬржирзНржп ржЖржорж╛ржжрзЗрж░ requirements ржЕржирзБржпрж╛рзЯрзА Hardware ржПржмржВ Infrastructure ржирзЗрзЯрж╛ред

## Write/Update ржЕржкрж╛рж░рзЗрж╢ржи ржПрж░ ржЬржирзНржп Performance Optimization

- ржЕржкрзНрж░рзЛржЬржирзАрзЯ ржХрж▓рж╛ржо ржЗржиржбрзЗржХрзНрж╕рж┐ржВ ржирж╛ ржХрж░рж╛ред ржХрж╛рж░ржг ржпржЦржи ржирждрзБржи row ржЗржирзНрж╕рж╛рж░рзНржЯ рж╣ржмрзЗ рждржмрзЗ ржЗржиржбрзЗржХрзНрж╕ ржЯрзЗржмрж┐рж▓рзЗржУ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржЗржирзНрж╕рж╛рж░рзНржЯ рж╣ржмрзЗ ржпрж╛ write ржЕржкрж╛рж░рзЗрж╢ржи slow ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред
- Requirements ржЕржирзБржпрж╛рзЯрзА Hardware ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рж╛ред
- innodb_buffer_pool_size рж╕рзЗржЯ ржХрж░рж╛ред ржХрж╛рж░ржг ржкрзНрж░рждрж┐ржЯрж┐ write ржЕржкрж╛рж░рзЗрж╢ржи рж╕рж░рж╛рж╕рж░рж┐ ржбрж┐рж╕рзНржХ ржП ржЧрж┐рзЯрзЗ рж╕рзНржЯрзЛрж░ рж╣рзЯ ржирж╛, ржмрж░ржВ ржмрж╛ржлрж╛рж░ ржкрзБрж▓ ржПрж░ ржнрж┐рждрж░ ржЕржмрж╕рзНржерж╛ржи ржХрж░рзЗ ржкрзНрж░ржержорзЗред рждрж╛ржЗ ржмрж╛ржлрж╛рж░ ржкрзБрж▓рзЗрж░ size enough ржерж╛ржХрж▓рзЗ write ржЕржкрж╛рж░рзЗрж╢ржи fast рж╣ржмрзЗред

## Read query, indexing ржЫрж╛рзЬрж╛ ржХрж┐ржнрж╛ржмрзЗ execute рж╣рзЯ?

<p align="center">
  <img src="sections/database/images/read-query-execution.png" alt="Read Query Execution">
</p>

ржЫржмрж┐ржЯрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рж▓рзЗ,

- User ржПржХржЯрж┐ GET query рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рж▓рзЛред рж╢рж░рзНржд username="lahin"ред
- Page Filtering ржирж╛ржоржХ ржЕржВрж╢ржЯрж┐ ржкрзНрж░ржержорзЗ Buffer Pool ржПрж░ ржнрж┐рждрж░ ржЦрзБржБржЬржмрзЗ username=lahin рж╕ржорзНржмрж▓рж┐ржд page ржЖржЫрзЗ ржХрж┐ ржирж╛ред ржпржжрж┐ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ, рж╕рзЗржЗ page ржерзЗржХрзЗ row ржХрзЗ filter ржХрж░рзЗ user ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред ржЕржирзНржпржерж╛рзЯ Disk ржПрж░ pages ржПрж░ ржоржзрзНржп one-by-one ржХрж░рзЗ I/O request ржЪрж╛рж▓рж╛ржмрзЗред
- ржпржЦржи username=lahin рж╕ржорзНржмрж▓рж┐ржд row ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗ рждржЦржи рждрж╛ рж╕ржорзНржкрзВрж░рзНржг page ржХрзЗ Buffer Pool ржП Cache ржХрж░рзЗ рж░рзЗржЦрзЗ ржжрж┐ржмрзЗред
- рждрж╛рж░ржкрж░ рж╕рзЗржЗ page ржерзЗржХрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ рж╣рзЯрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ row; user ржПрж░ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

[ржЗржЙржЯрзБржмрзЗ ржжрзЗржЦрзБржи](https://youtu.be/fY-LGFSIkBw?si=f-R-W77xkFjxQ9_A)

## ржкрзНрж░рзЛржбрж╛ржХрж╢ржи environment ржПрж░ ржоржзрзНржпрзЗ ржХрж┐ржнрж╛ржмрзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ error ржЧрзБрж▓рзЛ log ржХрж░ржмрзЛ?

ржкрзНрж░рзЛржбрж╛ржХрж╢ржи environment ржП ржпрзЗржХрзЛржирзЛ рж╕ржорзЯ ржпрзЗржХрзЛржирзЛ error ржЪрж▓рзЗ ржЖрж╕рждрзЗ ржкрж╛рж░рзЗред ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо рж╕ржЪрж▓ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп ржПрж╕ржм error ржПрж░ рж▓ржЧ ржкрзЬрзЗ ржмрзБржЭрждрзЗ рж╣ржмрзЗ рждрж╛рж░ржкрж░ рж╕ржорж╛ржзрж╛ржи(fix) ржХрж░рждрзЗ рж╣ржмрзЗред ржпржд рждрж╛рзЬрж╛рждрж╛рзЬрж┐ ржЖржорж░рж╛ рж╕рзЗржЗ error ржЧрзБрж▓рзЛ ржкрзЬрзЗ fix ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛ, рждрж╛ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржЬржирзНржп ржнрж╛рж▓рзЛред

ржзрж░рзЗ ржирж┐, ржЖржорж░рж╛ рж▓рж┐ржирж╛ржХрзНрж╕(ubuntu) ржПрж░ ржоржзрзНржпрзЗ MySQL ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрж┐ред

### Error Log

Linux ржПрж░ ржнрж┐рждрж░ ржЖржорж░рж╛ cd ржХрж░рж▓рзЗ,

```
ubuntu@ip-192-168-0-1:/$ cd /var/log/mysql
```

mysql ржлрзЛрж▓рзНржбрж╛рж░ ржПрж░ ржнрж┐рждрж░ **error.log** ржирж╛ржоржХ ржлрж╛ржЗрж▓ ржерж╛ржХрзЗред ржПржЗ ржлрж╛ржЗрж▓ cat ржХрж░рж▓рзЗ ржЖржорж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЛ,

- Server Startup ржнрж┐рждрзНрждрж┐ржХ Errors: MySQL ржпржЦржи start рж╣рзЯ рждржЦржи ржПрж░ржХржо ржХрж┐ржЫрзБ error ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ,

```
[ERROR] Can't start server: Bind on TCP/IP port: Address already in use
```

ржПрж░ ржорж╛ржирзЗ ржжрж╛ржБрзЬрж╛рзЯ, MySQL bind ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗ ржирж╛ рждрж╛рж░ ржкрзЛрж░рзНржЯ ржжрж┐рзЯрзЗ (рж╕рж╛ржзрж╛рж░ржгржд рзйрзйрзжрзм)ред рж╕рзЗржЗ ржкрзЛрж░рзНржЯ ржЗрждрж┐ржоржзрзНржпрзЗ ржЕржирзНржп ржкрзНрж░рж╕рзЗрж╕ ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗред

ржХрж┐ржВржмрж╛,

```
[ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.user' doesn't exist
```

MySQL ржпржЦржи рждрж╛рж░ privilege tables ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рзЗ рждржЦржи ржПржЗ error ржЖрж╕рзЗред

- Authentication ржПржмржВ Access ржнрж┐рждрзНрждрж┐ржХ Errors: ржнрзБрж▓ username ржХрж┐ржВржмрж╛ password ржХрж┐ржВржмрж╛ missing privileges ржнрж┐рждрзНрждрж┐ржХ ржПрж░рж░ржЧрзБрж▓рзЛ ржжрзЗржЦрж╛ржмрзЗред

```
[Warning] Access denied for user 'root'@'localhost' (using password: YES)
```

- Storage Engine ржнрж┐рждрзНрждрж┐ржХ Errors: Disk Failure, Power Outage ржХрж┐ржВржмрж╛ Forced Shutdown ржпрж╛ ржЯрзЗржмрж┐рж▓ржХрзЗ corrupted ржХрж░рзЗ ржлрзЗрж▓рзЗред ржЖржорж░рж╛ ржПрж░ржХржо ржПрж░рж░ ржжрзЗржЦрждрзЗ ржкрж╛рж░рж┐,

```
[ERROR] InnoDB: Page [page id] log sequence number [LSN] is in the future!
[ERROR] InnoDB: Database page corruption on disk or a failed file read
[ERROR] InnoDB: Table `mydb/mytable` is corrupted
[ERROR] InnoDB: Unable to read tablespace [file.ibd]
```

- Crash ржПржмржВ Critical Errors: ржЯрзЗржмрж┐рж▓ corrupted ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗ ржХрж┐ржВржмрж╛ Disk full ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗ MySQL version ржП ржмрж╛ржЧ ржерж╛ржХрж╛рж░ ржХрж╛рж░ржгрзЗржУ ржирж┐ржЪрзЗрж░ ржПрж░рж░ржЧрзБрж▓рзЛ ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ,

```
[ERROR] mysqld got signal 11 (Segmentation fault)
[ERROR] InnoDB: Assertion failure
[ERROR] Fatal error: Can't open and lock privilege tables
```

Table Corruption ржХрзА? MySQL-ржП ржЯрзЗржмрж┐рж▓ Corruption ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ тАФ ржХрзЛржирзЛ ржбрзЗржЯрж╛ржмрзЗржЬ ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржмрж╛ ржбрзЗржЯрж╛ ржнрзЗржЩрзЗ ржЧрзЗржЫрзЗ ржмрж╛ ржЦрж╛рж░рж╛ржк рж╣рзЯрзЗ ржЧрзЗржЫрзЗ, ржпрзЗржЯрж╛рж░ ржлрж▓рзЗ ржУржЗ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржбрзЗржЯрж╛ ржкрзЬрж╛ ржмрж╛ рж▓рзЗржЦрж╛ ржпрж╛рзЯ ржирж╛ред

(ржЖрж░рзЛ ржЖрж╕ржЫрзЗред)

## ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛ

- Data Integrity ржХрж┐?
- Schemaless ржХрж┐?
- Database Indexing ржХрж┐?
- ржХрж┐ржнрж╛ржмрзЗ ржЗржиржбрзЗржХрзНрж╕рж┐ржВ query performance ржЙржирзНржиржд ржХрж░рзЗ?
- b tree ржПржмржВ b+ tree ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐?
- Primary Key ржПржмржВ Secondary Key ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐?
- Cluster Index ржХрж┐?
- Unique ржПржмржВ Non-unique index ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐?
- ржХрж┐ржнрж╛ржмрзЗ ржПржХрж╛ржзрж┐ржХ ржЗржиржбрзЗржХрзНрж╕ ржПржХрж╕рж╛ржерзЗ ржПржХржЯрж┐ query рждрзЗ ржХрж╛ржЬ ржХрж░рзЗ?
- Composite Index ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?
- FULLTEXT index ржХрж┐? ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?
- ржХрзЛржи ржХрзЛржи column ржЗржиржбрзЗржХрзНрж╕рж┐ржВ ржХрж░ржмрзЛ ржХрж┐ ржирж╛ рждрж╛ ржХрж┐ржнрж╛ржмрзЗ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░ржмрзЛ?
- INSERT, UPDATE, DELETE ржЕржкрж╛рж░рзЗрж╢ржиржЧрзБрж▓рзЛрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржЗржиржбрзЗржХрзНрж╕рж┐ржВ ржПрж░ ржкрзНрж░ржнрж╛ржм ржХрж┐?
- Covering Index ржХрж┐?
- Connection Pool ржПрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯрждрж╛ ржХрж┐?
- ржХрж┐ рж╣ржмрзЗ ржпржжрж┐ Connection Pool ржПрж░ ржоржзрзНржпрзЗ ржХрж╛ржирзЗржХрж╢ржиржЧрзБрж▓рзЛ ржмрзНржпрж╕рзНржд ржерж╛ржХрзЗ?
- Buffer Pool ржПрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯрждрж╛ ржХрж┐?
- select \* ржХрзЗржи slow?


## Section 3: Database Transaction

ржбрж╛ржЯрж╛ржмрзЗржЬ ржЯрзНрж░рж╛ржиржЬрж╛ржХрж╢ржи ржПржЗ рж╕ржорж╕рзНржд ржкрзНрж░рж╢рзНржи ржмрж╛ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ:

- ржбрж╛ржЯрж╛ржмрзЗржЬ рж╕ржлржЯржУржпрж╝рзНржпрж╛рж░ ржмрж╛ рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржпрзЗ ржХрзЛржирзЛ рж╕ржоржпрж╝ fail рж╣рждрзЗ ржкрж╛рж░рзЗред (write ржЕржкрж╛рж░рзЗрж╢ржирзЗрж░ ржорж╛ржЭржЦрж╛ржирзЗржУ)

- ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржмрж╛ржзрж╛ ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ, ржпрж╛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржХрзЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржерзЗржХрзЗ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐рждржнрж╛ржмрзЗ ржмрж┐ржЪрзНржЫрж┐ржирзНржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред

- ржПржХрж╛ржзрж┐ржХ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржПржХржЗ ржПржирзНржЯрзНрж░рж┐ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржпрж╛рж░ ржлрж▓рзЗ ржПржХрзЗ ржЕржкрж░рзЗрж░ ржкрж░рж┐ржмрж░рзНрждржиржЧрзБрж▓рж┐ ржУржнрж╛рж░рж░рж╛ржЗржЯ рж╣рждрзЗ ржкрж╛рж░рзЗред

- ржПржХржЯрж┐ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржбрж╛ржЯрж╛ржмрзЗржЬ ржерзЗржХрзЗ ржПржоржи рждржерзНржп ржкржбрж╝рждрзЗ ржкрж╛рж░рзЗ ржпрж╛ рж╕ржорзНржкрзВрж░рзНржгрж░рзВржкрзЗ Commit ржХрж░рж╛ рж╣ржпрж╝ржирж┐, ржлрж▓рзЗ рждржерзНржпржЯрж┐ ржЕржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ ржмрж╛ ржЕрж╕ржВржЧрждрж┐ржкрзВрж░рзНржг рж╣рждрзЗ ржкрж╛рж░рзЗред

- ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯржжрзЗрж░ ржоржзрзНржпрзЗ concurrency ржмрж╛ race condition ржПрж░ ржХрж╛рж░ржгрзЗ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржмрж╛ржЧ рждрзИрж░рж┐ рж╣рждрзЗ ржкрж╛рж░рзЗред

ржЙржкрж░рзЗрж░ ржкрзЯрзЗржирзНржЯржЧрзБрж▓рзЛрж░ ржЙрждрзНрждрж░ ржкрзЗрждрзЗ рж╣рж▓рзЗ ржирж┐ржЪрзЗрж░ ржЯржкрж┐ржХржЧрзБрж▓рзЛ ржмрзБржЭрждрзЗ рж╣ржмрзЗред

ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ Transaction ржмрж▓рждрзЗ ржмрзЛржЭрж╛рзЯ ржПржХрж╛ржзрж┐ржХ READ ржПржмржВ WRITE ржЕржкрж╛рж░рзЗрж╢ржиржХрзЗ ржПржХржЯрж┐ рж▓ржЬрж┐ржХрзНржпрж╛рж▓ ржЗржЙржирж┐ржЯ ржПрж░ ржоржзрзНржпрзЗ ржЖржмржжрзНржз ржХрж░рж╛ред ржПрж░ ржлрж▓рзЗ, рж╕ржорж╕рзНржд READ ржПржмржВ WRITE ржЕржкрж╛рж░рзЗрж╢ржи ржПржХрж╕рж╛ржерзЗ ржПржХржЯрж┐ ржПржХржХ ржЕржкрж╛рж░рзЗрж╢ржи рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪрж┐ржд рж╣рзЯред ржЕрж░рзНржерж╛рзО, ржпржжрж┐ рж╕ржм ржЕржкрж╛рж░рзЗрж╢ржи рж╕ржлрж▓ржнрж╛ржмрзЗ рж╕ржорзНржкржирзНржи рж╣рзЯ, рждржмрзЗ COMMIT ржХрж░рж╛ рж╣ржмрзЗ, ржЖрж░ ржпржжрж┐ ржХрзЛржирзЛ ржПржХржЯрж┐ ржЕржкрж╛рж░рзЗрж╢ржи ржмрзНржпрж░рзНрже рж╣рзЯ, рждржмрзЗ ROLLBACK ржПрж░ ржорж╛ржзрзНржпржорзЗ ржкрзВрж░рзНржмрзЗрж░ ржЕржмрж╕рзНржерж╛ ржлрж┐рж░рж┐рзЯрзЗ ржирзЗржУрзЯрж╛ рж╣ржмрзЗред

рж╕рж╛ржзрж╛рж░ржгржд Transaction ржПржнрж╛ржмрзЗ рж╢рзБрж░рзБ рж╣рзЯ,

```sql
BEGIN

SELECT * FROM users
UPDATE users SET username=тАЬlahinтАЭ WHERE id=224

COMMIT
```

ржЖржкржирж┐ Prisma ржжрж┐рзЯрзЗ рж▓рж┐ржЦрждрзЗ ржЧрзЗрж▓рзЗ,

```js
await prisma.$transaction(async (prisma) => {
  const users = await prisma.users.findMany();

  await prisma.user.update({
    where: { id: 224 },
    data: { username: "lahin" },
  });
});
```

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзНрж░рж╛ржирж╕рж╛ржХрж╢рж╛ржи**
## Database Transaction

### Atomic update ржПржмржВ Database Transaction

ржХрзЛржирзЛ ржПржХржжрж┐ржи ржПржХржЬржи user X ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╣рзЛржЯрзЗрж▓ рж░рзБржо рж░рж┐рж╕рж╛рж░рзНржн(reserve) ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржЫрзЗред ржарж┐ржХ ржПржХржЗ рж╕ржорзЯ ржЖрж░рзЗржХржЬржи user Y ржПржХржЗ рж░рзБржо рж░рж┐рж╕рж╛рж░рзНржн(reserve) ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржЫрзЗред

ржарж┐ржХ рж░рж╛ржд рззрзз:рзжрзж:рззрзи ржШржЯрж┐ржХрж╛рзЯ, рзиржЯрж┐ user ржПржХржЗ рж╕ржорзЯ ржлрж░рзНржо fill-up ржХрж░рзЗржЫрзЗ ржПржмржВ "Reserve" ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рзЗржЫрзЗред

ржПржЦржи рзиржЯрж┐ user ржПрж░ ржнрж┐рждрж░ Race Condition рждрзИрж░рзА рж╣ржмрзЗред

ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЗржЮрзНржЬрж┐ржи ржПрж░ ржнрж┐рждрж░ Serialization ржШржЯржмрзЗ, ржпрж╛рждрзЗ ржХрзЛрзЯрзЗрж░рж┐ржЧрзБрж▓рзЛ ржПржХржЯрж┐ serial ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рзЗред

ржПржЦржи Atomic update ржХрж┐ржнрж╛ржмрзЗ рж╣ржмрзЗ?

- ржзрж░рзЗ ржирж┐, user A ржПрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░ржержорзЗ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗ,

```sql
UPDATE reservations SET status = 'booked', user_id = 1 WHERE room_number = 10;
```

User A ржПрж░ ржЬржирзНржп рж░рзБржо рж░рж┐рж╕рж╛рж░рзНржн рж╣рзЯрзЗ ржЧрзЗрж▓рзЛред

- ржПржЦржи, user B ржПрж░ ржЬржирзНржп рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗ,

```sql
UPDATE reservations SET status = 'booked', user_id = 2 WHERE room_number = 10;
```

ржпрзЗрж╣рзЗрждрзБ рж░рзБржо ржиржорзНржмрж░ рззрзж ржЗрждрж┐ржоржзрзНржпрзЗ user_id = 1 ржПрж░ ржжрзНржмрж╛рж░рж╛ рж░рж┐рж╕рж╛рж░рзНржн рж╣рзЯрзЗ ржЧрзЗржЫрзЗ, рж╕рзЗрж╣рзЗрждрзБ user_id = 2 ржПрж░ ржПржЗ query ржХрж┐ржЫрзБ ржХрж░ржмрзЗ ржирж╛ред

**ржПржЗ ржЖржЪрж░ржгржЯрж┐(behavior) Atomic Update ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐ржд**ред ржпрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ query рж╕ржлрж▓ржнрж╛ржмрзЗ рж░рзЗржХрж░рзНржб ржорзЛржбрж┐ржлрж╛ржЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЦржи ржкрзНрж░рж╢рзНржи рж╣ржЪрзНржЫрзЗ Atomic Update ржерж╛ржХрж╛рж░ ржкрж░рзЗржУ ржЖржорж╛ржжрзЗрж░ ржХрзЗржирзЛ Transaction ржкрзНрж░рзЯрзЛржЬржи ржкрзЬрзЗ?

ржзрж░рзЗ ржирж┐, ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрж░ржмрзЗ,

- ржкрзНрж░ржержорзЗ user balance ржЪрзЗржХ ржХрж░ржмрзЗ, reservation ржПрж░ ржкрзВрж░рзНржмрзЗред
- рж░рзБржо ржПрж░ ржнрж╛рзЬрж╛рж░ ржкрж░рж┐ржорж╛ржи ржЕржирзБржпрж╛рзЯрзА ржмрзНржпрж╛рж▓рж╛ржирзНрж╕ ржХрзЗржЯрзЗ ржлрзЗрж▓ржмрзЗред
- рж░рзБржо'ржЯрж╛ рж░рж┐рж╕рж╛рж░рзНржн ржХрж░ржмрзЗ, ржбрж╛ржЯрж╛ржмрзЗрж╕ ржПрж░ reservation ржЯрзЗржмрж┐рж▓ ржПрж░ ржоржзрзНржпрзЗред

**ржЯрзНрж░рж╛ржирж╕рж╛ржХрж╢рж╛ржи ржЫрж╛рзЬрж╛**,

тАФ рзз) user ржПрж░ ржмрзНржпрж╛рж▓рж╛ржирзНрж╕ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ тАФ

```sql
SELECT balance FROM users WHERE id = 1;
```

тАФ рзи) ржмрзНржпрж╛рж▓рж╛ржирзНрж╕ ржХрзЗржЯрзЗ ржирж┐рж▓рзЗ тАФ

```sql
UPDATE users SET balance = balance - 100 WHERE id = 1;
```

тАФ рзй) reservations ржЯрзЗржмрж┐рж▓рзЗ рж░рзБржо ржмрзБржХ ржХрж░рж╛ тАФ

```sql
UPDATE reservations SET status = 'booked', user_id = 1 WHERE room_number = 10;
```

рж╕ржорж╕рзНржпрж╛: ржпржжрж┐ ржмрзНржпрж╛рж▓рж╛ржирзНрж╕ ржХрзЗржЯрзЗ ржирзЗрзЯрж╛ рж╣рзЯрзЗ ржпрж╛рзЯ, рждржЦржи ржЕржирзНржп ржХрзЛржирзЛ user рждрж╛рж░ ржирж┐ржЬрзЗрж░ ржЬржирзНржп рж╕рзНржЯрзЗржк рзй ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржлрзЗрж▓рзЗ рждрж╛рж╣рж▓рзЗ ржкрзНрж░ржержо user ржПрж░ ржЬржирзНржп ржмрзНржпрж╛рж▓рж╛ржирзНрж╕ ржХрзЗржЯрзЗ ржирзЗрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирзНрждрзБ рждрж╛рж░ ржЬржирзНржп рж░рзБржо ржмрж░рж╛ржжрзНржз ржХрж░рж╛ рж╣рзЯ ржирж┐ред

**ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржХрж░рзЗ ржерж╛ржХрзЗ Database Transaction**ред

### ржХржЦржи ржЯрзНрж░рж╛ржирж╕рж╛ржХрж╢рж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐?

- Financial ржПржмржВ Banking Applicationред ржХрзЗржирзЛ? ржХрж╛рж░ржг ржПржЧрзБрж▓рзЛрждрзЗ Money Transfers ржПржмржВ Withdrawals рж╣рзЯрзЗ ржерж╛ржХрзЗред
- E-Commerce ржПржмржВ Online Marketplaceред ржХрзЗржирзЛ? ржХрж╛рж░ржг ржПржЧрзБрж▓рзЛрждрзЗ Order, Payment ржПржмржВ Inventory рждрзЗ Consistency ржмржЬрж╛рзЯ рж░рж╛ржЦрж╛ рж▓рж╛ржЧрзЗред

Transaction ржорзВрж▓ржд ржЖржорж╛ржжрзЗрж░ржХрзЗ рзк'ржЯрж┐ features ржжрж┐рзЯрзЗ ржерж╛ржХрзЗред

- Atomicity
- Consistency
- Isolation
- Durability

### Atomicity

ржпржЦржи ржХрзЛржирзЛ(/ржПржХржЯрж┐) ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХрж╛ржзрж┐ржХ WRITE ржЕржкрж╛рж░рзЗрж╢ржи ржЪрж╛рж▓рж╛рждрзЗ ржпрж╛рзЯ ржЕрж░рзНржерж╛рзО ржпржжрж┐ рзк ржЯрж┐ WRITE ржЕржкрж╛рж░рзЗрж╢ржи ржПрж░ ржоржзрзНржпрзЗ рзи ржЯрж┐ WRITE ржЕржкрж╛рж░рзЗрж╢ржи successfully ржЪрж╛рж▓рж╛ржирзЛрж░ ржкрж░ ржХрзЛржирзЛ Fault рж╕ржВржЧржарж┐ржд рж╣рзЯ, (ржпрзЗржоржи- process crushes, network communication interrupt рж╣рж▓рзЗ ржХрж┐ржВржмрж╛ ржбрж┐рж╕рзНржХ рж╕рж╛ржЗржЬ full рж╣рзЯрзЗ ржЧрзЗрж▓рзЗред) рждржЦржи successfully рж╕ржВржЧржарж┐ржд рж╣ржУрзЯрж╛ ржЕржкрж╛рж░рзЗрж╢ржиржЧрзБрж▓рзЛржХрзЗ рж░рж┐ржнрж╛рж░рзНржЯ ржХрж░рзЗ ржжрж┐ржмрзЗред ржХрж╛рж░ржг рждржЦржи рзк ржЯрж┐ ржЕржкрж╛рж░рзЗрж╢ржи ржПржХржЯрж┐ рж╕рж┐ржЩрзНржЧрзЗрж▓ рж▓ржЬрж┐ржХрж╛рж▓ ржЗржЙржирж┐ржЯ ржПрж░ ржнрж┐рждрж░ ржерж╛ржХржмрзЗред

Atomicity ржЫрж╛рзЬрж╛ ржХрзЛржи query рж╕рж╛ржХрж╕рзЗрж╕ ржХрж┐ржВржмрж╛ fail рж╣рзЯрзЗржЫрзЗ рждрж╛ ржмрзЗрж░ ржХрж░рж╛ ржЕрж╕ржорзНржнржмред

### Consistency

ACID ржПрж░ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ Consistency ржЕржирзНржпрждржо ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯржкрж┐ржХред ржпрж╛рж░ ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржкрзВрж░рзНржмрзЗ ржПржмржВ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ ржпрзЛржЧржлрж▓ рж╕ржмрж╕ржорзЯ ржПржХржЗ ржерж╛ржХржмрзЗред

ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрж╛рзЯ, ржЖржкржирж┐ ATM ржерзЗржХрзЗ ржХрж┐ржЫрзБ ржЯрж╛ржХрж╛ ржмрзЗрж░ ржХрж░рждрзЗ ржЧрж┐рзЯрзЗржЫрзЗржиред ржЖржкржирж╛рж░ Account ржП рж╕рж░рзНржмржорзЛржЯ рззрзж,рзжрзжрзж ржЯрж╛ржХрж╛ ржЖржЫрзЗ, ржЖржкржирж┐ ATM ржорзЗрж╢рж┐ржи ржП рзл,рзжрзжрзж ржЯрж╛ржХрж╛ ржмрзЗрж░ ржХрж░рж╛рж░ ржЬржирзНржп ржЖржкржирж╛рж░ PIN number ржжрж┐рзЯрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рж▓рзЗржиред

ржЖржкржирж┐ рзл,рзжрзжрзж ржЯрж╛ржХрж╛ ржкрзЗрзЯрзЗ ржЧрзЗрж▓рзЗржиред рждрж╛рж╣рж▓рзЗ ржПржЦржи ржЖржкржирж╛рж░ account ржП (рззрзж,рзжрзжрзж - рзл,рзжрзжрзж) ржорж╛ржирзЗ рзл,рзжрзжрзж ржЯрж╛ржХрж╛ ржЖржЫрзЗ ржПржмржВ ATM ржерзЗржХрзЗ ржЖржкржирж╛рж░ рж╣рж╛рждрзЗ ржкрзЗрж▓рзЗржи рзл,рзжрзжрзжред (ржмрж░рзНрждржорж╛ржирзЗ ржПржХрж╛ржЙржирзНржЯ ржП) рзл,рзжрзжрзж + (ржирж┐ржЬрзЗрж░ рж╣рж╛рждрзЗ) рзл,рзжрзжрзж = рззрзж,рзжрзжрзж, ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржкрзВрж░рзНржмрзЗ account ржП ржЫрж┐рж▓ рззрзж,рзжрзжрзж ржПржмржВ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ рззрзж,рзжрзжрзжред рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ ржмрж▓рждрзЗ ржкрж╛рж░рж┐ Consistency ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рж╛ ржЖржЫрзЗред

ржПржЦржи ржпржжрж┐ ATM ржХрзЛржирзЛ ржПржХржЯрж╛ рж╕ржорж╕рзНржпрж╛рж░ ржХрж╛рж░ржгрзЗ ржЖржкржирж╛ржХрзЗ рзл,рзжрзжрзж ржЯрж╛ржХрж╛ ржирж╛ ржжрж┐рзЯрзЗ ржЖржкржирж╛рж░ ржорзЛржмрж╛ржЗрж▓рзЗ SMS ржЖрж╕рзЗ ржЖржкржирж╛рж░ account ржП ржмрж░рзНрждржорж╛ржирзЗ рзл,рзжрзжрзж ржЖржЫрзЗ рждрж╛рж╣рж▓рзЗ рждржЦржи Consistency ржорзЗржЗржиржЯрзЗржЗржи ржерж╛ржХрж╛ рж╣рж▓рзЛ ржирж╛ред

### Isolation

Isolation ржмрж╛ржХрж┐ржЧрзБрж▓рзЛрж░ ржоржд ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯред ржпрж╛ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржПржХрж╛ржзрж┐ржХ concurrent ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи рж╕рзНржмрж╛ржзрзАржирж░рзВржкрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ, ржпрж╛рждрзЗ Data Integrity ржмржЬрж╛рзЯ ржерж╛ржХрзЗред

ржПржХрж╛ржзрж┐ржХ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи ржерж╛ржХрж╛рж░ ржлрж▓рзЗ Race Condition рж╕ржорж╕рзНржпрж╛ рждрзИрж░рзА рж╣рзЯред Isolation ржПрж░ ржХрж╛ржЬ рждрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛, ржпрж╛рждрзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрзЛржирзЛ рж╣рж╕рзНрждржХрзНрж╖рзЗржк ржирж╛ ржХрж░рзЗ рж╕рзНржмрж╛ржзрзАржиржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗред

Race Condition ржПрж░ ржПржХржЯрж┐ ржмрж╛рж╕рзНрждржмржзрж░рзНржорзА ржЙржжрж╛рж╣рж░ржг рж╣рж▓, ржПржХржЯрж┐ рж╣рзЛржЯрзЗрж▓ ржмрзБржХрж┐ржВ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗ ржПржХржЬржи user(1) рж░рзБржо ржмрзБржХ ржХрж░ржЫрзЗред ржкрзЗржорзЗржирзНржЯ ржкрзНрж░рж╕рзЗрж╕ рж╕ржорзНржкржирзНржи ржХрж░рж╛рж░ ржкрзВрж░рзНржмрзЗ ржЕржирзНржп ржЖрж░рзЗржХржЬржи user(2) ржПрж╕рзЗ ржПржХржЗ рж░рзБржо ржмрзБржХ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЦржи user(2) рж╕ржм payment ржкрзНрж░рж╕рзЗрж╕ рж╢рзЗрж╖ ржХрж░рзЗ Database Commit(ржорж╛ржирзЗ рж╕рзНржерж╛ржпрж╝рзАржнрж╛ржмрзЗ ржбрж┐рж╕рзНржХрзЗ ржЗржирзНрж╕рж╛рж░рзНржЯ рж╣ржмрзЗ) ржХрж░рзЗ ржлрзЗрж▓рж▓рзЛ, рждрж╛рж░ржкрж░ user(1) ржпржЦржи payment ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЗ ржпрж╛ржмрзЗ рждржЦржи Operation Failed ржХрж┐ржВржмрж╛ ржХрзЛржирзЛ error ржорзЗрж╕рзЗржЬ (ржпрзЗржоржи, рж░рзБржо ржмрзБржХ ржХрж░рж╛ рж╣рзЯрзЗ ржЧрзЗржЫрзЗ ржЕржирзНржп ржХрж╛рж░рзЛ ржжрзНржмрж╛рж░рж╛) ржжрзЗржЦрж╛ржмрзЗред

<p align="center">
  <img src="sections/database-transaction/images/consistency-1.png" alt="database">
</p>

ржПржЯрж┐ рж╣ржЪрзНржЫрзЗ Race Conditionред ржПржЗ ржкрзНрж░ржХрж╛рж░рзЗрж░ рж╕ржорж╕рзНржпрж╛ ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ ржХрж┐ржнрж╛ржмрзЗ Database Locking ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рж┐ рждрж╛ рж╕рж╛ржоржирзЗ ржЖржорж░рж╛ ржжрзЗржЦржмрзЛред Isolation ржорзВрж▓ржд ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ, ржпрзЗ ржПржХрж╛ржзрж┐ржХ Transaction ржПрж░ ржлрж▓рзЗ рж╕рзГрж╖рзНржЯрж┐ рж╣ржУрзЯрж╛ рж╕ржорж╕рзНржпрж╛ ржХрж┐ржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржмрзЗред ржЕржирзНржпржжрж┐ржХрзЗ Locking mechanism ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ рж╕рзЗржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржПрж╕ржм рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржкрзВрж░рзНржмрзЗ ржЖржорж╛ржжрзЗрж░ Isolation Level ржмрзБржЭрждрзЗ рж╣ржмрзЗред рзл ржкрзНрж░ржХрж╛рж░рзЗрж░ Isolation Level ржЖржЫрзЗ ржпрж╛ ржмрзБржЭрж╛ ржЕрждрзНржпржирзНржд ржкрзНрж░рзЯрзЛржЬржирзАрзЯред

- Read Uncommitted
- Read Commited
- Repeatable Read
- Snapshot
- Serializable

ржПржЗ рзл ржкрзНрж░ржХрж╛рж░рзЗрж░ Isolation Level ржПрж░ ржХрж╛рж░ржгрзЗ рзй ржкрзНрж░ржХрж╛рж░рзЗрж░ Anomalie рждрзИрж░рзА рж╣рзЯред

- Dirty Read
- Non-Repeatable Read
- Phantom Read

Isolation Level ржмрзБржЭрж╛рж░ ржкрзВрж░рзНржмрзЗ рзй ржкрзНрж░ржХрж╛рж░рзЗрж░ Anomalie ржмрзБржЭрждрзЗ рж╣ржмрзЗред

#### Dirty Read

ржпржЦржи ржХрзЛржирзЛ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи UnCommitted ржнрзНржпрж╛рж▓рзБ read ржХрж░рзЗ рждржЦржи рждрж╛ржЗ рж╣ржЪрзНржЫрзЗ Dirty Readред

ржЙржжрж╛рж╣рж░ржг, Transection A ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Row ржПрж░ Column ржЖржкржбрзЗржЯ ржХрж░рзЗ ржжрж┐рж▓ ржХрж┐ржирзНрждрзБ ржПржЦржи ржкрж░рзНржпржирзНржд Commit ржХрж░рж╛ рж╣рж▓рзЛ ржирж╛ред ржПржЦржи Transection B ржПржХржЗ Column read ржХрж░рж▓рзЛред рждрж╛рж░ржкрж░ Transection A ржпрзЗ Column ржЯрж┐ ржЖржкржбрзЗржЯ ржХрж░рзЗржЫрж┐рж▓ рждрж╛ Rolled Back ржХрж░рзЗ ржжрж┐рж▓рзЛред

рждрж╛рж░ржорж╛ржирзЗ ржжрж╛ржБрзЬрж╛рж▓рзЛ Transection B Dirty Read ржХрж░рзЗржЫрзЗред ржирж┐ржЪрзЗрж░ ржЫржмрж┐ ржжрзЗржЦрж▓рзЗ ржЖржорж░рж╛ ржЙржжрж╛рж╣рж░ржг ржмрзБржЭрждрзЗ ржкрж╛рж░ржмрзЛред

<p align="center">
  <img src="sections/database-transaction/images/dirty-read.webp" alt="Dirty Read">
</p>

Transaction A ржПрж░ ржжрзНржмрж╛рж░рж╛ Rollback рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржгрзЗ, рзжрзз:рззрзл ржШржЯрж┐ржХрж╛рж░ рж╕ржорзЯ Transaction B ржПрж░ ржжрзНржмрж╛рж░рж╛ Read query-ржЯрж┐ Dirty Read рж╣рзЯрзЗ ржЧрж┐рзЯрзЗржЫрзЗред

#### Non-Repeatable Read

ржпржЦржи ржПржХржЯрж┐ Transaction ржПржХржЗ ржбрж╛ржЯрж╛ read ржжрзБржмрж╛рж░ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржжрзБржмрж╛рж░ read ржХрж░рж╛рж░ ржоржзрзНржпржмрж░рзНрждрзА рж╕ржорзЯрзЗ ржбрж╛ржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗ ржпрж╛рзЯ, ржЕржирзНржп ржХрзЛржирзЛ Transaction ржПрж░ ржХрж╛рж░ржгрзЗ, рждржЦржи рж╕рзЗржЯрж╛ржЗ рж╣ржЪрзНржЫрзЗ Non-Repeatable Readред

ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрж╛рзЯ, Transaction A, accounts ржЯрзЗржмрж┐рж▓ read ржХрж░рж▓рзЛред ржПржХржЗ рж╕ржорзЯрзЗ Transaction B accounts ржЯрзЗржмрж┐рж▓ read ржХрж░рж▓рзЛред рждржЦржи ржжрзБржЗ Transaction ржПржХржЗ ржбрж╛ржЯрж╛ ржжрзЗржЦржмрзЗред ржПржЦржи рззрзж ржорж┐ржирж┐ржЯ ржкрж░ Transaction B ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ row ржПрж░ balance-column ржПрж░ ржнрзНржпрж╛рж▓рзБ рзирзп ржжрзНржмрж╛рж░рж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ ржжрж┐рж▓рзЛред ржЖрж░ рзл ржорж┐ржирж┐ржЯ ржкрж░ Transaction B рждрж╛ commit ржХрж░рзЗ ржжрж┐рж▓рзЛред

ржПржЦржи Transaction B ржжрзНржмрж╛рж░рж╛ commit рж╣ржУрзЯрж╛рж░ рзй ржорж┐ржирж┐ржЯ ржкрж░, Transaction A ржЖржмрж╛рж░ accounts ржЯрзЗржмрж┐рж▓ read ржХрж░рж▓рзЛред ржПржЦржи Transaction A ржкрж░рж┐ржмрж░рзНрждрж┐ржд ржбрж╛ржЯрж╛ ржжрзЗржЦржмрзЗ, ржпрж╛ рждрж╛рж░ ржкрзВрж░рзНржмрзЗрж░ read query рж╕рж╛ржерзЗ рж╕рж╛ржжрзГрж╢рзНржп ржерж╛ржХржмрзЗ ржирж╛ред

ржПржЗ рж╕рж╛ржжрзГрж╢рзНржп ржирж╛ ржерж╛ржХрж╛рж░ ржмрж┐рж╖рзЯржЯрж┐ рж╣ржЪрзНржЫрзЗ Non-Repeatable Readред

<p align="center">
  <img src="sections/database-transaction/images/non-repeatable-read.webp" alt="Non-Repeatable Read">
</p>

#### Phantom Read

ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрж╛ржирзЛ ржпрж╛ржХ, ржПржХржЯрж┐ Transaction ржПржХржЯрж┐ ржЯрзЗржмрж┐рж▓ ржПрж░ ржоржзрзНржпрзЗ read query ржЪрж╛рж▓рж╛ржирзЛрж░ ржлрж▓рзЗ ржХрж┐ржЫрзБ ржбрж╛ржЯрж╛ ржкрж╛ржУрзЯрж╛ ржЧрзЗрж▓рзЛред ржПржЦржи ржХрж┐ржЫрзБ рж╕ржорзЯ ржкрж░ ржЕржирзНржп ржЖрж░рзЗржХржЯрж┐ Transaction ржПрж╕рзЗ ржЯрзЗржмрж┐рж▓ ржПрж░ ржПржХржЯрж┐ row ржЗржирзНрж╕рж╛рж░рзНржЯ ржХрж░рзЗ ржжрж┐рзЯрзЗ ржжрж┐рж▓рзЛред рждрж╛рж░ ржХрж┐ржЫрзБ рж╕ржорзЯ ржкрж░ рждрж╛ commit ржХрж░рж╛ рж╣рж▓рзЛред ржПржЦржи ржкрзВрж░рзНржмрзЗрж░ transaction ржЖржмрж╛рж░ read query ржХрж░рж▓рзЗ ржПржЦржи ржнрж┐ржирзНржи ржбрж╛ржЯрж╛ ржжрзЗржЦржмрзЗред ржПржЗ ржмрзИрж╕рж╛ржжрзГрж╢рзНржп ржПрж░ ржмрзНржпрж╛ржкрж╛рж░ржЯрж╛ржЗ рж╣ржЪрзНржЫрзЗ Phantom Readред

<p align="center">
  <img src="sections/database-transaction/images/phantom-read.webp" alt="Phantom Read">
</p>

ржпрзЗржХрзЛржирзЛ Data Modification Operations ржорж╛ржирзЗ Insert, Update ржХрж┐ржВржмрж╛ Delete ржПрж░ ржХрж╛рж░ржгрзЗ Phantom Read anomalie рж╣рждрзЗ ржкрж╛рж░рзЗред

ржПржЦржи ржЖржорж░рж╛ Isolation Level ржмрзБржЭржмрзЛ рж╕рж╛ржерзЗ рждрж╛ржУ ржмрзБржЭржмрзЛ ржХрзЛржи Isolation Level ржХрзЛржи Anomalie рждрзИрж░рзА ржХрж░рзЗред

#### Read Uncommitted

ржПржХрзЗ Lowest Isolation Level рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ рж╣рзЯред ржПржХрзЗ Lowest ржмрж▓рж╛рж░ ржХрж╛рж░ржг рж╣ржЪрзНржЫрзЗ, Transaction ржбрж╛ржЯрж╛ read ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржпрж╛ ржЕржирзНржп Transaction ржПрж░ ржжрзНржмрж╛рж░рж╛ manipulate рж╣рзЯрзЗржЫрзЗ, ржПржоржиржХрж┐ рж╕рзЗржЗ Transaction committed ржирж╛ рж╣рж▓рзЗржУред

рждрж╛ржЗ ржПржЗ рж▓рзЗржнрзЗрж▓рзЗ Dirty Read anomalie ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржХрж╛рж░ржг ржХрзЛржирзЛ transaction ржПржоржи ржХрзЛржирзЛ ржбрж╛ржЯрж╛ read ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржпрж╛ ржЕржирзНржп transaction рж╕рзЗржЗ manipulate рж╣ржУрзЯрж╛ ржПржмржВ ржпрзЗ Transaction manipulate ржХрж░рзЗржЫрзЗ рж╕рзЗржЗ Transaction ржирж┐ржЬ ржерзЗржХрзЗ Rolled Back ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ рж▓рзЗржнрзЗрж▓рзЗ ржорзВрж▓ржд Consistency ржХрзЗ ржЧрзБрж░рзБрждрзНржм ржжрзЗрзЯрж╛ рж╣рзЯ ржирж┐ред

#### Read Committed

ржПрждрзЗ ржХрзЛржирзЛ Transaction ржоржирзЗ ржХрж░рзБржи, Transaction-A ржпржЦржи read ржХрж░ржмрзЗ рждржЦржи рж╕ржмрж╕ржорзЯ рж╕рзЗ Committed ржнрзНржпрж╛рж▓рзБ ржжрзЗржЦржмрзЗред ржпрж╛рж░ ржлрж▓рзЗ Dirty Read рж╣ржУрзЯрж╛рж░ рж╕рзБржпрзЛржЧ ржерж╛ржХрзЗ ржирж╛ред ржЕржирзНржп Transaction-B ржжрзНржмрж╛рж░рж╛ рждрзИрж░рзА ржХрзЛржирзЛ Data Modification Operations ржпрждржХрзНрж╖ржг ржирж╛ ржкрж░рзНржпржирзНржд commit рж╣ржЪрзНржЫрзЗ рждрждржХрзНрж╖ржи рж╕рзЗржЗ Transaction-A ржХрзЛржирзЛ Read ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

Database Table read block ржХрж░рж╛ ржерж╛ржХржмрзЗ Transaction-A ржПрж░ ржЬржирзНржпред

ржЖржорж░рж╛ ржмрж▓рждрзЗ ржкрж╛рж░рж┐, Read Committed ржП Non-Repeatable Read anomalie рж╣рждрзЗ ржкрж╛рж░рзЗред

PostgreSQL ржПрж░ default Isolation Level рж╣ржЪрзНржЫрзЗ Read Committedред

#### Repeatable Read

ржпржЦржи ржХрзЛржирзЛ Transaction-A ржпрждржмрж╛рж░ read query ржЪрж╛рж▓рж╛ржмрзЗ рждрждржмрж╛рж░ Transaction-A ржПржХржЗ ржбрж╛ржЯрж╛ ржжрзЗржЦржмрзЗ, ржПржоржиржХрж┐ ржЕржирзНржп ржХрзЛржирзЛ Transaction-B ржжрзНржмрж╛рж░рж╛ ржбрж╛ржЯрж╛ ржорзЛржбрж┐ржлрж╛ржЗ ржХрж░рзЗ ржерж╛ржХрж▓рзЗржУред ржХрж┐ржирзНрждрзБ ржЕржирзНржп Transaction-B ржжрзНржмрж╛рж░рж╛ ржХрзЛржирзЛ row insert рж╣рж▓рзЗ ржХрж┐ржВржмрж╛ delete рж╣рж▓рзЗ рждрж╛ ржпржЦржи ржПржХржмрж╛рж░ ржХржорж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗ рждржЦржи Transaction-A рждрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗред

Repeatable Read ржорзВрж▓ржд Row-level consistency ржмржЬрж╛рзЯ рж░рж╛ржЦрзЗред рж╕рзЗржЬржирзНржп ржирждрзБржи row insert ржХрж┐ржВржмрж╛ row delete рж╣рж▓рзЗ рждрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯред

рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ ржмрж▓рждрзЗ ржкрж╛рж░рж┐, Repeatable Read ржП Dirty Read ржПржмржВ Non-Repeatable Read рж╣ржмрзЗ ржирж╛ рждржмрзЗ Phantom Read anomalie рж╣рждрзЗ ржкрж╛рж░рзЗред

MySQL database ржПрж░ default Isolation Level рж╣ржЪрзНржЫрзЗ Repeatable Readред

(ржпржжрж┐ржУ MySQL ржПрж░ InnoDB "next-key locking" algorithm ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрж╛рждрзЗ Phantom Read anomalie ржирж╛ рж╣рзЯред)

#### Snapshot

ржПржЗ Isolation Level-ржП, ржкрзНрж░рждрж┐ржЯрж┐ Transaction ржПржХржЯрж┐ Database Snapshot ржПрж░ рж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рж╛ рж╣рзЯ, ржпрж╛ Transaction рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржирж┐рзЯрзЗ ржерж╛ржХрзЗред Snapshot ржорзВрж▓ржд Database ржПрж░ ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржХржкрж┐ред ржкрзНрж░рждрж┐ржЯрж┐ Transaction ржирж┐ржЬ ржирж┐ржЬ ржЕржкрж╛рж░рзЗрж╢ржи рж╕рзНржмрж╛ржзрзАржиржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗред

ржпрждржХрзНрж╖ржг ржирж╛ ржкрж░рзНржпржирзНржд changes ржХржорж┐ржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржЕржирзНржп transaction ржжрзНржмрж╛рж░рж╛ changes ржХржЦржирзЛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ Dirty Read, Non-repeatable Read ржПржмржВ Phantom Read anomalie ржерзЗржХрзЗ ржмрж┐рж░ржд ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЛред

#### Serializable

ржПржХрзЗ Highest Level ржПрж░ Isolation рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп ржХрж░рж╛ рж╣рзЯред ржПрждрзЗ ржкрзНрж░рждрж┐ржЯрж╛ Transaction ржЧрзБрж▓рзЛрж░ ржлрж▓рж╛ржлрж▓ рж╕рж┐рж░рж┐рзЯрж╛рж▓ (ржПржХржЯрж┐ ржПржХржЯрж┐ ржХрж░рзЗ) ржПржХрзНрж╕рзЗржХрж┐ржЙрж╢ржи ржПрж░ ржорждрзЛ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗ ржерж╛ржХрзЗред

ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ Dirty Read, Non-repeatable Read ржПржмржВ Phantom Read anomalie ржерзЗржХрзЗ ржмрж┐рж░ржд ржерж╛ржХрждрзЗ ржкрж╛рж░ржмрзЛред

ржХрзЗржи ржЖржорж░рж╛ ржХрзЛржирзЛ Anomalie ржкрж╛ржмрзЛ ржирж╛?

- Dirty Read: ржХрзЛржирзЛ Transaction ржЖрж░рзЗржХржЯрж┐рж░ Transaction ржжрзНржмрж╛рж░рж╛ рждрзИрж░рзА рж╣ржУрзЯрж╛ uncommitted data ржкржбрж╝рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред
- Non-repeatable Read: ржПржХржЗ query multiple times ржЪрж╛рж▓рж╛рж▓рзЗ ржПржХрж┐ ржбрзЗржЯрж╛ рж░рж┐ржЯрж╛рж░рзНржи рж╣ржпрж╝ред
- Phantom Read: ржирждрзБржи ржмрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ Transaction ржоржзрзНржпрзЗ ржнрж┐ржирзНржи ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрж╛ржпрж╝ ржирж╛ред

ржпрзЗрж╣рзЗрждрзБ Transaction ржЧрзБрж▓рзЛрж░ ржлрж▓рж╛ржлрж▓ serially ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗ рж╕рзЗрж╣рзЗрждрзБ ржПржЗ Isolation Level ржП Conflict рж╣рждрзЗ ржкрж╛рж░рзЗред ржжрзБржЯрж┐ ржХрж┐ржВржмрж╛ рждрж╛рж░ ржерзЗржХрзЗ ржмрзЗрж╢рж┐ Concurrent Transaction ржПржХржЗ ржбрзЗржЯрж╛рж░ ржЙржкрж░ ржХрж╛ржЬ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗ рждрж╛рж╣рж▓рзЗ conflict рж╣ржУрзЯрж╛рж░ рж╕рзБржпрзЛржЧ ржЦрзБржм ржмрзЗрж╢рж┐ред рждржЦржи,

- ржПржХржЯрж┐ Transaction ржХрзЗ rollback ржХрж░рж╛ рж╣ржпрж╝ред
- ржЕржержмрж╛ ржПржХржЯрж┐ Transaction ржХрзЗ wait ржХрж░рждрзЗ ржмрж╛ржзрзНржп ржХрж░рж╛ рж╣ржпрж╝ред

<p align="center">
  <img src="sections/database-transaction/images/serializable.png" alt="Serializable">
</p>

- Transaction 2 ржПрж░ SELECT рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ 2000 ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗ ржХрж╛рж░ржг Transaction 1 ржПржЦржиржУ COMMIT ржХрж░рзЗржирж┐ред
- Transaction 2 ржПрж░ UPDATE Conflicts ржХрж░ржмрзЗ ржХрж╛рж░ржг Transaction 1 COMMIT ржХрж░рж╛рж░ ржкрж░рзЗ balance ржПрж░ ржорж╛ржи 1950 рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред
- (one-after-another) ржЕрж░рзНржбрж╛рж░ ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рж▓рзЗ, Transaction 2 ROLLBACK рж╣ржмрзЗред
- Balance рж╣ржмрзЗ 1950ред

ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржи рж░рзЯрзЗ ржпрж╛рзЯ,

Transaction 2 update ржЕржкрж╛рж░рзЗрж╢ржи ржЪрж╛рж▓рж╛ржирзЛрж░ рж╕ржорзЯ ржХрзЗржирзЛ Transaction 1 ржПрж░ ржжрзНржмрж╛рж░рж╛ ржХржорж┐ржЯ ржХрж░рж╛ ржнрзНржпрж╛рж▓рзБ ржжрзЗржЦрждрзЗ ржкрж╛рзЯ ржирж╛?

ржкрзНрж░рждрж┐ржЯрж╛ Transaction рждрж╛ржжрзЗрж░ Transaction ржПрж░ рж╢рзБрж░рзБрждрзЗ ржЯрзЗржмрж┐рж▓рзЗрж░ ржПржХржЯрж┐ consistent snapshot capture ржХрж░рзЗ ржПржмржВ read queries ржПржЗ snapshot ржерзЗржХрзЗ ржХрж╛ржЬ ржХрж░рзЗред ржПржЬржирзНржп read queries ржЕржирзНржп Transaction ржжрзНржмрж╛рж░рж╛ commit ржХрж░рж╛ ржнрзНржпрж╛рж▓рзБ ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ ржирж╛ред рждржмрзЗ write queries ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ serializability ржмржЬрж╛ржпрж╝ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп conflict detection ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗред

ржпржжрж┐ Transaction 2 ржХржиржлрзНрж▓рж┐ржХрзНржЯрзЗрж░ ржХрж╛рж░ржгрзЗ Rollback ржХрж░рж╛ рж╣ржпрж╝, рждржмрзЗ Transaction 2 ржПрж░ рж╕ржм ржоржзрзНржпржмрж░рзНрждрзА ржкрж░рж┐ржмрж░рзНрждржи ржмрж╛рждрж┐рж▓ рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗред ржпржЦржи Transaction 2 restart рж╣ржмрзЗ рждржЦржи рж╕рзЗ ржирждрзБржи consistent snapshot ржжрзЗржЦржмрзЗ ржпрж╛ Transaction 1 ржПрж░ ржжрзНржмрж╛рж░рж╛ ржкрж░рж┐ржмрж░рзНрждрж┐рждред

ржПржЦржи ржПржХрж╛ржзрж┐ржХ Transaction ржПрж░ ржЬржирзНржп ржЖржорж░рж╛ practically ржХрж┐ржнрж╛ржмрзЗ consistency ржмржЬрж╛рзЯ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЛ?

ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ рзи ржЯрж┐ option ржЖржЫрзЗ,

- Pessimistic Locking
- Optimistic Locking

## Pessimistic Locking

Pessimistic Locking ржП ржпржЦржи ржХрзЛржирзЛ ржбрж╛ржЯрж╛ access ржХрж┐ржВржмрж╛ update ржХрж░рж╛ рж╣рзЯ рждржЦржи рж╕рзЗржЗ row ржХрж┐ржВржмрж╛ рж╕рзЗржЗ ржбрж╛ржЯрж╛ржХрзЗ lock ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯ, ржпрж╛рждрзЗ ржЕржирзНржп Transaction рждрж╛ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржорзЛржбрж┐ржлрж╛ржЗ ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рзЗред

### Pessimistic Locking ржПржмржВ Serializable Isolation level

ржпржжрж┐ржУ Serializable isolation level ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ Serializability, рждржмрзБржУ ржЖржорж╛ржжрзЗрж░ Locking Mechanism ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж▓рж╛ржЧрзЗред

ржпрзЗржоржи: ржПржХржЯрж┐ Transaction ржирж┐рж░рзНржжрж┐рж╖рзНржЯ row ржПрж░ ржЙржкрж░ ржХрж╛ржЬ ржЪрж▓рж╛ржХрж╛рж▓рзАржи, ржЕржирзНржп Transaction рж╕рзЗржЗ row read ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рзЗ рж╕рзЗржЬржирзНржп Pessimistic Locking ржХрж╛ржЬрзЗ ржЖрж╕ржмрзЗред

MySQL ржП ржЖржорж░рж╛ ржпрзЗржнрж╛ржмрзЗ Isolation Level Serializable ржмрж╛ржЫрж╛ржЗ ржХрж░рзЗ Pessimistic Locking ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

```sql
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
START TRANSACTION;

SELECT balance FROM accounts WHERE id=1 FOR UPDATE;

UPDATE accounts SET balance=balance-50 WHERE id=1;

COMMIT;
```

(ржЪрж▓ржорж╛ржи...)


## Section 4: Client Server Architecture

ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржХрж┐ржЫрзБ рж╕рзНржкрзЗрж╕рж┐ржХрж┐ржл рж░рж┐рж╕рзЛрж░рзНрж╕ ржПрж░ ржЬржирзНржп, рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛ржУрзЯрж╛рж░ ржкрж░ рж╕рзЗ рждрж╛рж░ ржпрж╛ржмрждрзАрзЯ ржкрзНрж░рж╕рзЗрж╕ рж╢рзЗрж╖ ржХрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ рж░рзЗрж╕ржкржирзНрж╕ ржжрж┐рзЯрзЗ ржжрж┐ржмрзЗ, ржПржЯрж┐ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ред

<p align="center">
  <img src="./images/csa.png" alt="Client Server Architecture">
</p>

ржЖржорж╛ржжрзЗрж░ рж╕ржм ржЙржжрж╛рж╣рж░ржг ржерж╛ржХржмрзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗред

## Section 5: Reliability

рж╕рж┐рж╕рзНржЯрзЗржо ржпржжрж┐ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ Fault/Error ржерж╛ржХрж╛рж░ ржкрж░ржУ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржХрж┐ржВржмрж╛ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржпржжрж┐ ржмржирзНржз ржирж╛ рж╣рзЯ, рждржмрзЗ рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ Reliableред ржЖржорж╛ржжрзЗрж░ ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Fault ржПрж░ ржХрж╛рж░ржгрзЗ рж╕рж┐рж╕рзНржЯрзЗржо Failure рж╣рждрзЗ ржкрж╛рж░рзЗред

Fault ржПрж░ржХржо рж╣рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржирзЛ user рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржХрзЗ ржПржоржиржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрзЗ ржпрж╛рждрзЗ ржХрзЛржирзЛ Failure рж╣рзЯрзЗ ржЧрзЗрж▓, рж╕рзЗржЯрж╛ ржЗржЪрзНржЫрж╛ржХрзГржд ржмрж╛ ржЕржирж┐ржЪрзНржЫрж╛ржХрзГрждржнрж╛ржмрзЗржУ рж╣рждрзЗ ржкрж╛рж░рзЗ, рждржЦржи ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржмржирзНржз ржирж╛ рж╣рзЯрзЗ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ Warning message ржжрзЗржЦрж╛рж▓рзЛ рждржЦржи рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ржХрзЗ ржЖржорж░рж╛ Reliable ржмрж▓рждрзЗ ржкрж╛рж░рж┐ред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: рж░рж┐рж▓рж╛ржЗржмрж┐рж▓рж┐ржЯрж┐**
## Reliability

рж╕рж┐рж╕рзНржЯрзЗржо ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ Fault/Error ржерж╛ржХрж╛рж░ ржкрж░ржУ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ рж╕рзЗржЯрж╛ржЗ Reliabilityред рждржЦржи рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ Fault Tolerant ржмрж╛ Resilent ржмрж▓рзЗред

рж╕рж╛ржзрж╛рж░ржгржд рзй ржкрзНрж░ржХрж╛рж░рзЗрж░ Fault рж░рзЯрзЗржЫрзЗ ржпрж╛ ржерж╛ржХрж▓рзЗ ржЖржорж░рж╛ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ржХрзЗ UnReliable ржХрж░рзЗ ржлрзЗрж▓рзЗ,

### Hardware Fault

рж╕рж┐рж╕рзНржЯрзЗржо UnReliable ржХрж░рждрзЗ Hardware Fault ржПрж░ ржнрзВржорж┐ржХрж╛ рж░рзЯрзЗржЫрзЗред ржпрзЗржоржиржГ Electricity Power Cut рж╣ржУрзЯрж╛рж░ ржлрж▓рзЗ рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ рждржЦржи рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ UnReliable рж╣рзЯрзЗ ржкрзЬрзЗред

### Software Fault

Software ржПрж░ ржХрзЛржирзЛ ржмрж╛ржЧ (bug) ржпржжрж┐ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо Crash ржХрж░рзЗ ржлрзЗрж▓рзЗ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ Software Faultред ржЖржорж░рж╛ рж╕рзЗржЗ Fault ржЧрзБрж▓рзЛржХрзЗ Testing (Unit, Integration) ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

### Human Fault

ржорж╛ржирзБрж╖(Developer) ржпржЦржи рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐рждрзЗ ржХрзЛржирзЛ ржнрзБрж▓ Configuration ржХрж░рзЗ ржерж╛ржХрзЗ ржЖрж░ рж╕рзЗржЬржирзНржп ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ Crash ржХрж░рзЗ ржлрзЗрж▓рзЗ, рждржЦржи рж╕рзЗржЯрж╛ ржЖрж░ Reliable рж╣рж▓ ржирж╛ред ржПрж░ржХржорзЗрж░ Fault ржЧрзБрж▓рзЛржХрзЗ ржЖржорж░рж╛ Testing (Unit, Integration) ржжрзНржмрж╛рж░рж╛ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржЕржирзНржп ржкржжрзНржзрждрж┐ рж╣рж▓ ржЖржорж░рж╛ Sandbox Environment рждрзИрж░рж┐ ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рж┐ ржпрзЗржЦрж╛ржирзЗ ржорж╛ржирзБрж╖ Explore ржХрж┐ржВржмрж╛ Experiment ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржЖржорж╛ржжрзЗрж░ Features ржЧрзБрж▓рзЛржХрзЗ, ржХрзЛржирзЛ ржкрзНрж░рж╛ржХрж╛рж░рзЗрж░ Real User ржХрзЗ effect ржХрж░рж╛ ржЫрж╛рзЬрж╛ред

## Availability

Availability ржорж╛ржирзЗ рж╣рж▓рзЛ, ржХржорзНржкрзЛржирзЗржирзНржЯржЧрзБрж▓рзЛ (Database server, Cache server ржЗрждрзНржпрж╛ржжрж┐) рж╕ржарж┐ржХржнрж╛ржмрзЗ ржирж┐ржЬ ржирж┐ржЬ ржЕржкрж╛рж░рзЗрж╢ржи ржЪрж╛рж▓рж┐рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

## High Availability

ржПржХрж╛ржзрж┐ржХ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗ Load Balancer ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕рж╛рж░рзНржн рж╣ржЪрзНржЫрзЗ рждржЦржи ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ ржпржжрж┐ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржбрж╛ржЙржи рж╣рзЯрзЗ ржпрж╛рзЯ рждржЦржи ржЕржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕рж╛рж░рзНржн ржХрж░рж╛ рж╣рзЯ, рждрж╛ рж╣ржЪрзНржЫрзЗ High Availabilityред

<p align="center">
  <img src="sections/reliability/images/high-availability.png" alt="High Availability">
</p>

Load Balancer Health Check ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░ржмрзЗ ржХрзЛржи ржХрзЛржи Server Instance ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ ржирж╛ред Load Balancer ржпржЦржи ржжрзЗржЦржмрзЗ ржпрзЗ Server Instance ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржирж╛ рж╕рзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЖрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржлрж░ржУрзЯрж╛рж░рзНржб ржХрж░ржмрзЗ ржирж╛ред

## Fault Tolerant

ржпржЦржи ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ failure рж╣рзЯ рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржПрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ failure handle ржХрж░рж╛ржХрзЗ Fault Tolerant ржмрж▓рзЗред

<p align="center">
  <img src="sections/reliability/images/ft.png" alt="Fault Tolerant">
</p>

Server 1 ржпржжрж┐ Server 2 ржПрж░ рж╕рж╛ржерзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНржЯ ржерж╛ржХрзЗ, ржЖрж░ ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ Server 2 ржХрзНрж░рзНржпрж╛рж╢ рж╣рзЯ рждржЦржи Server 1 ржПрж░ рж╕рзЗржЗ situation handle ржХрж░рж╛ржХрзЗ Fault Tolerant ржмрж▓рзЗред

## Downtime

ржХрзЛржирзЛ рж╕рж╛рж░рзНржнрж╛рж░ ржпрждрж╕ржорзЯ ржмржирзНржз(down) ржерж╛ржХрзЗ рж╕рзЗржЗ рж╕ржорзЯржЯрзБржХрзБржХрзЗ Downtime ржмрж▓рзЗред

## Availability Measurement

ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ Availability рж╕рж╛ржзрж╛рж░ржгржд % рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ рж╣рзЯред ржХрж┐ржнрж╛ржмрзЗ ржЖржорж░рж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ Availability ржмрзЗрж░ ржХрж░ржмрзЛ?

ржлрж░рзНржорзБрж▓рж╛ рж╣ржЪрзНржЫрзЗ,

Availability┬а(%) = ( Uptime / (Downtime + Uptime) ) \* 100

ржПржЦрж╛ржирзЗ uptime рж╣ржЪрзНржЫрзЗ, рж╕рж░рзНржмржорзЛржЯ рж╕ржорзЯ рж╕рж┐рж╕рзНржЯрзЗржо ржЕржкрж╛рж░рзЗржЯ ржХрж░рзЗржЫрзЗ, ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ interaption ржЫрж╛рзЬрж╛ред

ржЖрж░ Downtime рж╣ржЪрзНржЫрзЗ, рж╕рж░рзНржмржорзЛржЯ ржХржд рж╕ржорзЯ рж╕рж┐рж╕рзНржЯрзЗржо ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ рж╕ржорж╕рзНржпрж╛рж░ ржЬржирзНржп ржмржирзНржз ржЫрж┐рж▓ред

рж╕рж┐рж╕рзНржЯрзЗржо ржпржжрж┐ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржорж╛рж╕рзЗ рзйрзпрзжрзж ржорж┐ржирж┐ржЯ ржарж┐ржХржнрж╛ржмрзЗ ржЕржкрж╛рж░рзЗржЯ ржХрж░рзЗ ржПржмржВ рззрзлрзж ржорж┐ржирж┐ржЯ ржбрж╛ржЙржиржЯрж╛ржЗржо рж╣рзЯ рждрж╛рж╣рж▓рзЗ,

(рзйрзпрзжрзж / рзкрзжрзлрзж) \* рззрзжрзж = рзпрзм.рзирзп%

## The x-9 structure of Availability

ржпржЦржи ржмрж▓рж╛ рж╣рзЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ availability 99.99% рждрж╛рж░ржорж╛ржирзЗ рж╣рж▓ ржПржХ ржмржЫрж░рзЗ(ржХрж┐ржВржмрж╛ ржПржХ ржорж╛рж╕рзЗ) рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржбрж╛ржЙржиржЯрж╛ржЗржо рж╣ржмрзЗ

ржПржХ ржмржЫрж░ рж╣рж▓рзЗ,

ржорзЛржЯ ржорж┐ржирж┐ржЯ ржкрзНрж░рждрж┐ ржмржЫрж░рзЗ = 365├Ч24├Ч60 = 525,600┬аminutes

Downtime = (1тИТ0.9999)├Ч525,600 = 0.0001├Ч525,600 = 52.56┬аminutes

ржпрзЗржоржи, AWS S3 ржПрж░ Availability ржмрж▓рж╛ рж╣рзЯ 99.99%ред

| Availability %           | Downtime per year   |
| ------------------------ | ------------------- |
| 90% (one nine)           | 36.53 days          |
| 99% (two nines)          | 3.65 days           |
| 99.9% (three nines)      | 8.77 hours          |
| 99.99% (four nines)      | 52.60 minutes       |
| 99.999% (five nines)     | 5.26 minutes        |
| 99.9999% (six nines)     | 31.56 seconds       |
| 99.99999% (seven nines)  | 3.16 seconds        |
| 99.999999% (eight nines) | 315.58 milliseconds |
| 99.9999999% (nine nines) | 31.56 milliseconds  |

## Single Point of Failure

ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржХрзЛржирзЛ ржкрж╛рж░рзНржЯ ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ ржПржмржВ рж╕рж┐рж╕рзНржЯрзЗржо ржпржжрж┐ Fault Tolerant ржирж╛ рж╣рзЯ рждрж╛рж╣рж▓рзЗ ржПрж░ ржЬржирзНржп рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛ржУрзЯрж╛ ржкрж╛рж░рзНржЯ рж╣рж▓ Single Point of Failureред

ржЙржжрж╛рж╣рж░ржг, ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рж╛рж░рзНржнрж╛рж░ ржирж╖рзНржЯ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржХрж╛ржЬ ржХрж░рж╛ ржмржирзНржз рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ,

<p align="center">
  <img src="sections/reliability/images/spof.png" alt="Single Point of Failure">
</p>

ржЖрж░рзЗржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг Region ржмржирзНржз рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рж╕рзЗржЗ Region ржПрж░ рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

<p align="center">
  <img src="sections/reliability/images/spof-2.png" alt="Single Point of Failure">
</p>

### ржХрж┐ржнрж╛ржмрзЗ Single Point of Failure ржХрзЗ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░ржмрзЛ?

ржзрж░рзБржи ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржЖржЫрзЗ ржпрзЗржЦрж╛ржирзЗ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржирзЛржб ржПржмржВ ржПржХржЯрж┐ ржбрзЗржЯрж╛ржмрзЗрж╕ рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЫрзЗред

<p align="center">
  <img src="sections/reliability/images/spof-3.png" alt="Single Point of Failure">
</p>

ржПржЦрж╛ржирзЗ **рж╕рж╛рж░рзНржнрж╛рж░ ржирзЛржб** ржЖрж░ **ржбрж╛ржЯрж╛ржмрзЗрж╕** рж╣ржЪрзНржЫрзЗ Single Point of Failureред рж╕рж╛рж░рзНржнрж╛рж░ ржирзЛржб ржХрж┐ржВржмрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржмржирзНржз рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржЙржи рж╣рзЯрзЗ ржпрж╛ржмрзЗред Single Point of Failure prevent ржХрж░рждрзЗ рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░,

- ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржкрзЛрж░рзНржЯ ржжрж┐рждрзЗ рж╣ржмрзЗред
- ржПржХрж╛ржзрж┐ржХ ржбрзЗржЯрж╛ржмрзЗрж╕ рж╕рж╛рж░рзНржнрж╛рж░ ржорж╛ржирзЗ <a href="../../README.md#section-15-database-replication" target="_blank">Database Replication</a> ржХрж░рждрзЗ рж╣ржмрзЗред

ржПржЦржи ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рж╛рж░ ржкрж░, ржЖржорж░рж╛ Load Balancer ржПрж░ ржорж╛ржзрзНржпржорзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

<p align="center">
  <img src="sections/reliability/images/spof-4.png" alt="Single Point of Failure">
</p>

ржПржЦрж╛ржирзЗ Load Balancer ржирж┐ржЬрзЗ Single Point of Failureред ржПржХрж╛ржзрж┐ржХ Load Balancer ржпрзЛржЧ ржХрж░рзЗ DNS ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж╛ржжрзЗрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Load Balancer ржЪрж▓рзЗ ржпрж╛ржмрзЗред

ржПрж░ржХржо ржЖржорж░рж╛ Single Point of Failure prevent ржХрж░рждрзЗ ржкрж╛рж░ржмред

## 500 - Internal Server Error ржХрзА рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржЙржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ?

рж╣рзНржпрж╛ржБ, ржпржжрж┐ рж╕ржорж╕рзНржпрж╛ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржорзВрж▓ ржЕржВрж╢рзЗ ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ рж╣ржпрж╝, рждржмрзЗ ржПржЯрж┐ ржкрзБрж░рзЛ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ ржбрж╛ржЙржи ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред

- ржбрж╛ржЯрж╛ржмрзЗржЬ рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи ржмрж╛ ржбрж╛ржЙржи ржерж╛ржХрж▓рзЗред
- ржпржжрж┐ ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржХрж┐ржорж╛ ржЖржкржбрзЗржЯ, рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрж┐ржжрзНржпржорж╛ржи ржбрж╛ржЯрж╛ ржорж╛ржЗржЧрзНрж░рзЗржЯ ржирж╛ ржХрж░рзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛ рж╣ржпрж╝, рждржмрзЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржХрж╛рж░ржг ржХрж┐ржЫрзБ ржХрж▓рж╛ржо, ржЯрзЗржмрж┐рж▓ ржмрж╛ рж╕ржорзНржкрж░рзНржХ ржЕржирзБржкрж╕рзНржерж┐ржд ржмрж╛ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗред
- ржпржжрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржорзЗржорзЛрж░рж┐ рж▓рж┐ржХ рж╣рзЯ ржмрж╛ ржХрзЛржирзЛ ржкрзНрж░рж╕рзЗрж╕ ржЕрждрж┐рж░рж┐ржХрзНржд рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ (100% CPU Usage), рждрж╛рж╣рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░ рж╕ржорзНржкрзВрж░рзНржгрж░рзВржкрзЗ ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗред
- ржпржжрж┐ ржЖржкржирж╛рж░ application ржП error throw ржХрж░рж╛ рж╣рзЯ ржпрж╛ properly caught ржХрж░рж╛ рж╣рзЯ ржирж┐, рждрж╛ ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрзВрж░рзНржг рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржЙржи ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░ржмрзЗред ржЙржжрж╛рж╣рж░ржг,

```js
// in express.js/node.js
app.get("/", (req, res) => {
  throw new Error("Something went wrong!");
});
```

рж╕ржорзНржкрзВржи рж╕рж┐рж╕рзНржЯрзЗржо ржбрж╛ржЙржи ржирж╛ рж╣ржУрзЯрж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржпрзЛржЧ ржХрж░ржмрзЗржи,

```js
// in express.js/node.js
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({ message: "Internal Server Error" });
});
```

ржЖржкржирж┐ ржпржжрж┐ `app.use((err, req, res, next) => {})` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржерж╛ржХрзЗржи рждрж╛рж╣рж▓рзЗ рждрж╛ ржЖржкржирж╛ржХрзЗ express.js ржПрж░ error ржЧрзБрж▓рзЛ handle ржХрж░рзЗ ржжрж┐ржмрзЗред

ржЖрж░ ржЖржкржирж┐ ржпржжрж┐,

```js
process.on("uncaughtException", (err) => {
  console.error("тЭМ Uncaught Exception:", err);
  process.exit(1);
});

// Handle Unhandled Promise Rejections
process.on("unhandledRejection", (reason, promise) => {
  console.error("тЪая╕П Unhandled Rejection:", promise, "Reason:", reason);
  process.exit(1);
});
```

ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи рждрж╛рж╣рж▓рзЗ рждрж╛ Synchronous error ржЧрзБрж▓рзЛ catch/handle ржХрж░рзЗ ржжрж┐ржмрзЗ, ржпржжрж┐ ржЖржкржирж┐ try-catch ржПрж░ ржнрж┐рждрж░ handle ржирж╛ ржХрж░рзЗ ржерж╛ржХрзЗржиред

ржЙржкрж░рзЗрж░ рзк ржЯрж┐ ржкрзЯрзЗржирзНржЯ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржПрж░ Reliability ржирж┐рзЯрзЗ ржкрзНрж░рж╢рзНржиржмрж┐ржжрзНржз ржХрж░ржмрзЗред ржПржЬржирзНржп Logging ржХрж░рзЗ ржжрзЗржЦрждрзЗ рж╣ржмрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ ржирж╛ред


## Section 6: Performance Metrics

### Throughput

ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржо ржпрждржЯрзБржХрзБ ржХрж╛ржЬ рж╕ржорзНржкрж╛ржжржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ рж╕рзЗржЯрж┐ рж╣ржЪрзНржЫрзЗ Throughputред ржпрзЗржоржи, ржкрзНрж░рждрж┐ рззрзж рж╕рзЗржХрзЗржирзНржб ржП рж╕рж┐рж╕рзНржЯрзЗржо ржпржжрж┐ рзлрзж ржЯрж┐ API request рж╕ржорзНржкржирзНржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ рждрж╛рж╣рж▓рзЗ рждрж╛рж░ Throughput рж╣ржмрзЗ рзлрзж/рззрзж = рзлред

### Time to First Byte

ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ Resource ржЬржирзНржп ржпржЦржи рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ Request ржХрж░рзЗ ржПржмржВ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ FIRST BYTE of Response ржпржЦржи ржЧрзНрж░рж╣ржг ржХрж░рзЗ рждрж╛рж░ ржоржзрзНржпржХрж╛рж░ рж╕ржоржпрж╝ржЯрзБржХрзБ (Request ржХрж░рж╛ ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ ржПржмржВ FIRST BYTE ржЧрзНрж░рж╣ржг ржХрж░рж╛рж░ рж╕ржорзЯ ржкрж░рзНржпржирзНржд) рж╣рж▓ Time to First Byteред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржорзНржпрж╛ржЯрзНрж░рж┐ржХрзНрж╕**
## Performance Metrics

### Latency

ржпржЦржи рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ Client ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ Server ржкрж░рзНржпржирзНржд ржпрзЗрждрзЗ ржпржд рж╕ржорзЯ рж▓рж╛ржЧрзЗ ржПржмржВ рж╕рзЗржЗ Server ржерзЗржХрзЗ ржЖржмрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ ржпржЦржи Client ржП ржЖрж╕рждрзЗ ржпржд рж╕ржорзЯ рж▓рж╛ржЧрзЗ рж╕рзЗржЗ рж╕ржорзЯржЯрзБржХрзБ рж╣рж▓ Latencyред Latency ржорзВрж▓ржд Network ржПрж░ рж╕ржорзЯржЯрзБржХрзБрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░рж╢рзАрж▓ред

<p align="center">
  <img src="sections/performance-metrics/images/latency.png" alt="Latency">
</p>

### Response Time

Response Time рж╣рж▓ Server рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЗ ржпржд рж╕ржорзЯ ржирзЗрзЯ, рж╕рзЗржЗ рж╕ржорзЯ ржЖрж░ Latency ржПрж░ рж╕ржорзЯржЯрзБржХрзБрж░ рж╕ржорж╖рзНржЯрж┐ред

<p align="center">
  <img src="sections/performance-metrics/images/response-time.png" alt="Response Time">
</p>

### Error Rate

рж╕рж┐рж╕рзНржЯрзЗржо рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛рж░ рж╕ржорзЯ ржпрждржЧрзБрж▓рзЛ Error ржЖрж╕рзЗ ржЖрж░ рж╕рж░рзНржмржорзЛржЯ ржпрждржЧрзБрж▓рзЛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛ рж╣рзЯ рждрж╛рж░ ржнрж╛ржЧржлрж▓ рж╣рж▓ Error Rateред ржПржЯрж┐ ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржпржжрж┐ High Available System рждрзИрж░рзА ржХрж░рждрзЗ ржЪрж╛ржиред


## Section 7: Distributed System

ржПржХрж╛ржзрж┐ржХ ржХржорзНржкрж┐ржЙржЯрж╛рж░ (ржмрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ) ржПржХрж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░рж╛рж░ ржлрж▓рзЗ ржХрзЛржи ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рзЯ ржПржмржВ End User ржПрж░ ржХрж╛ржЫрзЗ ржПржХржЯрж┐ ржХржорзНржкрж┐ржЙржЯрж╛рж░ (ржмрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ) рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗ, рж╕рзЗржЗ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ рж╣рж▓ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗржб рж╕рж┐рж╕рзНржЯрзЗржоред ржПржЗ ржорзЗрж╢рж┐ржиржЧрзБрж▓рзЛрждрзЗ рж╢рзЗрзЯрж╛рж░рзНржб рж╕рзНржЯрзЗржЯ(Shared State) ржерж╛ржХрзЗ, ржХржЩрзНржХрж╛рж░рзЗржирзНржЯрж▓рж┐ (Concurrently) ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржкрзНрж░рждрж┐ржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ Information рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

ржмрж░рзНрждржорж╛ржи рж╕ржорзЯрзЗ Distributed System ржПрж░ ржЙржжрж╛рж╣рж░ржг рж╣рж▓ YouTubeред

YouTube ржХрзЗржи?

- рж╕рж╛рж░рзНржнрж╛рж░ User ржерзЗржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛рзЯ Video Upload ржХрж┐ржВржмрж╛ Video Watch ржХрж░рж╛рж░ ржЬржирзНржпред
- ржнрж┐ржбрж┐ржУ ржПржиржХрзЛржбред
- ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рж┐рж╕рзНржЯрзЗржоред

ржПржЧрзБрж▓рзЛ рж╕ржмржХрж┐ржЫрзБ ржорж┐рж▓рзЗ Distributed System YouTube рждрзИрж░рж┐ ржХрж░рзЗред

## Section 8: Domain Name System

Domain Name System ржХрж┐ржВржмрж╛ DNS ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Human Readable Domain (ржпрзЗржоржи www.google.com) ржХрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP-рждрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗред

ржЖржкржирж┐ ржпржЦржи ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ URL ржЯрж╛ржЗржк ржХрж░рзЗржи (ржпрзЗржоржи www.google.com)ред DNS рж╕рж╛ржзрж╛рж░ржгржд ржЖржкржирж╛рж░ ржжрзЗрзЯрж╛ URL ржПрж░ IP Address ржмрзЗрж░ ржХрж░ржмрзЗ ржПржмржВ рж╕рзЗржЗ IP Address ржП ржЖржкржирж╛рж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ рж╣ржмрзЗред

ржПржЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рж╛рж░ ржкржжрзНржзрждрж┐ржЯрж╛ рж╢рзБрж░рзБ рж╣рзЯ DNS Resolver ржжрж┐рзЯрзЗ,

- DNS Resolver ржорзВрж▓ржд Human Readable Domain ржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP-рждрзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ ржерж╛ржХрзЗред ржПрж░ рзйржЯрж┐ ржкрж╛рж░рзНржЯ ржЖржЫрзЗ,

  - Root Server, ржПржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржорзВрж▓ржд .com, .org, .net ржЗрждрзНржпрж╛ржжрж┐рж░ рждржерзНржп рж░рж╛ржЦрзЗ ржПржмржВ рж╕рзЗржЧрзБрж▓рзЛрж░ IP рж╕рзЗржЗ DNS Resolver ржХрзЗ ржжрж┐рзЯрзЗ ржерж╛ржХрзЗ ржпрзЗржоржи .com ржПрж░ ржЬржирзНржп .com ржПрж░ IP, .org ржПрж░ ржЬржирзНржп .org ржПрж░ IP

  - Top Level Domain Server, ржПржЗ рж╕рж╛рж░рзНржнрж╛рж░ ржорзВрж▓ржд ржкрзНрж░рждрж┐ржЯрж┐ Top Level Domain (www.google.com ржПрж░ TLD рж╣рж▓ .com) ржПрж░ Authoritative Server ржПрж░ рждржерзНржп ржирж┐ржЬрзЗрж░ ржоржзрзНржпрзЗ рж░рж╛ржЦрзЗред

    - рж╕рж╛ржзрж╛рж░ржг top-level domains: .com, .org, .gov
    - ржжрзЗрж╢рзАрзЯ code top-level domains: .jp, .uk, .bd

  - Authoritative Server, ржПржЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ рж╕рзЗржЗ Human Readable Domain (ржпрзЗржоржи www.google.com) ржПрж░ IP ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред

<p align="center">
  <img src="./images/dns.png" alt="DNS">
</p>

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржбрзЛржорзЗржЗржи ржирзЗржЗржо рж╕рж┐рж╕рзНржЯрзЗржо**
## DNS Query Types

DNS ржП рждрж┐ржи ржкрзНрж░ржХрж╛рж░рзЗрж░ query ржерж╛ржХрзЗ, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ DNS рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

- Recursive Query: ржПрждрзЗ DNS resolver ржерзЗржХрзЗ ржпрждржХрзНрж╖ржг ржирж╛ ржкрж░рзНржпржирзНржд рж░рзЗрж╕ржкржирзНрж╕ ржирж╛ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ рждрждржХрзНрж╖ржи DNS рж╕рж╛рж░рзНржЪ query ржорж╛ржирзЗ Root рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ рж╢рзБрж░рзБ ржХрж░рзЗ Authoritative рж╕рж╛рж░рзНржнрж╛рж░ ржкрж░рзНржпржирзНржд ржкрзНрж░рж╕рзЗрж╕ ржЪрж▓рждрзЗ ржерж╛ржХржмрзЗред ржпржжрж┐ NXDOMAIN (Non-Existent Domain) ржкрж╛рзЯ рждрж╛рж╣рж▓рзЗ ржЖрж░ рж╕рж╛рж░рзНржЪ ржХрж░ржмрзЗ ржирж╛ рж╕рж░рж╛рж╕рж░рж┐ "not found" ржорзЗрж╕рзЗржЬ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред ржоржирзЗ ржХрж░рж┐, ржЖржорж╛ржжрзЗрж░ ржбрзЛржорзЗржЗржи `www.notfound.com`

  - ржкрзНрж░ржержорзЗ Recursive Root Server .com ржПрж░ TLD ржмрзЗрж░ ржХрж░ржмрзЗред
  - рждрж╛рж░ржкрж░ TLD рждрзЗ ржЪрзЗржХ ржХрж░рж╛ рж╣ржмрзЗ, ржпржжрж┐ ржХрж┐ржЫрзБ ржирж╛ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЫрзЗ NXDOMAIN (Non-Existent Domain) ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред (NXDOMAIN ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯрж╛рж░ ржкрж░ Recursive Root Server ржЖрж░ check ржХрж░ржмрзЗ ржирж╛ред)

- Non-recursive Query: ржПрждрзЗ DNS рж╕рж╛рж░рзНржнрж╛рж░ human-readable ржбрзЛржорзЗржЗржи DNS Cache ржПрж░ ржоржзрзНржпрзЗ IP ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ IP ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗ ржЕржирзНржпржерж╛рзЯ "not found" рж░рзЗрж╕ржкржирзНрж╕ ржкрж╛ржарж╛ржмрзЗред

- Iterative Query: ржПрждрзЗ DNS Resolver ржкрзНрж░ржержорзЗ рждрж╛рж░ ржирж┐ржХржЯржмрж░рзНрждрзА рж╕рж╛рж░рзНржнрж╛рж░рж░рзЗрж░(DNS Cache) ржХрж╛ржЫрзЗ ржерзЗржХрзЗ ржЗржиржлрж░ржорзЗрж╢ржи ржирж┐рзЯрзЗ ржЖрж╕ржмрзЗ, ржЖрж░ ржпржжрж┐ ржирж╛ ржкрж╛рзЯ рждрж╛рж╣рж▓рзЗ next available DNS рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ ржоржзрзНржпрзЗ ржЖржмрж╛рж░ query ржХрж░ржмрзЗред ржпржжрж┐ NXDOMAIN (Non-Existent Domain) ржкрж╛рзЯ рждрж╛рж╣рж▓рзЗ ржЖрж░ ржХрж░рж┐ ржХрж░ржмрзЗ ржирж╛ directly "not found" ржорзЗрж╕рзЗржЬ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред

## ржбрзЛржорзЗржЗржи ржирзЗржЗржо рж╕рж┐рж╕рзНржЯрзЗржо(DNS) ржПрж░ рж░рзЗржХрж░рзНржб ржЯрж╛ржЗржк

ржпржЦржи ржЖржорж░рж╛ ржПржХржЯрж┐ ржбрзЛржорзЗржЗржи рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ ржХрж░рждрзЗ ржпрж╛ржЗ, рждржЦржи ржЖржорж╛ржжрзЗрж░ DNS рж╕рзЗржЯржЖржк ржХрж░рзЗ ржжрж┐рждрзЗ рж╣рзЯред ржорж╛ржирзЗ ржХрзЛржи IP рждрзЗ ржбрзЛржорзЗржЗржи ржкрзЯрзЗржирзНржЯ ржХрж░рж╛ ржерж╛ржХржмрзЗред рж╕рзЗржЯржЖржк ржХрж░рж╛рж░ рж╕ржорзЯ ржХрж┐ржЫрзБ DNS ржЯрж╛ржЗржк ржерж╛ржХрзЗ, ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рзЯрзЛржЬржи ржЕржирзБржпрж╛рзЯрзА ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░ржмред

- A: A рж░рзЗржХрж░рзНржб ржЯрж╛ржЗржк ржорзВрж▓ржд ржПржХржЯрж┐ ржбрзЛржорзЗржЗржи ржПрж░ IP ржПржбрзНрж░рзЗрж╕ ржжрж┐рзЯрзЗ рждрж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржерж╛ржХрзЗред ржоржирзЗ ржХрж░рж┐, ржЖржорж╛ржжрзЗрж░ ржбрзЛржорзЗржЗржи рж╣ржЪрзНржЫрзЗ google.com ржПржмржВ рждрж╛рж░ IP ржПржбрзНрж░рзЗрж╕ рж╣ржЪрзНржЫрзЗ 192.168.0.1, ржЖржорж░рж╛ ржпржЦржи A ржЯрж╛ржЗржк ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░ржм рждржЦржи IP ржЯрж┐ ржмрж▓рзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред

  ржПржЦржи ржЖрж░рзЗржХржЯрж┐ ржЕржкрж╕ржи ржерж╛ржХрзЗ ржпрж╛ржХрзЗ Name ржмрж▓рж╛ рж╣рзЯ рж╕рж╛ржзрж╛рж░ржгржд, ржпрзЗржЦрж╛ржирзЗ ржЖржорж░рж╛ рж╣рзЯ @ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛ ржирж╛ рж╣рзЯ ржЕржирзНржп ржХрзЛржирзЛ ржУрзЯрж╛рж░рзНржбред

  ржпржжрж┐ ржЖржорж░рж╛ @ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ рждрж╛ root ржбрзЛржорзЗржЗржиржХрзЗ IP ржПржбрзНрж░рзЗрж╕ ржПрж░ рж╕рж╛ржерзЗ ржкрзЯрзЗржирзНржЯ ржХрж░ржмрзЗред

  @ => google.com => 192.168.0.1

  ржпржжрж┐ ржУрзЯрж╛рж░рзНржб рж╣рж┐рж╕рж╛ржмрзЗ app ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж┐ рж╕рж╛ржм-ржбрзЛржорзЗржЗржи рж╣рж┐рж╕рзЗржмрзЗ IP ржкрзЯрзЗржирзНржЯ ржХрж░рж╛ рж╣ржмрзЗред

  app.google.com => 192.168.0.1

- CNAME: CNAME ржорзВрж▓ржд ржПржХржЯрж┐ ржбрзЛржорзЗржЗржи ржХрзЗ ржЕржирзНржп ржбрзЛржорзЗржЗржи ржПрж░ IP рж╕рж╛ржерзЗ ржкрзЯрзЗржирзНржЯ ржХрж░рзЗ ржжрж┐ржмрзЗред ржоржирзЗ ржХрж░рзЗ, ржЖржорж╛ржжрзЗрж░ ржбрзЛржорзЗржЗржи google.com ржПржЦржи ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ ржПрждрзЗ ржХрзЛржи IP рж╕рзЗржЯ ржирж╛ ржХрж░рзЗ ржЕржирзНржп ржПржХржЯрж┐ ржбрзЛржорзЗржЗржи facebook.com ржкрзЯрзЗржирзНржЯ ржХрж░рзЗ ржжрзЗржЗред рждрж╛рж╣рж▓рзЗ ржкрж░ржмрж░рзНрждрзАрждрзЗ ржпржЦржи ржХрзЗржЙ google.com ржП ржпрж╛ржУрзЯрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рждрзЗ рждржЦржи рждрж╛ facebook.com ржПрж░ IP рждрзЗ ржЪрж▓рзЗ ржпрж╛ржмрзЗред

## DNS Zone

DNS Zone рж╣рж▓рзЛ DNS ржПрж░ ржПржХржЯрж┐ portion ржпрзЗржЦрж╛ржирзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрзЛржорзЗржЗржи ржПржмржВ рж╕рж╛ржмржбрзЛржорж╛ржЗржи ржПржХржЯрж┐ administrator ржжрзНржмрж╛рж░рж╛ ржирж┐рзЯржирзНрждрзНрж░рж┐ржд рж╣рзЯрзЗ ржерж╛ржХрзЗред

## ржЙржжрж╛рж╣рж░ржг

- Route53
- Cloudflare DNs


## Section 9: Transmission Control Protocol

Transmission Control Protocol ржЕржержмрж╛ TCP рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рзЛржЯрзЛржХрж▓ ржпрзЗржЦрж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ Device ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж╕рзЗржЬ ржЖржжрж╛ржи-ржкрзНрж░ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред

TCP ржХрзЗ Reliable ржмрж▓рж╛ рж╣рзЯ ржХрж╛рж░ржг ржпрждржХрзНрж╖ржг ржкрж░рзНржпржирзНржд ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж╕рзЗржЬ ржЕржжрж╛ржи-ржкрзНрж░ржзрж╛ржи рж╢рзЗрж╖ рж╣ржмрзЗ ржирж╛ рждрждржХрзНрж╖ржи connection ржмржирзНржз рж╣ржмрзЗ ржирж╛ред

Transmission рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржкрзВрж░рзНржмрзЗ TCP 3-way-handshake ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ connection established ржХрж░рзЗред ржПржЯрж┐ рзйржЯрж┐ рж╕рзНржЯрзЗржкрзЗ рж╣рзЯрзЗ ржерж╛ржХрзЗ,

- SYN (synchronize): ржПржЗ flag ржжрзНржмрж╛рж░рж╛ TCP ржХрж╛ржирзЗржХрж╢ржи establish ржХрж░рж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рж╛ рж╣рзЯред
- SYN-ACK (synchronize-acknowledge): ржПржЗ flag ржХрж╛ржирзЗржХрж╢ржи establish ржХрж░рждрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред
- ACK (acknowledge): ржПржЗ flag ржжрзНржмрж╛рж░рж╛ ржХрж╛ржирзЗржХрж╢ржи establish рж╕ржорзНржкржирзНржи рж╣ржУрзЯрж╛рж░ acknowledge ржХрж░рж╛ рж╣рзЯред

ржПржЗ 3-way-handshake ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ Device'ржЧрзБрж▓рзЛ(ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ-рж╕рж╛рж░рзНржнрж╛рж░) ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж╕рзЗржЬ ржЖржжрж╛ржи-ржкрзНрж░ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржХрж┐ ржирж╛ред

TCP Reliability ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ рж╕рж╛ржзрж╛рж░ржгржд Acknowledgments ржПржмржВ Retransmissions ржкржжрзНржзрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред TCP рждрзЗ ржорзВрж▓ржд ржпржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржбрзЗржЯрж╛ send ржХрж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЯрж┐ ржХрзЗ Acknowledge ржХрж░рзЗред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржжрж┐ Acknowledge ржирж╛ ржкрж╛рзЯ рждржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЖржмрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ Retransmission ржХрж░ржмрзЗред ржПрж░ржХржо Reliability ржирж┐рж╢рзНржЪрж┐ржд рж╣рзЯрзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="./images/tcp-1.png" alt="tcp">
</p>

TCP ржорзВрж▓ржд Networking ржПрж░ OSI Model ржПрж░ Practical Formред ржПржЯрж┐ Transport Layer ржерзЗржХрзЗ рж╢рзБрж░рзБ рж╣рзЯ ржПржмржВ Application Layer ржП ржХрж╛ржЬ ржХрж░рзЗред

HTTP, Web Socket, FTP ржЗрждрзНржпрж╛ржжрж┐ ржорзВрж▓ржд TCP рждрзЗ ржЪрж▓рзЗред

## Section 10: User Datagram Protocol

UDP ржорзВрж▓ржд OSI Model ржПрж░ Transport Layer-ржП ржЕржмрж╕рзНржерж╛ржи ржХрж░рзЗред TCP ржПрж░ ржоржд ржПржЯрж┐ reliable ржирж╛ред ржПрждрзЗ ржХрзЛржирзЛ 3-way handshake рждрзИрж░рзА рж╣рзЯ ржирж╛ред ржПржЯрж┐ ржорзВрж▓ржд Low Latency ржПржмржВ unreliable connection рждрзИрж░рзА ржХрж░рзЗред

UDP Process to Process communication establish ржХрж░рзЗред

TCP рждрзЗ ржпрзЗрж╣рзЗрждрзБ 3-way handshake рждрзИрж░рзАрж░ ржорж╛ржзрзНржпржорзЗ reliable connection рждрзИрж░рзА рж╣рзЯ, ржХрж┐ржирзНрждрзБ ржПржЗ 3-way handshake рждрзИрж░рзА ржХрж░рждрзЗ рж╕ржорзЯрзЗрж░ ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯ рж╕рзЗржЬржирзНржп performance ржХржо ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯред Performance ржПрж░ ржХржерж╛ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж▓рзЗ UDP ржПржХржЯрж┐ better choiceред

UDP рждрзЗ ржХрзЛржирзЛ Error checking рж╣рзЯ ржирж╛ред

<p align="center">
  <img src="./images/udp.png" alt="udp">
</p>

UDP ржПрж░ use-cases:

- Real-time Communication; ржЙржжрж╛рж╣рж░ржг: Skype, Zoom.
- Live Video Streaming; ржЙржжрж╛рж╣рж░ржг: Twitch, ESPN+.
- Online Gaming; ржЙржжрж╛рж╣рж░ржг: Call of Duty.

UDP рж▓рж╛ржЗржн ржнрж┐ржбрж┐ржУ рж╕рзНржЯрзНрж░рж┐ржорж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝, ржХрж╛рж░ржг Live ржЗржнрзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ рж╕ржорзНржкрзНрж░ржЪрж╛рж░ржЯрж┐ sync рж░рж╛ржЦрж╛ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржирж╛ред UDP ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕ржоржпрж╝, ржпржжрж┐ ржХрж┐ржЫрзБ ржлрзНрж░рзЗржо рж╣рж╛рж░рж┐ржпрж╝рзЗ ржпрж╛ржпрж╝, рж╕рзЗржЧрзБрж▓рзЛ ржкрзБржирж░рж╛ржпрж╝ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржпрж╝ ржирж╛ред ржЙржжрж╛рж╣рж░ржг,

ржЖржкржирж┐ ржмрж┐ржкрж┐ржПрж▓ (ржХрзНрж░рж┐ржХрзЗржЯ) ржжрзЗржЦржЫрзЗржиред ржУржнрж╛рж░ рзз.рзи-рждрзЗ рж╣ржарж╛рзО ржмрж╛ржлрж╛рж░рж┐ржВ рж╢рзБрж░рзБ рж╣рж▓рзЛ, ржЖрж░ ржПржЦржи ржУржнрж╛рж░ рзз.рзк ржЪрж▓ржЫрзЗред ржУржЗ ржжрзБржЗ ржмрж▓ ржирж┐ржпрж╝рзЗ ржЖржкржирж┐ рждрзЗржоржи ржЪрж┐ржирзНрждрж╛ ржХрж░ржЫрзЗржи ржирж╛ред ржЖржкржирж┐ ржкрж░рзЗрж░ ржмрж▓ ржжрзЗржЦржЫрзЗржиред ржПржЯрж┐ рж╣ржЪрзНржЫрзЗ UDPред

## Section 11: HTTP, TLS and HTTPS

HTTP ржЕрж░рзНржерж╛рзО Hyper Text Transfer Protocol, HTTP ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗ ржерж╛ржХрзЗ, ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ Web Browser ржПржмржВ Web Server ржирж┐ржЬрзЗржжрзЗрж░ ржнрж┐рждрж░ communication ржХрж░рзЗ ржерж╛ржХрзЗред ржПржЯрж┐ ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ set of rules ржпрж╛ ржбрзЗржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж╛ржарж╛ржирзЛ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржбрзЗржЯрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ Text, Image ржЗрждрзНржпрж╛ржжрж┐ред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржнрж┐рждрж░ ржбрзЗржЯрж╛ ржЖржжрж╛ржи ржкрзНрж░ржзрж╛ржи plain-text ржП рж╣рзЯрзЗ ржерж╛ржХрзЗ, ржПрж░ ржлрж▓рзЗ HTTP secured ржирж╛ред

TLS ржХрж┐ржВржмрж╛ Transport Layer Security, ржПржЯрж┐ рж╣рж▓рзЛ Cryptographic Protocol ржпрж╛ ржорзВрж▓ржд communication рж╕рзБрж░ржХрзНрж╖рж┐ржд ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ ржбрж╛ржЯрж╛ ржПржиржХрзНрж░рж┐ржкрзНржЯ ржХрж░рзЗ ржерж╛ржХрзЗ ржбрж╛ржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЯрзНрж░рж╛ржирзНрж╕ржорж┐ржЯ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯред

HTTPS ржЕрж░рзНржерж╛рзО Hyper Text Transfer Protocol Secure, ржПржЯрж┐ ржирж┐ржЬрзЗ HTTP ржПрж░ рж╕ржХрж▓ ржмрзИрж╢рж┐рж╖рзНржЯ ржмрж╣ржи ржХрж░рзЗ рж╢рзБржзрзБ SSL/TLS ржпрзЛржЧ ржХрж░рзЗ, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржбрзЗржЯрж╛ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ Encrypted рж╣рзЯрзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="./images/http-https.png" alt="http and https">
</p>

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐, ржЯрж┐ржПрж▓ржПрж╕ ржПржмржВ ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐'ржПрж╕**
## HTTP 1

HTTP 1 рззрзпрзпрзм рж╕рж╛рж▓рзЗ ржПрж╕рзЗржЫрзЗред ржПржЯрж┐ ржорзВрж▓ржд TCP ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ рждрзИрж░рзА ржХрж░рж╛ рж╣рзЯрзЗржЫрж┐рж▓ред ржПржЦрж╛ржирзЗ ржкрзНрж░рждрж┐ржЯрж┐ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ ржЬржирзНржп ржбрзЗржбрж┐ржХрзЗржЯрзЗржб TCP connection рждрзИрж░рзА рж╣рждред ржпрзЗржоржи ржПржХржЯрж┐ ржкрзЗржЬ ржП ржпржжрж┐ рззрзж ржЯрж┐ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ рж▓рзЛржб ржХрж░рж╛ рж▓рж╛ржЧрзЗ рждрж╛рж╣рж▓рзЗ ржПржЗ рззрзж ржЯрж┐ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржПрж░ ржЬржирзНржп рззрзж ржЯрж┐ TCP Connection рждрзИрж░рзА рж╣ржмрзЗред

## HTTP 1.1

HTTP 1.1 ржП keep-alive mechanism рждрзИрж░рзА ржХрж░рж╛ рж╣рзЯрзЗржЫрж┐рж▓ ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржПржХржЯрж┐ TCP ржХрж╛ржирзЗржХрж╢ржи ржХрзЗ ржПржХрж╛ржзрж┐ржХ HTTP request ржПржмржВ response ржП reuse ржХрж░рж╛ ржпрзЗржд, ржпрж╛ржХрзЗ Pipelining ржмрж▓рзЗред Pipelining ржорзВрж▓ржд Sequentially рж╣рзЯрзЗ ржерж╛ржХрзЗред

ржПржХржЯрж┐ TCP connection reuse ржХрж░рзЗ ржХрж░рзЗ ржЖржорж░рж╛ рж╕ржм content/request ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржЖрж░ ржЖржорж╛ржжрзЗрж░ content request ржПрж░ ржЬржирзНржп TCP connection ржкрзНрж░рзЯрзЛржЬржи, TCP connection ржирждрзБржи ржХрж░рзЗ рждрзИрж░рзА рж╣ржЪрзНржЫрзЗ ржирж╛ рждржмрзЗ concurrent requests ржмрзЗрж╢рж┐ рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржгрзЗ keep-alive scalable ржирж╛ред

HTTP 1.1 ржП CORS mechanism ржЖржирж╛ рж╣рзЯрзЗржЫрж┐рж▓ред

## HTTP 2

HTTP 2 рждрзЗ Multiplexing ржЖржирж╛ рж╣рзЯрзЗржЫрж┐рж▓ ржпрж╛рж░ ржорж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ STREAMS of REQUESTS ржПржХржЯрж┐ TCP connection ржПрж░ ржнрж┐рждрж░ transfer рж╣рждрзЗ ржкрж╛рж░рзЗред HTTP 1 ржП ржкрзНрж░рждрж┐ржЯрж╛ ржХржиржЯрзЗржирзНржЯ request ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ reuse ржХрж░рж╛ TCP connection ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржд ржХрж┐ржирзНрждрзБ HTTP 2 рждрзЗ ржПржХрж╛ржзрж┐ржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПржХржЯрж┐ single TCP connection ржПрж░ ржоржзрзНржпрзЗ ржпрзЗрждред

<p align="center">
  <img src="sections/http-tls-and-https/images/http-2.png" alt="http 2">
</p>

HTTP 2 ржПрж░ ржЬржирзНржп TLS setup ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ, ржорж╛ржирзЗ HTTPS enable ржерж╛ржХрждрзЗ рж╣ржмрзЗред

HTTP 2 ржПрж░ ржПржХржЯрж┐ feature рж╣рж▓ HPACKред HPACK ржорзВрж▓ржд HTTP headers ржХрзЗ compress ржХрж░рзЗ ржерж╛ржХрзЗред HTTP 1 ржП headers plain-text ржлрж░ржорзНржпрж╛ржЯрзЗ send ржХрж░рж╛ рж╣ржд, HPACK efficiently headers transmit ржХрж░рзЗ ржерж╛ржХрзЗред

HTTP 2 ржПрж░ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЬ Limitation рж╣рж▓, ржпржЦржи Stream of Requests ржПржХржЯрж┐ single TCP connection ржПрж░ ржоржзрзНржп ржжрж┐рзЯрзЗ ржпрж╛рзЯ рждржЦржи ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ ржпржжрж┐ ржПржХржЯрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ Packet Loss рж╣рзЯ рждрж╛рж╣рж▓рзЗ рж╕ржм рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ ржЙржкрж░ ржирзЗржЧрзЗржЯрж┐ржн ржЗржоржкрзНржпрж╛ржХрзНржЯ ржкрзЬржмрзЗред рждрж╛рж░ ржорзВрж▓ ржХрж╛рж░ржг TCP ржПрж░ ржХрж╛ржЬ рж╣рж▓ ржПржХржЗ order ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рзЗ рж╕ржм packet/request ржПржХ end ржерзЗржХрзЗ ржЕржирзНржп end ржП ржбрзЗрж▓рж┐ржнрж╛рж░ ржХрж░рж╛, ржПржЦржи ржпржжрж┐ ржПржХржЯрж┐ржУ packet loss рж╣рзЯ рждрж╛рж╣рж▓рзЗ TCP ржЖрж░ order maintain ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

ржПржЗ рж╕ржорж╕рзНржпрж╛ржХрзЗ Head of Line Blocking ржмрж▓рзЗред

## HTTP 3

ржПржЗ Head of Line Blocking рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп Google ржПржХржЯрж┐ ржирждрзБржи ржкрзНрж░рзЛржЯрзЛржХрж▓ рждрзИрж░рзА ржХрж░рзЗржЫрж┐рж▓ ржпрж╛рж░ ржирж╛ржо QUIC(Quick UDP Internet Connections)ред ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ TCP ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЗ QUIC ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржпрж╛ рж╕рзБржмрж┐ржзрж╛ржЯрж┐ ржкрж╛ржмрзЛ рждрж╛ рж╣рж▓ ржпржЦржи packet loss рж╣ржмрзЗ рждржЦржи ржЕржирзНржп packet/request ржП ржХрзЛржирзЛ ржкрзНрж░ржнрж╛ржм ржлрзЗрж▓ржмрзЗ ржирж╛ред

<p align="center">
  <img src="sections/http-tls-and-https/images/quic.png" alt="QUIC">
</p>

QUIC ржорзВрж▓ржд UDP ржкрзНрж░ржЯрзЛржХрж▓рзЗрж░ ржЙржкрж░ ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯрзЗ ржерж╛ржХрзЗред рж╕рзЗржЬржирзНржп ржПржЦрж╛ржирзЗ TCP ржоржд Reliability ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ред

ржПржЦрж╛ржирзЗ TCP ржПрж░ ржоржд 3-way handshake рждрзИрж░рзА рж╣рзЯ ржирж╛, QUIC ржирж┐ржЬрзЗрж░ initial handshake ржП рж╕ржм encryption рж╕рж╣ TLS ржПрж░ ржХрж╛ржЬ рж╣рзЯрзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/http-tls-and-https/images/quic-2.png" alt="QUIC">
</p>

## ржХрж┐ржнрж╛ржмрзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░ржмрзЗржи ржХрзЛржирзЛ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ ржХрзЛржи ржнрж╛рж░рзНрж╕ржи ржПрж░ HTTP ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ?

```
curl -I -s -o /dev/null -w "%{http_version}\n" https://google.com
```

## ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛ

- HTTP 1.1, HTTP 2, ржПржмржВ HTTP 3 ржПржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐?
- HTTP ржПржмржВ HTTPS ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрж┐?
- Pipelining ржХрж┐?
- TLS ржХрж┐ржнрж╛ржмрзЗ HTTP(S) ржХрзЗ рж╕рзБрж░ржХрзНрж╖рж╛ ржХрж░рзЗ ржерж╛ржХрзЗ?
- SSL/TLS certificate ржХрж┐?
- ржЖржкржирж╛рж░ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ HTTPS ржП рж▓рзЛржб ржирж╛ рж╣рзЯрзЗ ржерж╛ржХрж▓рзЗ ржХрж┐ржнрж╛ржмрзЗ troubleshoot ржХрж░ржмрзЗржи?


## Section 12: What happens when you type a URL in your browser

<p align="center">
  <img src="./images/what-happens.jpeg" alt="what happens">
</p>

(ржЫржмрж┐ржЯрж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржерзЗржХрзЗ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рж╛)ред ржЖржкржирж┐ ржпржЦржи ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржПрж░ Address Bar ржП URL ржЯрж╛ржЗржк ржХрж░рзЗ enter press ржХрж░ржмрзЗржи, ржЖржкржирж╛рж░ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржкрзНрж░ржержорзЗ ржЖржкржирж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЯрж┐ржХрзЗ DNS рж╕рж╛рж░рзНржнрж╛рж░ ржП ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗ рждрж╛рж░ржкрж░ ржжрзЗржЦржмрзЗ DNS cache ржПрж░ ржнрж┐рждрж░ рж╕рзЗржЗ URL ржПрж░ IP ржПржбрзНрж░рзЗрж╕ ржЖржЫрзЗ ржХрж┐ ржирж╛ред ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржмрж┐ржнрж┐ржирзНржи steps рж╢рзЗрж╖ ржХрж░рж╛рж░ ржкрж░ DNS рж╕рзЗржЗ URL ржПрж░ IP рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

рждрж╛рж░ржкрж░ 3-way handshake ржПрж░ ржорж╛ржзрзНржпржорзЗ IP address ржПрж░ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ рж╕рж╛ржерзЗ TCP ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рзА рж╣ржмрзЗред

ржкрж░ржмрж░рзНрждрзАрждрзЗ browser TCP ржХрж╛ржирзЗржХрж╢ржи ржПрж░ рж╕рж╛рж╣рж╛ржпрзНржпрзЗ рж╕рзЗржЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рзЗред

рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ рждрж╛рж░ржкрж░ рж░рзЗрж╕ржкржирзНрж╕ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржерж╛ржХрзЗред ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рзЗржЗ рж░рзЗрж╕ржкржирзНрж╕ ржХрзЗ ржмрж┐ржнрж┐ржирзНржи рж╕рзНржЯрзЗржк рж╢рзЗрж╖ ржХрж░рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржжрзЗржЦрж╛рзЯред

## Section 13: Concurrency and Parallelism

Concurrency ржПржмржВ Parallelism ржмрзБржЭрждрзЗ рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ Process ржПржмржВ Thread ржЕржкрж╛рж░рзЗржЯрж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо ржПрж░ ржЖрж▓рзЛржХрзЗ ржмрзБржЭрждрзЗ рж╣ржмрзЗред

Process ржХрж┐? ржПржХржЯрж┐ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо(code) ржпржЦржи execution ржЕржмрж╕рзНржерж╛рзЯ ржерж╛ржХрзЗ, рждржЦржи рж╕рзЗржЯрж┐ ржПржХржЯрж┐ Processред ржПржЯрж┐ ржПржоржи ржПржХржЯрж┐ environment ржмрж╛ container, ржпрзЗржЦрж╛ржирзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ ржЬржирзНржп ржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж╕ржорж╕рзНржд рж░рж┐рж╕рзЛрж░рзНрж╕ (ржпрзЗржоржи, CPU ржЯрж╛ржЗржо, ржорзЗржорж░рж┐) ржмрж░рж╛ржжрзНржж ржХрж░рж╛ рж╣рзЯ ржПржмржВ ржкрзНрж░рзЛржЧрзНрж░рж╛ржоржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛ(execute) рж╣рзЯред

Thread ржХрж┐? ржПржЯрж┐ ржорзВрж▓ржд Process ржПрж░ Subsetред ржПржХрзЗ Independent Execution Unit ржУ ржмрж▓рж╛ рж╣рзЯред ржПржХржЯрж┐ Process-ржП ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Thread ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ, Thread ржорзВрж▓ржд Process ржПрж░ Shared Resource ржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржерж╛ржХрзЗред рждрж╛рж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо ржПрж░ ржЕржкрж╛рж░рзЗрж╢ржиржЧрзБрж▓рзЛржХрзЗ Concurrently ржХрж┐ржВржмрж╛ Parallelly(core ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ) execute ржХрж░рж╛ред

Thread ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржмрзБржЭрж╛рж░ ржЬржирзНржп Concurrency ржПржмржВ Parallelism ржмрзБржЭрж╛ ржпрж╛ржХред

Concurrency ржХрж┐? Concurrency рж╣ржЪрзНржЫрзЗ Thread ржПрж░ ржоржзрзНржпрзЗ ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ ржерзЗржорзЗ ржерзЗржорзЗ ржПржХрж╕ржЩрзНржЧрзЗ рж╕ржорзНржкржирзНржи рж╣ржЪрзНржЫрзЗ, ржпржжрж┐ рззржЯрж┐ CPU ржХрзЛрж░ ржерж╛ржХрзЗред

ржзрж░рзБржи CPU ржХрзЛрж░ рж╣ржЪрзНржЫрзЗ рззржЯрж┐, ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ Thread ржПрж░ ржоржзрзНржпрзЗ ржпржЦржи ржерж╛ржХрзЗ, рждржЦржи Context Switching ржПрж░ ржорж╛ржзрзНржпржорзЗ CPU ржжрзНрж░рзБрждржнрж╛ржмрзЗ ржПржХрзЗ ржЕржкрж░ржХрзЗ рж╕ржоржпрж╝ ржнрж╛ржЧ ржХрж░рзЗ, ржЕрж░рзНржерж╛рзО ржПржХржЯрж┐ ржХрж╛ржЬ ржерзЗржорзЗ CPU ржЕржирзНржп ржХрж╛ржЬ рж╢рзБрж░рзБ ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржЖржмрж╛рж░ рж╕рзЗржЗ ржХрж╛ржЬ ржкрзБржирж░рж╛рзЯ ржЪрж╛рж▓рзБ ржХрж░рзЗ ржпрждржжрзВрж░ ржкрзВрж░рзНржмрзЗрж░ execution ржП рж╕ржорзНржкржирзНржи рж╣рзЯрзЗржЫрзЗ, рждрж╛рж░ржкрж░рзЗрж░ ржЕржВрж╢ ржерзЗржХрзЗ ржЖржмрж╛рж░ рж╢рзБрж░рзБ рж╣рзЯред

ржпрждржХрзНрж╖ржг ржирж╛ ржкрж░рзНржпржирзНржд рж╕ржм ржХрж╛ржЬ рж╢рзЗрж╖ рж╣ржЪрзНржЫрзЗ, ржПрж░ржХржо ржЪрж▓рждрзЗ ржерж╛ржХржмрзЗред

<p align="center">
  <img src="./images/concurrency.png" alt="Concurrency">
</p>

Parallelism ржХрж┐? ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ ржПржХржЗ рж╕ржорзЯрзЗ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ/рж╕рзНржмрж╛ржзрзАржиржнрж╛ржмрзЗ рж╕ржорзНржкржирзНржи ржХрж░рж╛, ржПржмржВ ржПржЯрж┐ рж╕ржорзНржнржм ржпржЦржи ржПржХрж╛ржзрж┐ржХ CPU core ржерж╛ржХрзЗред

ржзрж░рзБржи CPU ржХрзЛрж░ рж╣ржЪрзНржЫрзЗ рзиржЯрж┐, ржПржХрж╛ржзрж┐ржХ ржХрж╛ржЬ Thread ржЧрзБрж▓рзЛрж░ ржоржзрзНржпрзЗ execute рж╣ржмрзЗред

<p align="center">
  <img src="./images/parallelism.png" alt="Parallelism">
</p>

ржПржХрж╛ржзрж┐ржХ ржХрзЛрж░ ржПрж░ ржоржзрзНржпрзЗржУ Concurrency рж╣рзЯрзЗ ржерж╛ржХрзЗред ржХржЦржи?

ржпржЦржи рж╕ржм Thread ржмрзНржпрж╕рзНржд рж╣рзЯрзЗ ржкрзЬржмрзЗ рждржЦржи ржЕржирзНржп Task ржЧрзБрж▓рзЛрж░ ржЬржирзНржп Context Switching ржПрж░ ржорж╛ржзрзНржпржорзЗ Task ржЧрзБрж▓рзЛ рж╕ржорзНржкрж╛ржжржи ржХрж░рж╛ рж╣ржмрзЗред

Parallelism ржЙржжрж╛рж╣рж░ржг I/O bound task ржПрж░ ржЬржирзНржп Node.js ржжрж┐рзЯрзЗ,

```js
const fetch = require("node-fetch");

async function fetchData() {
  const urls = [
    "https://jsonplaceholder.typicode.com/posts/1",
    "https://jsonplaceholder.typicode.com/posts/2",
    "https://jsonplaceholder.typicode.com/posts/3",
  ];

  const promises = urls.map((url) => fetch(url).then((res) => res.json()));

  const results = await Promise.all(promises); // Parallel Execution

  console.log(results);
}

fetchData();
```

Node.js Parallel Execution ржПрж░ ржЬржирзНржп Worker Threads, Child Processes, Cluster module рж░рзЯрзЗржЫрзЗред

## Section 14: High Concurrency Control

High Concurrency ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ, ржпржЦржи ржПржХрж╛ржзрж┐ржХ user ржХрж┐ржВржмрж╛ ржПржХрж╛ржзрж┐ржХ process ржПржХржЗ рж╕ржорзЯ/ржПржХржЗ ржорзБрж╣рзВрж░рзНрждрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐рж╕рзЛрж░рзНрж╕ ржХрж┐ржВржмрж╛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж╛ржЯрж╛ modify ржХрж░рждрзЗ ржпрж╛рзЯред ржПрж░ ржжрзНржмрж╛рж░рж╛ ржЕржирзЗржХ рж╕ржорж╕рзНржпрж╛ рж╕рзГрж╖рзНржЯрж┐ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрж╛рж░ ржоржзрзНржпрзЗ рж╕ржмржЪрзЗрзЯрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗ Data Inconsistencyред

(ржЪрж▓ржорж╛ржи)

## Section 15: Functional and Non Functional Requirements

### Functional Requirements

ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржХрж┐ ржХрж┐ ржХрж╛ржЬ ржХрж░рзЗ рж╕рзЗржЯрж┐ Functional Requirement ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рзЗ ржерж╛ржХрзЗред ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрж╛рзЯ, рж╕рзЛрж╢рзНржпрж╛рж▓ ржорж┐ржбрж┐рзЯрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ,

- ржкрзЛрж╕рзНржЯ ржХрж░рж╛ ржпрж╛рзЯ
- ржкрзЛрж╕рзНржЯрзЗ рж▓рж╛ржЗржХ ржХрж░рж╛ ржпрж╛рзЯ
- ржкрзЛрж╕рзНржЯрзЗ ржХржорзЗржирзНржЯ ржХрж░рж╛ ржпрж╛рзЯ
- ржкрзЛрж╕рзНржЯрзЗ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ ржпрж╛рзЯ

ржкрзНрж░рждрж┐ржЯрж╛ рж╣ржЪрзНржЫрзЗ ржПржХ ржПржХржЯрж┐ Functional Requirementред

### Non Functional Requirements

ржПржЯрж┐ ржорзВрж▓ржд ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржЧрзБржгржорж╛ржи ржмрзИрж╢рж┐рж╖рзНржЯрзНржпрждрж╛ (Quality Characteristics), ржЙржжрж╛рж╣рж░ржг:

- Performance
- Security
- Cost
- Scalability
- Reliability

ржкрзНрж░рждрж┐ржЯрж╛ рж╣ржЪрзНржЫрзЗ ржПржХ ржПржХржЯрж┐ Non Functional Requirementред

## Section 16: Back Of the Envelope Estimation

ржПржЯрж┐ ржПржХржЯрж┐ ржЯрзЗржХржирж┐ржХ ржпрж╛ ржЖржорж╛ржжрзЗрж░ржХрзЗ рж╕рж┐рж╕рзНржЯрзЗржо ржбрж┐ржЬрж╛ржЗржи ржПрж░ Load Balancer, CDN ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛ ржХрж┐ ржирж╛ рждрж╛рж░ ржЖржирзБржорж╛ржирж┐ржХ ржзрж╛рж░ржирж╛ рж╣рж┐рж╕рж╛ржм ржХрж░рзЗ ржмрж▓рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржмрзНржпрж╛ржХ ржЕржл ржжрж╛ ржПржиржнрзЗрж▓ржк ржПрж╕рзНржЯрж┐ржорзЗрж╢ржи**
## Find Back of the Envelop Estimation

Back of the Envelop Estimation ржмрзЗрж░ ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ Cheat Sheet ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ,

- 3 zeros = thousand traffic (KB)
- 6 zeros = million traffic (MB)
- 9 zeros = billion traffic (GB)
- 12 zeros = trillion traffic (TB)

x Million users \* y KB = xy GB

ржЙржкрж░рзЗрж░ ржлрж░рзНржорзБрж▓рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржХрж┐ржЫрзБ Estimations ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐,

**ржЖржорж░рж╛ ржПржЦржи ржлрзЗржЗрж╕ржмрзБржХ ржПрж░ Storage Capacity Estimation ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред**

ржзрж░рж┐ ржлрзЗрж╕ржмрзБржХ ржПрж░ DAU(Daily Active User) рззрзж Billionред

Daily Active User ржпржжрж┐ ржЧрзЬ рзз ржЯрж┐ ржХрж░рзЗ post ржХрж░рзЗ рждрж╛рж╣рж▓рзЗ ржкрзНрж░рждрж┐ржЯрж┐ post ржзрж░рзЗ ржирж┐ 1kb

ржЙржкрж░рзЗрж░ ржЪрж╛рж░рзНржЯ ржЕржирзБржпрж╛рзЯрзА billion ржПрж░ рзп ржЯрж┐ zeros ржЖрж░ kb ржПрж░ рзй ржЯрж┐ zeros ржорзЛржЯ рзп + рзй = рззрзи, рззрзи ржЯрж┐ zeros ржорж╛ржирзЗ trillion ржЖрж░ рззрзж \* рзз ржорж╛ржирзЗ рззрзжред 

(10 Billion \* 1 kb) = 10 trillion

storage ржПрж░ ржкрж░рж┐ржорж╛ржи ржжрж╛ржБрзЬрж╛рзЯ рззрзж trillionред

**ржЖржорж░рж╛ ржПржЦржи ржлрзЗржЗрж╕ржмрзБржХ ржПрж░ Traffic Estimation ржмрзЗрж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред**

ржкрзНрж░рждрж┐ржЯрж┐ user ржЧрзЬ рзк ржЯрж┐ ржХрж░рзЗ read ржЕржкрж╛рж░рзЗрж╢ржи ржПржмржВ рзи ржЯрж┐ ржХрж░рзЗ write ржЕржкрж╛рж░рзЗрж╢ржи ржХрж░ржЫрзЗред

(10 Billion \* 6 queries) / 86400 = ~700000

ржкрзНрж░рждрж┐ рж╕рзЗржХрзЗржирзНржбрзЗ ржлрзЗржЗрж╕ржмрзБржХржХрзЗ ржЧрзЬ рзнрзжрзжрзжрзжрзж рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЗ рж╣ржЪрзНржЫрзЗред


## Section 17: Authentication and Authorization

ржПржХржЯрж┐ secured рж╕рж┐рж╕рзНржЯрзЗржо design ржХрж░рждрзЗ рж╣рж▓рзЗ Authentication ржПржмржВ Authorization ржЬрж╛ржирж╛ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред Authentication ржорзВрж▓ржд identity verify ржХрж░рж╛ржХрзЗ ржмрзБржЬрж╛рзЯред ржЖржорж░рж╛ ржпржЦржи ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЧрж┐рзЯрзЗ ржЗржорзЗржЗрж▓ ржПржмржВ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐рзЯрзЗ рж▓ржЧржЗржи ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рж╕рзЗржЗ ржЗржорзЗржЗрж▓ ржЖрж░ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржнрзЗрж░рж┐ржлрж╛ржЗ ржХрж░рзЗ рж╣ржЪрзНржЫрзЗ Authenticationред

Authorization рж╣рж▓рзЛ ржХрзЛржирзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐рж╕рзЛрж░рзНрж╕рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ user ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржХрж┐ ржирж╛ рждрж╛ ржмрзБржЭрж╛рзЯред ржпрзЗржоржи ржХрзЛржирзЛ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржП ржирж┐рж░рзНржжрж┐рж╖рзНржЯ API ржерж╛ржХрзЗ ржпрж╛ рж╢рзБржзрзБржорж╛рждрзНрз░ ржПржбржорж┐ржирж┐рж╕рзНржЯрзНрж░рзЗржЯрж░ ржорж╛ржирзБрж╖ ржЫрж╛рзЬрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛, ржПржЦржи ржпржжрж┐ ржХрзЗржЙ ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржЪрж╛рзЯ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржорж╛ржирзБрж╖ржЯрж╛ Authorize ржЖржЫрзЗ ржХрж┐ ржирж╛ рж╕рзЗржЯрж╛ржЗ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ Authorizationред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи ржПржмржВ ржЕржерж░рж┐ржЬрж╛рж╢ржи**
## Session based Authentication ржПржмржВ Token based Authentication

ржПржЗ ржжрзБржЗ Authentication ржЯрзЗржХржирж┐ржХ ржЖржорж╛ржжрзЗрж░ ржирж┐ржЬрзЗржжрзЗрж░ ржЬрж╛ржирж╛ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред

### Session based Authentication

ржПржХрзНрж╖рзЗрждрзНрж░рзЗ Authentication ржХрж░рж╛рж░ рж╕ржорзЯ session ржЗржиржлрж░ржорзЗрж╢ржи/рждржерзНржп ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрж┐ржВржмрж╛ Session Store ржП рж░рж╛ржЦрж╛ рж╣рзЯред ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

- ржлрзНрж░ржирзНржЯржПржирзНржб ржерзЗржХрзЗ ржмрзНржпрж╛ржХржПржирзНржб ржП user рж▓ржЧржЗржи рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред
- username ржХрж┐ржВржмрж╛ email ржПржмржВ password ржпржЦржи рж╕ржарж┐ржХ рж╣ржмрзЗ, рж╕рж╛рж░рзНржнрж╛рж░ рждржЦржи Session рждрзИрж░рзА ржХрж░рзЗ ржерж╛ржХрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Secret Key ржПрж░ ржорж╛ржзрзНржпржорзЗред рждрж╛рж░ржкрж░ рж╕рзЗржЗ Session ржХрзЛржирзЛ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓рзЗ ржХрж┐ржВржмрж╛ Session Store ржП рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рзЗржЦрзЗ ржжрзЗрзЯред
- рждрж╛рж░ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХржЯрж┐ unique Session ID рж╕ржорзНржмрж▓рж┐ржд cookie ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржмрзЗред
- ржкрж░ржмрж░рзНрждрзА рж╕ржорзЯ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи ржХрзЛржирзЛ ржкрзНрж░рзЛржЯрзЗржХрзНржЯрзЗржб рж░рж┐рж╕рзЛрж░рзНрж╕ ржПрж░ ржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржмрзЗ, рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ Session ID ржХрзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░ржмрзЗ(рждрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржХрж┐ржВржмрж╛ ржХрзЛржирзЛ Session Store ржерзЗржХрзЗ)ред

ржпрзЗрж╣рзЗрждрзБ Session ржХрзЛржирзЛ рж╕рзНржерж╛ржирзЗ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯ рж╕рзЗржЬржирзНржп Session based Authentication ржХрзЗ Stateful ржмрж▓рж╛ рж╣рзЯред

### Token based Authentication

ржПржХрзНрж╖рзЗрждрзНрж░рзЗ Authentication ржХрж░рж╛рж░ рж╕ржорзЯ session ржЗржиржлрж░ржорзЗрж╢ржи/рждржерзНржп ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрж┐ржВржмрж╛ Session Store ржП рж░рж╛ржЦрж╛ рж╣рзЯ ржирж╛ред ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

- ржлрзНрж░ржирзНржЯржПржирзНржб ржерзЗржХрзЗ ржмрзНржпрж╛ржХржПржирзНржб ржП user рж▓ржЧржЗржи рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред
- username ржХрж┐ржВржмрж╛ email ржПржмржВ password ржпржЦржи рж╕ржарж┐ржХ рж╣ржмрзЗ, рж╕рж╛рж░рзНржнрж╛рж░ рждржЦржи Private Key ржПрж░ ржорж╛ржзрзНржпржорзЗ ржПржХржЯрж┐ Token рждрзИрж░рзА ржХрж░ржмрзЗред Token ржЯрж┐ ржХрзЗ рж╕рж╛ржзрж╛рж░ржгржд JSON Web Token ржмрж▓рзЗред ржПржЯрж┐ ржорзВрж▓ржд ржПржХржЯрж┐ Signed Token ржорж╛ржирзЗ ржПрждрзЗ ржЕржирзЗржХ ржЗржиржлрж░ржорзЗрж╢ржи ржерж╛ржХрзЗ ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржПржиржХрзНрж░рж┐ржкрзНржЯ ржЕржмрж╕рзНржерж╛рзЯред
- рждрж╛рж░ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ JWT рж╕ржорзНржмрж▓рж┐ржд cookie ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржмрзЗред
- ржкрж░ржмрж░рзНрждрзА рж╕ржорзЯ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи ржХрзЛржирзЛ ржкрзНрж░рзЛржЯрзЗржХрзНржЯрзЗржб рж░рж┐рж╕рзЛрж░рзНрж╕ ржПрж░ ржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржмрзЗ, рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ JWT ржХрзЗ ржпрж╛ржЪрж╛ржЗ ржХрж░ржмрзЗ рж╕рзЗржЗ Private Key ржПрж░ ржорж╛ржзрзНржпржорзЗред

ржпрзЗрж╣рзЗрждрзБ Session ржХрзЛржирзЛ рж╕рзНржерж╛ржирзЗ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯ ржирж╛ рж╕рзЗржЬржирзНржп Token based Authentication ржХрзЗ Stateless ржмрж▓рж╛ рж╣рзЯред

## ржХржЦржи Session based Authentication/Token based Authentication ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм?

- ржпрзЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗ user ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯ рж╕рзЗржЦрж╛ржирзЗ Session based Authentication ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЛред
- рж╕рж┐рж╖рзНржЯрзЗржо ржпржжрж┐ sensitive data рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рзЗ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ Session based authentication ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред
- ржЕржирзНржпрж╛ржирзНржп ржХрзНрж╖рзЗрждрзНрж░рзЗ Token based authentication ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред


## Section 18: Stateful and Stateless Architecture

### Stateful

ржПржЗ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗ ржбрзЗржЯрж╛ Store ржПржмржВ Maintain Application рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╣рзЯрзЗ ржерж╛ржХрзЗред FTTP рж╣рж▓ Statefulред

ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗ Stateful ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржПрж░ ржЙржжрж╛рж╣рж░ржг рж╣рж▓ Web Socketред Web Socket ржорзВрж▓ржд bidirectional, full-duplex protocolред ржПржЦрж╛ржирзЗ Server ржбрзЗржЯрж╛ store ржХрж░рзЗ рж░рж╛ржЦрзЗ, ржпрж╛рждрзЗ Client рж╕ржмрж╕ржорзЯ Server ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржкрж╛рзЯред

### Stateless

ржПржЗ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗ ржбрзЗржЯрж╛ Store ржПржмржВ Maintain Application рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╣рзЯ ржирж╛ ржмрж░ржВ ржХрзЛржирзЛ Database ржмрж╛ Cache ржП рж╕рзНржЯрзЛрж░ ржПржмржВ ржорзЗржЗржиржЯрзЗржЗржи рж╣рзЯред HTTP рж╣рж▓ Statelessред

HTTP рж╕ржмрж╕ржорзЯ Stateless Architecture, ржХрж╛рж░ржг ржХрзЛржирзЛ protected resource ржПрж░ ржЬржирзНржп ржЖржкржирж╛ржХрзЗ рж╕ржмрж╕ржорзЯ request ржХрж░рж╛рж░ рж╕ржорзЯ cookie/token рж╕рж╛ржерзЗ ржжрж┐рждрзЗ рж╣рзЯред server ржХржЦржирзЛ cookie/token рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрзЗ ржирж╛ред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: рж╕рзНржЯрзЗржЯрж▓рзЗрж╕-рж╕рзНржЯрзЗржЯржлрзБрж▓ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░**
## High Traffic in a Stateful Architecture

ржЖржорж░рж╛ ржЬрж╛ржирж┐ Stateful Archtecture ржбрзЗржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрзЗред ржПржЦржи ржпржжрж┐ request ржПрж░ ржкрж░рж┐ржорж╛ржг ржмрзЗрж╢рж┐ рж╣рзЯ рждржЦржи ржХрзЛржирзЛ ржПржХ ржХрж╛рж░ржгрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ рж╣ржУрзЯрж╛рж░ ржлрж▓рзЗ ржбрзЗржЯрж╛ ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, рждржЦржи ржбрзЗржЯрж╛ recover ржХрж░рж╛рж░ рж╕рзБржпрзЛржЧ ржерж╛ржХрзЗ ржирж╛ред

<p align="center">
  <img src="sections/stateless-stateful-architecture/images/stateful-1.png" alt="Stateful pic">
</p>

ржбрзЗржЯрж╛ ржирж╖рзНржЯ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗред

<p align="center">
  <img src="sections/stateless-stateful-architecture/images/stateful-2.png" alt="Stateful pic">
</p>

ржЕрждрж┐рж░рж┐ржХрзНржд Client Request ржПрж░ ржлрж▓рзЗ Client 1 ржПрж░ Data ржирж╖рзНржЯ рж╣ржУрзЯрж╛рж░ ржкрж░, рж╕рж╛рж░рзНржнрж╛рж░рзЗ Client 1 ржПрж░ ржбрзЗржЯрж╛ ржЖрж░ ржирж╛ржЗред

## Scalability - Stateful ржПржмржВ Stateless Architecture

ржЙржкрж░рзЗрж░ ржпрзЗ issue ржирж┐рзЯрзЗ ржмрж▓рж╛ рж╣рж▓рзЛ рждрж╛ Stateful Architecture ржП рж╣рзЯрзЗ ржерж╛ржХрзЗред ржПржХржЗ issue Stateless Architecture ржпрзЗрж░ржХржо ржХрж╛ржЬ ржХрж░рзЗ,

<p align="center">
  <img src="sections/stateless-stateful-architecture/images/stateless-1.png" alt="Stateless pic">
</p>

ржПржХрж╛ржзрж┐ржХ user рж╕рж╛рж░рзНржнрж╛рж░рзЗ call ржжрзЗрзЯрж╛ рж╢рзБрж░рзБ ржХрж░рж▓рзЛ, ржЖржорж╛ржжрзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж░рж┐рж╕рзЛрж░рзНрж╕ ржХржо рж╕рзЗржЬржирзНржп ржЖржорж╛ржжрзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХржЯрж┐ рж╕ржорзЯ ржХрзНрж░рзНржпрж╛рж╢ ржХрж░ржмрзЗред ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржорж░рж╛ Load Balancer ржжрж┐рзЯрзЗ Horizontal Scaling ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

<p align="center">
  <img src="sections/stateless-stateful-architecture/images/stateless-2.png" alt="Stateless pic">
</p>

ржпрзЗрж╣рзЗрждрзБ Stateless Architecture ржП рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржХрж┐ржВржмрж╛ ржЗржиржлрж░ржорзЗрж╢ржи рж╕ржВрж░ржХрзНрж╖ржи рж╣ржЪрзНржЫрзЗ ржирж╛, рж╕рзЗрж╣рзЗрждрзБ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпрзЗржХрзЛржи рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржкрзЗрж▓рзЗржЗ рж╣ржмрзЗред ржПрж░ржХржо ржЖржорж░рж╛ Stateless Architecture ржП ржЦрзБржм рж╕рж╣ржЬрзЗ Scale ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржПржХржЗ рж╕ржорж╕рзНржпрж╛ ржЖржорж░рж╛ Stateful Architecture ржП ржПржХржЗржнрж╛ржмрзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛ ржирж╛, ржХрж╛рж░ржг ржПржЗ Architecture ржП рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржнрж┐рждрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗрж░ ржЗржиржлрж░ржорзЗрж╢ржи/ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржи ржерж╛ржХрзЗред рждрж╛рж╣рж▓рзЗ ржХрж┐ржнрж╛ржмрзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░ржмрзЛ?

## ржХрж┐ржнрж╛ржмрзЗ Stateful ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржХрзЗ scale ржХрж░рж╛ ржпрж╛рзЯ?

ржПржЗ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржжрзБржЯрж┐ options ржЖржЫрзЗред Message Queue ржПржмржВ Pub-Subред

Pub-sub ржжрж┐рзЯрзЗ ржпржжрж┐ ржЖржорж░рж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рж┐, рждрж╛рж╣рж▓рзЗ ржкрзНрж░ржержорзЗ ржЖржорж╛ржжрзЗрж░ ржмрзБржЬрждрзЗ рж╣ржмрзЗ pub-sub ржХрж┐ред Pub-sub ржорж╛ржирзЗ рж╣рж▓рзЛ Publish and Subscribe patternред Publisher ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржмрзЗ ржПржмржВ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржмрж┐ржнрж┐ржирзНржи рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржмрж╛рж░ ржпрзЗ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рзЗ рж░рж╛ржЦржмрзЗ рждрж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЪрж▓рзЗ ржпрж╛ржмрзЗред Redis ржнрж╛рж▓рзЛржнрж╛ржмрзЗ Publish and Subscribe pattern provide ржХрж░рзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/stateless-stateful-architecture/images/stateful-3.png" alt="Stateful pic">
</p>

ржЙржкрж░рзЗрж░ ржЫржмрж┐ ржЕржирзБржпрж╛рзЯрзА ржЖржорж░рж╛ ржзрж░рзЗ рж░рж╛ржЦрж┐ user 1 ржПрж░ ржЗржиржлрж░ржорзЗрж╢ржи рж╕рж╛рж░рзНржнрж╛рж░ 1 ржПрж░ ржХрж╛ржЫрзЗ рж░рзЯрзЗржЫрзЗ, user 2 ржПрж░ ржЗржиржлрж░ржорзЗрж╢ржи рж╕рж╛рж░рзНржнрж╛рж░ 2 ржПрж░ ржХрж╛ржЫрзЗ ржПржмржВ user 3 ржПрж░ ржЗржиржлрж░ржорзЗрж╢ржи рж╕рж╛рж░рзНржнрж╛рж░ 3 ржП рж░рзЯрзЗржЫрзЗред user 1 ржпржЦржи ржбрзЗржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ 1 ржП ржкрж╛ржарж╛ржмрзЗ рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░ 1, publisher ржорж╛ржирзЗ redis ржП рж╕рзЗржЗ ржбрзЗржЯрж╛ publish ржХрж░ржмрзЗ, ржПржЦржи redis publisher ржП ржпржжрж┐ рж╕рж╛рж░рзНржнрж╛рж░ 2 ржПржмржВ 3 subscribe ржХрж░рзЗ рж░рж╛ржЦрзЗ рждрж╛рж╣рж▓рзЗ ржПрж░рж╛ржУ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗред рждрж╛рж░ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ 2 ржПржмржВ рзй, user 2 ржПржмржВ 3 ржПрж░ ржоржзрзНржпрзЗ ржбрзЗржЯрж╛ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред

ржПрж░ржХржо ржЖржорж░рж╛ Stateful Architecture рж╕рзНржХрзЗрж▓ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

## ржХрзЗржирзЛ TCP рж╕рзНржЯрзЗржЯржлрзБрж▓ ржПржмржВ HTTP рж╕рзНржЯрзЗржЯрж▓рзЗрж╕?

ржПржХржЬржи ржЗржЮрзНржЬрж┐ржирж┐рзЯрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ TCP ржХрзЗржи Stateful ржПржмржВ HTTP ржХрзЗржи Stateless ржПржЯрж┐ ржЬрж╛ржирж╛ ржЕрждрзНржпржирзНржд ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред TCP рж╣рж▓рзЛ Transmission ржкрзНрж░рзЛржЯрзЛржХрж▓ ржПржмржВ HTTP рж╣рж▓рзЛ (Hyper)Text Transfer ржкрзНрж░рзЛржЯрзЛржХрж▓ред

TCP рждрзЗ ржПржХржЯрж┐ host ржпржЦржи ржЕржирзНржп host ржПрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рзА рж╣рзЯ рждржЦржи host'ржЧрзБрж▓рзЛрж░ ржмрж░рзНрждржорж╛ржи ржЕржмрж╕рзНржерж╛ ржЕрж░рзНржерж╛рзО ржПржжрзЗрж░ sequence number, ржПржжрзЗрж░ ржнрж┐рждрж░рзЗрж░ acknowledgment ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯред ржПржЬржирзНржп TCP Statefulред

HTTP Stateless ржХрж╛рж░ржг ржкрзНрж░рждрж┐ржЯрж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рждрж╛рж░ ржкрзВрж░рзНржмрзЗрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржерзЗржХрзЗ ржнрж┐ржирзНржиред ржПржЦрж╛ржирзЗ ржпрзЗрж╣рзЗрждрзБ ржкрзНрж░рждрж┐ржЯрж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛрж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржи ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣ржЪрзНржЫрзЗ ржирж╛, рж╕рзЗрж╣рзЗрждрзБ HTTP Statelessред

## ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛ

- Stateless ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ ржХрж┐ ржХрж┐?
- Stateful ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ ржХрж┐ ржХрж┐?
- ржЖржкржирж┐ ржпржжрж┐ ржПржХржЬржи user рж▓ржЧржЗржи ржЕржмрж╕рзНржерж╛рзЯ ржЖржЫрзЗ ржХрж┐ ржирж╛ рждрж╛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ ржЪрж╛ржи рждрж╛рж╣рж▓рзЗ ржЖржкржирж┐ ржХрзЛржирзЛ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржПржмржВ ржХрзЗржирзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи?
- ржХрзЗржирзЛ TCP Stateful ржПржмржВ HTTP Stateless?
- WebSocket ржХрзЗржирзЛ Stateful?


## Section 19: Proxy

ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛрж░ рж╕ржорзЯ рж╕рж░рж╛рж╕рж░рж┐ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржирж╛ ржХрж░рзЗ ржЕржирзНржп ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рж▓рзЗ, рж╕рзЗржЗ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗ ржкрзНрж░ржХрзНрж╕рж┐ ржПржмржВ ржпрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржжрж┐рзЯрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ рж╕рзЗржЯрж╛ рж╣ржЪрзНржЫрзЗ ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░ред

ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗ ржкрзНрж░ржХрзНрж╕рж┐рж░ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг рж╣ржЪрзНржЫрзЗ NGINXред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржкрзНрж░ржХрзНрж╕рж┐**
## Forward Proxy ржПржмржВ Reverse Proxy

ржкрзНрж░ржХрзНрж╕рж┐ ржХрзЗ рзи ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рж╛ ржпрж╛рзЯ, ржлрж░ржУрзЯрж╛рж░рзНржб ржкрзНрж░ржХрзНрж╕рж┐ ржПржмржВ рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ред

ржлрж░ржУрзЯрж╛рж░рзНржб ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж▓, ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржпржЦржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржирж╛ ржХрж░рзЗ ржПржХржЯрж┐ ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ ржПржмржВ рж╕рзЗржЗ ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рж░рж╛рж╕рж░рж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред ржлрж░ржУрзЯрж╛рж░рзНржб ржкрзНрж░ржХрзНрж╕рж┐-рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржЬрж╛ржиржмрзЗ ржирж╛ ржХрзЛржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рждрж╛ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржЯрж┐ ржжрж┐рзЯрзЗржЫрзЗред

<p align="center">
  <img src="sections/proxy/images/forward-proxy.png" alt="Forward Proxy">
</p>

ржлрж░ржУрзЯрж╛рж░рзНржб ржкрзНрж░ржХрзНрж╕рж┐рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛ рж╣рж▓,

- ржХрж┐ржЫрзБ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж╕рж╛ржЗржЯ ржмрзНрж▓ржХ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржпрж╛рждрзЗ ржХрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржирж╛ ржкрж╛рж░рзЗред
- Caching ржПрж░ ржЬржирзНржп ржлрж░ржУрзЯрж╛рж░рзНржб ржкрзНрж░ржХрзНрж╕рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред

рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж▓, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ ржПржмржВ рж╕рзЗржЗ ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржмрж▓рзЗ ржжрж┐ржмрзЗ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржХрзЛржи рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржЯрж╛ ржирж┐ржмрзЗ, ржпрж╛рж░ ржлрж▓рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХржЦрзЛржиржЗ ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ ржХрзЛржи рж╕рж╛рж░рзНржнрж╛рж░ рждрж╛ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржЯрж┐ ржирж┐рзЯрзЗржЫрзЗред

<p align="center">
  <img src="sections/proxy/images/reverse-proxy.png" alt="Reverse Proxy">
</p>

рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕рзБржмрж┐ржзрж╛ рж╣рж▓,

- Load Distribution: Reverse proxy рж╕ржмрж╕ржорзЯ client ржерзЗржХрзЗ ржЖрж╕рж╛ request ржЧрзБрж▓рзЛржХрзЗ multiple backend server ржПрж░ ржоржзрзНржпрзЗ distribute ржХрж░рзЗред
- High Availability: Multiple рж╕рж╛рж░рзНржнрж╛рж░ ржерж╛ржХрж╛рж░ ржлрж▓рзЗ Distribution ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ High Availability ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
- Security: Reverse Proxy рждрзЗ ржпржЦржи рж░рзЗрж╕ржкржирзНрж╕ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХрзЗ ржжрзЗрзЯрж╛ рж╣рзЯ рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржЗржиржлрж░ржорзЗрж╢ржи/ip рж╕рж╛ржерзЗ ржХрж░рзЗ ржжрзЗрзЯрж╛ рж╣рзЯ ржирж╛ рж╕рзЗржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░ secured ржерж╛ржХрзЗред
- SSL/TLS Encryption and Decryption: Reverse Proxy SSL/TLS Encryption ржПржмржВ Decryption ржХрж░рзЗ ржерж╛ржХрзЗред

### Load Balancing

ржЖржорж░рж╛ ржпржжрж┐ ржкрзНрж░рж╛ржХрзНржЯрж┐ржХрж╛рж▓рж┐ ржмрж▓рждрзЗ ржпрж╛ржЗ, рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ ржПржХржЯрж┐ ржЯрзЗржХржирж┐ржХ ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржп ржерзЗржХрзЗ ржПржХ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж┐рж╕ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржЙржжрж╛рж╣рж░ржг рж╣рж▓, NGINXред

### ржХрзЗржи Load Balancing

ржзрж░рзБржи ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ ржЖржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░рж░рж╛ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржЫрзЗ,

<p align="center">
  <img src="sections/proxy/images/lb-1.png" alt="Load Balancing">
</p>

ржПржЦржи ржЖржорж╛ржжрзЗрж░ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗ ржХрзЛржи ржПржХрж╕ржорзЯ ржкрзНрж░ржЪрзБрж░ ржЗржЙржЬрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╢рзБрж░рзБ ржХрж░рж▓,

<p align="center">
  <img src="sections/proxy/images/lb-2.png" alt="Load Balancing">
</p>

ржПржд рж╕ржВржЦрзНржпржХ ржЗржЙржЬрж╛рж░рзЗрж░ рж▓рзЛржб рж╕рж╣рзНржп ржХрж░рждрзЗ ржирж╛ ржкрзЗрж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзНрж░рж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЗ ржкрзНрж░ржмрж▓рзЗржо рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ ржХрж░рж╛ рж╣рзЯред

рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ рж╣рж▓ ржЗржЙржЬрж╛рж░рзЗрж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржХрзЗ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗрж░ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржпрзЗржХрзЛржи ржПржХржЯрж┐рждрзЗ ржбрж┐рж╕ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛ред

<p align="center">
  <img src="sections/proxy/images/lb-3.png" alt="Load Balancing">
</p>

ржПрждрзЗржХрж░рзЗ ржЖржорж░рж╛ ржЕрждрзНржпрж╛ржзрж┐ржХ ржЗржЙржЬрж╛рж░рзЗрж░ рж▓рзЛржб ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржкрж╛рж░рж┐, ржПржмржВ ржЖржорж╛ржжрзЗрж░ рж╕рж╛ржЗржЯ ржХрзНрж░рж╛рж╢ рж╣ржУрзЯрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржХржорзЗ ржпрж╛рзЯред

Load Balancer рж╕рж╛ржзрж╛рж░ржгржд рзйржЯрж┐ ржкржжрзНржзрждрж┐рждрзЗ ржорзЗржирзЗ ржЪрж▓рзЗ рж▓рзЛржб ржбрж┐рж╕ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, рж░рж╛ржЙржирзНржб рж░ржмрж┐ржи, рж▓рзЛржб ржмрзЗржЗржЬржб ржбрж┐рж╕ржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржи ржПржмржВ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзЗржЗржЬржб ржбрж┐рж╕ржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржиред

### Load Balancer ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ

рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржмрж┐ржзрж╛ рж╣рж▓,

- рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ (Scalability), рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░ рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржкржжрзНржзрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж╛ржжрзЗрж░ ржУрзЯрзЗржмрж╕рж╛ржЗржЯржХрзЗ рж╕рзНржХрзЗрж▓ ржХрж░рзЗ ржерж╛ржХрзЗред
- ржПржнрж╛ржЗрж▓рзНржпрж╛ржмрж┐рж▓рж┐ржЯрж┐ (Availability), ржХрзЛржи рж╕рж╛рж░рзНржнрж╛рж░ ржпржжрж┐ ржХрзЛржи ржХрж╛рж░ржгрзЗ ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░рзЗрж░ рж╕рзЗржЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржХрзЗ ржЕржирзНржп рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

### рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ NGINX

NGINX ржПржХржЯрж┐ ржЬржиржкрзНрж░рж┐рзЯ рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ред ржПрж░ ржоржд ржЖрж░рзЛ ржХрж┐ржЫрзБ рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж░рзЯрзЗржЫрзЗред рж╕рж╛ржзрж╛рж░ржгржд NGINX рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржХрзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ ржоржзрзНржп ржерзЗржХрзЗ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржлрж░ржУрзЯрж╛рж░рзНржб ржХрж░рзЗ ржжрзЗрзЯ, ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПрж░ ржЬржирзНржпред

NGINX ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ рж╕рж╛ржзрж╛рж░ржгржд ржПрж░ржХржо ржерж╛ржХрзЗред

```nginx
worker_processes 1;  # Number of worker processes
events {
  worker_connections 1024;  # Maximum number of simultaneous connections per worker
}

http {
  include       mime.types;  # Include MIME types
  default_type  application/octet-stream;  # Default MIME type

  sendfile          on;  # Enable efficient file transfers
  keepalive_timeout 65;  # Timeout for persistent connections

  server {
    listen 80;  # Listen on port 80 (HTTP)
    server_name example.com www.example.com;  # Your domain names

    location / {
      root /var/www/html;  # Root directory for your files
      index index.html;  # Default file to serve
    }

    error_page 404 /404.html;  # Custom error page
  }
}
```

ржПржЦрж╛ржирзЗ / рж╕ржВржпрзБржХрзНржд рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ /var/www/html ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рж░ index.html ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржмрзЗред

ржПржЦржи ржЖржкржирж┐ ржпржжрж┐ Node.js NGINX ржжрзНржмрж╛рж░рж╛ ржкрзЯрзЗржирзНржЯ ржХрж░рзЗ ржжрж┐рждрзЗ ржЪрж╛ржи,

```nginx
server {
  listen 80 default_server;
  listen [::]:80 default_server;
  server_name  localhost;

  # Load configuration files for the default server block.
  include /etc/nginx/default.d/*.conf;

  location /api/ {
    proxy_pass http://localhost:4000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }
}
```

ржЙржкрж░рзЗрж░ server ржмрзНрж▓ржХ ржПрж░ ржоржзрзНржпрзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ, рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ ржоржзрзНржпрзЗ /api ржерж╛ржХрж▓рзЗ рждрж╛ ржЖржорж╛ржжрзЗрж░ node.js ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржХрзЗ рж╣рж┐ржЯ ржХрж░ржмрзЗ, ржпрж╛рж░ ржкрзЛрж░рзНржЯ рж╣ржЪрзНржЫрзЗ 4000ред

ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ NGINX ржПрж░ Load Balancing ржПрж░ рж╕рзБржмрж┐ржзрж╛ ржирж┐рждрзЗ ржкрж╛рж░ржмрзЛ, ржпржжрж┐ ржЖржорж░рж╛ Performance, Reliability ржПржмржВ Scalability ржЪрж┐ржирзНрждрж╛ ржХрж░рж┐ред

NGINX Load Balancer ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рж░рзНржмрзЛрждрзНрждржо рж╕ржорзЯ ржЖржорж╛ржжрзЗрж░ consider ржХрж░рждрзЗ рж╣ржмрзЗ,

- ржпржЦржи ржжрзЗржЦржмрзЛ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржЯрзНрж░рж╛ржлрж┐ржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ scalability ржкрзНрж░рзЯрзЛржЬржиред
- ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗ Downtime ржХржорж╛ржирзЛрж░ ржкрзНрж░рзЯрзЛржЬржиред
- ржпржЦржи ржЖржорж░рж╛ Distributed System рждрзИрж░рзА ржХрж░ржмрзЛред

ржПрж╕ржм ржХрзНрж╖рзЗрждрзНрж░рзЗ рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ ржХрж░ржмрзЛред

ржЙржкрж░рзЗрж░ NGINX ржХрзЛржб ржХрзЗ рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ ржХрж░рж▓рзЗ,

```nginx
http {
  upstream backend_servers {
    # Define the backend servers
    server 127.0.0.1:4000;  # Primary backend server
    server 127.0.0.1:4001;  # Secondary backend server
    server 127.0.0.1:4002;  # Tertiary backend server
  }

  server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name localhost;

    # Load configuration files for the default server block.
    include /etc/nginx/default.d/*.conf;

    location /api/ {
      proxy_pass http://backend_servers;  # Pass requests to the load balancer
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_cache_bypass $http_upgrade;

      # Additional settings for proxying
      proxy_connect_timeout 60s;
      proxy_read_timeout 60s;
      proxy_send_timeout 60s;
    }
  }
}
```

### ржХрж┐ржнрж╛ржмрзЗ рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐рждрзЗ HTTPS ржХрж╛ржЬ ржХрж░рзЗ?

ржпржЦржи ржкрзНрж░ржХрзНрж╕рж┐ рж╕рж╛рж░рзНржнрж╛рж░(NGINX) HTTPS рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзЗрзЯрзЗ ржерж╛ржХрзЗ рждржЦржи рзиржЯрж┐ ржзрж╛ржк ржкрзНрж░рж╕рзЗрж╕ рж╣рзЯред

- SSL/TLS Handshake ржзрж╛ржк
- Request Processing ржзрж╛ржк

#### SSL/TLS Handshake ржзрж╛ржк

ржпржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЫрзЗ ржерзЗржХрзЗ https рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛рзЯ, рждржЦржи

- Client Hello: ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ TLS ржнрж╛рж░рзНрж╕ржи ржПржмржВ Cipher Suites ржкрзНрж░рзЗрж░ржг ржХрж░рзЗред
- Server Hello: NGINX рждрж╛рж░ Cipher Suite ржПржмржВ TLS ржнрж╛рж░рзНрж╕ржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред
- Certificate Exchange: NGINX рждрж╛рж░ SSL рж╕рж╛рж░рзНржЯрж┐ржлрж┐ржХрзЗржЯ, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржкрзНрж░рзЗрж░ржг ржХрж░рзЗред
- Key Exchange: ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржЯрж┐ржлрж┐ржХрзЗржЯ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ ржПржмржВ ржПржХржЯрж┐ Session key рждрзИрж░рзА ржХрж░рзЗред
- Session Established: рж╕рзБрж░ржХрзНрж╖рж┐ржд communication рж╢рзБрж░рзБред

(Cipher Suites ржХрзА? ржПржЯрж┐ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Alogirithm ржПрж░ рж╕ржорж╖рзНржЯрж┐ ржпрж╛ рж╕рзБрж░ржХрзНрж╖рж┐ржд ржирзЗржЯржУрзЯрж╛рж░рзНржХ connection рждрзИрж░рзА ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ ржерж╛ржХрзЗред ржПрждрзЗ ржорзВрж▓ржд encryption, authentication ржПржмржВ key exchange method ржЧрзБрж▓рзЛ ржЙрж▓рзНрж▓рзЗржЦ ржерж╛ржХрзЗред)

#### Request Processing ржзрж╛ржк

рж╕рзБрж░ржХрзНрж╖рж┐ржд communication рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржкрж░рзЗ,

- Request Decryption: Nginx HTTPS рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржХрзЗ рж╕рзЗржЗ session key ржбрж┐ржХрзНрз░рж┐ржкрзНржЯ ржХрж░рзЗред
- Request Processing: ржбрж┐ржХрзНрз░рж┐ржкрзНржЯ ржХрж░рж╛ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржХрзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗред
- Response Encryption: рж░рзЗрж╕ржкржирзНрж╕ ржПржиржХрзНрж░рж┐ржкрзНржЯ ржХрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред

ржжрзБржЯрж┐ ржзрж╛ржк(SSL/TLS Handshake, Request Processing) control ржХрж░рж╛рж░ ржЬржирзНржп NGINX ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржерж╛ржХрзЗ,

```nginx
server {
  listen 443 ssl; # Enables HTTPS on port 443
  server_name example.com;
  ssl_certificate /etc/nginx/ssl/example.crt;
  ssl_certificate_key /etc/nginx/ssl/example.key;

  location / {
    proxy_pass http://backend_server;
  }
}
```

ржПржЦрж╛ржирзЗ ssl_certificate ржПржмржВ ssl_certificate_key ржорзВрж▓ржд SSL/TLS Handshake ржПрж░ ржЕржВрж╢ред ржЕржирзНржпржжрж┐ржХрзЗ location ржПржмржВ proxy_pass, Request Processing ржПрж░ ржЕржВрж╢ред

### NGINX Load Balancer ржПржмржВ AWS Elastic Load Balancer

NGINX Load Balancer ржорзВрж▓ржд ржПржХрж╛ржзрж┐ржХ ржЗржиржХрж╛ржорж┐ржВ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржоржзрзНржп ржерзЗржХрзЗ ржПржХ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗ ржжрзЗрзЯред

<p align="center">
  <img src="sections/proxy/images/nginx_lb.png" alt="Load Balancing">
</p>

AWS ELB ржорзВрж▓ржд ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХржЧрзБрж▓рзЛржХрзЗ ржПржХ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрж╛рж░рзНржЧрзЗржЯ ржПрж░ ржоржзрзНржпрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗред ржПржЦрж╛ржирзЗ ржЯрж╛рж░рзНржЧрзЗржЯ рж╣рждрзЗ ржкрж╛рж░рзЗ EC2 Instanceред

<p align="center">
  <img src="sections/proxy/images/aws_elb.png" alt="Load Balancing">
</p>

ржжрзБржЯрж┐рж░ ржоржзрзНржпрзЗ рждржлрж╛рзО NGINX Load Balancer рж╕рж░рж╛рж╕рж░рж┐ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓рзЗржнрзЗрж▓ ржПрж░ ржоржзрзНржпрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗ ржЖрж░ AWS ELB ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рж▓рзЗржнрзЗрж▓ ржПрж░ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗред ржЖржорж░рж╛ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ Availability ржЬржирзНржп ржжрзБржЯрзЛржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

### Node.js-ржПрж░ рж╕рж╛ржерзЗ NGINX рж░рж┐ржнрж╛рж░рзНрж╕ ржкрзНрж░ржХрзНрж╕рж┐ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржХрж╛рж░ржг ржХрзА?

Node.js ржжрж┐рзЯрзЗ Web Server рждрзИрж░рзА ржХрж░рж╛ ржпрж╛рзЯ ржПржмржВ NGINX ржирж┐ржЬрзЗржЗ Web Serverред

- Node js ржорзВрж▓ржд ржЖржорж╛ржжрзЗрж░ ржЬрж╛ржнрж╛рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржХрзЛржбржХрзЗ ржмрзНрж░рж╛ржЙрж╕рж╛рж░ ржПрж░ ржмрж╛рж╣рж┐рж░рзЗ ржЪрж╛рж▓рж╛рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ, ржЕржирзНржпржжрж┐ржХрзЗ NGINX static content(ржпрзЗржоржи HTML, CSS, JavaScript) рж╕рж╛рж░рзНржн ржХрж░рзЗ ржерж╛ржХрзЗред

- NGINX Reverse Proxy рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЯрж┐ ржЯрзНрж░рж╛ржлрж┐ржХ ржлрзНрж▓рзЛ ржХрзЗ ржПржХрж╛ржзрж┐ржХ ржирзЛржб ржЬрзЗржПрж╕ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ ржП ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

- NGINX ржмрж┐ржнрж┐ржирзНржи ржбрзЛржорзЗржЗржи ржУ рж╕рж╛ржмржбрзЛржорзЗржЗржи (ржпрзЗржоржи, app.example.com) ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржирзЛржб ржЬрзЗржПрж╕ ржлрзНрж▓рзЗржХрзНрж╕рж┐ржмрж▓ ржирж╛ред

ржПржЧрзБрж▓рзЛ ржерзЗржХрзЗ ржмрзБржЭрж╛ ржпрж╛рзЯ ржирзЛржб ржЬрзЗржПрж╕ General-Purpose Web Server ржирж╛ред ржПржЬржирзНржп ржирзЛржб ржЬрзЗржПрж╕ ржПрж░ рж╕рж╛ржерзЗ General-Purpose Web Server рж╣рж┐рж╕рзЗржмрзЗ NGINX ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред


## Section 20: REST Api

REST Api ржЬрж╛ржирж╛рж░ ржкрзВрж░рзНржмрзЗ ржЖржорж╛ржжрзЗрж░ ржмрзБржЭрждрзЗ рж╣ржмрзЗ рж░рзЗрж╕рзНржЯ(REST) ржорж╛ржирзЗ ржХрж┐, REST ржорж╛ржирзЗ рж╣рж▓ Representational State Transfer ржпрж╛рж░ ржорж╛ржирзЗ ржжрж╛рзЬрж╛рзЯ ржПржЯрж┐ ржПржХржЯрж┐ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рж╛рж▓ рж╕рзНржЯрж╛ржЗрж▓ ржпрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ рж╕рзНржЯрзЗржЯ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ ржПрж░ ржЬржирзНржпред ржПржЦржи REST Api рж╣рж▓, ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржПржкрж┐ржЖржЗ ржХржиржнрзЗржирж╢ржи ржпрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржжрзБржЯрж┐ ржПржирзНржб(ржпрзЗржоржиржГ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░) ржПрж░ ржоржзрзНржпрзЗ рж╕рзНржЯрзЗржЯ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ ржХрж░рж╛ржХрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛рж░ ржЬржирзНржпред

рж╕рзНржЯрзЗржЯ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржХрж┐ржЫрзБ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ HTTP Methods ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ, GET, POST, PUT, PATCH & DELETE, ржкрзНрж░рждрж┐ржЯрж┐ ржорзНржпрж╛ржерзЛржбрзЗрж░ ржмрзНржпржмрж╣рж╛рж░ ржЬрж╛ржирждрзЗ REST Api рж╕рзЗржХрж╢ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржиред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: рж░рзЗрж╕рзНржЯ ржПржкрж┐ржЖржЗ**
## Principal of REST API

### Client ржПржмржВ Server ржкрзГржержХ

REST Architecture ржПрж░ ржкрзНрж░ржзрж╛ржи Principal рж╣рж▓ Client ржПржмржВ Server ржкрзГржержХ ржерж╛ржХрждрзЗ рж╣ржмрзЗред Client рж╢рзБржзрзБ Request ржХрж░ржмрзЗ ржПржмржВ Server Response ржжрж┐ржмрзЗред User Interface ржПржмржВ Data Storage ржкрзГржержХ ржерж╛ржХржмрзЗред

### Stateless

ржкрзНрж░рждрж┐ржЯрж┐ Api ржПрж░ Request ржПржмржВ Response ржкрзВрж░рзНржмрзЗрж░ ржПржмржВ ржкрж░ржмрж░рзНрждрзА Request ржПржмржВ Response ржЙржкрж░ ржХрзЛржирзЛ ржирж┐рж░рзНржнрж░ ржХрж░ржмрзЗ ржирж╛ред

### Cacheable

Stateless рж╣ржУрзЯрж╛рж░ ржкрж░рзЗржУ ржЖржорж░рж╛ Request ржПржмржВ Response ржХрзЗ Cache ржХрж░рждрзЗ ржкрж╛рж░ржмред

REST Api ржорзВрж▓ржд рзл'ржЯрж┐ ржкрзНрж░ржзрж╛ржи HTTP Methods ржжрзНржмрж╛рж░рж╛ рж╕рзНржЯрзЗржЯ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржерж╛ржХрзЗред

## GET

GET ржорзНржпрж╛ржерзЛржб ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХрж┐ржЫрзБ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж░рж┐рж░рзНрж╕рзЛрж╕ ржПрж░ ржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЗржЙржЬрж╛рж░ржжрзЗрж░ рж▓рж┐рж╕рзНржЯ ржПрж░ ржЬржирзНржп рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ,

<p align="center">
  <img src="sections/rest-api/images/get.png" alt="GET request">
</p>

## POST

POST ржорзНржпрж╛ржерзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рж┐ ржХрж░рж╛рж░ рж▓ржХрзНрж╖рзНржпрзЗ, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржирждрзБржи ржЗржЙржЬрж╛рж░ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ POST рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ,

<p align="center">
  <img src="sections/rest-api/images/post.png" alt="POST request">
</p>

## PUT

PUT ржорзНржпрж╛ржерзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рж┐ ржХрж░рж╛рж░ рж▓ржХрзНрж╖рзНржпрзЗ ржХрж┐ржВржмрж╛ ржХрзЛржи рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж░рж┐рж╕рзЛрж░рзНрж╕ржХрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗред

ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржи ржЗржЙржЬрж╛рж░рзЗрж░ ржирж╛ржо ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ,

<p align="center">
  <img src="sections/rest-api/images/put.png" alt="PUT request">
</p>

## PATCH

PATCH ржорзНржпрж╛ржерзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржХрзЛржи рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж░рж┐рж╕рзЛрж░рзНрж╕рзЗрж░ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржнрзНржпрж╛рж▓рзБ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗред

ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржи ржЗржЙржЬрж╛рж░рзЗрж░ рж╢рзБржзрзБ ржЗржорзЗржЗрж▓ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ,

<p align="center">
  <img src="sections/rest-api/images/patch.png" alt="PATCH request">
</p>

## DELETE

DELETE ржорзНржпрж╛ржерзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ ржХрзЛржи рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ рж░рж┐рж╕рзЛрж░рзНрж╕ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗред

ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржи рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржЗржЙржЬрж╛рж░ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржпрж╛рж░ ржирж╛ржо рж╣ржмрзЗ John,

<p align="center">
  <img src="sections/rest-api/images/delete.png" alt="DELETE request">
</p>

## POST ржПржмржВ PUT ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп

POST ржПржмржВ PUT ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп рж╣рж▓, POST рж╕ржмрж╕ржорзЯ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рж┐ ржХрж░рзЗ ржерж╛ржХрзЗ ржпрзЗржЦрж╛ржирзЗ PUT рж╣рж▓ idempotent ржорж╛ржирзЗ рж░рж┐рж╕рзЛрж░рзНрж╕ ржпржжрж┐ ржЗрждрж┐ржоржзрзНржпрзЗ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ рж╕рзЗ ржЖрж░ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рж┐ ржХрж░ржмрзЗ ржирж╛ред

## PUT ржПржмржВ PATCH ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп

PUT ржПржмржВ PATCH ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп рж╣рж▓, PUT ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХржЯрж┐ рж╕рзНржкрзЗрж╕рж┐ржлрж┐ржХ ржбрж╛ржЯрж╛рж░ ржХрж┐ржЫрзБ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржЪрж╛ржЗрж▓рзЗ рждрж╛ржХрзЗ рж╕рзЗржЗ ржбрж╛ржЯрж╛рж░ рж╕ржорзНржкрзВрж░рзНржг Attributes рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗ ржПржмржВ PATCH ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рзЗржЗ ржбрж╛ржЯрж╛рж░ ржпрзЗ Attribute ржкрж░рж┐ржмрж░рзНрждржи рж╣ржмрзЗ рж╕рзЗржЗ Attribute ржЯрж╛ржЗ рж╢рзБржзрзБ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред

## HTTP Headers

REST API рждрзЗ Client ржПржмржВ Server ржПржХрзЗ ржЕржкрж░рзЗрж░ ржоржзрзНржпрзЗ ржХрж┐ржЫрзБ ржЕрждрж┐рж░рж┐ржХрзНржд рждржерзНржп ржЖржжрж╛ржи-ржкрзНрж░ржзрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ рждрж╛ ржХрж░рж╛ рж╣рзЯ HTTP Headers ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

HTTP Headers ржХрзЗ рзк category рждрзЗ ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯ,

- Request headers: Client ржерзЗржХрзЗ Server
- Response headers: Server ржерзЗржХрзЗ Client
- Representation headers: Information about the body of the resource.
- Payload headers: Information about the payload data.

## REST API best practices

- JSON format ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржПржмржВ рж░рзЗрж╕ржкржирзНрж╕рзЗрж░ ржкрж╛ржарж╛ржирзЛрж░ рж╕ржорзЯред ржЙржжрж╛рж╣рж░ржг,

```js
router.get("/users", (req, res) => {
  res.status(200).json(users); // response format is JSON
});
```

- Noun ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛, verb ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗред ржЙржжрж╛рж╣рж░ржг,

```txt
--- recommanded ---
'/users'
'/users/{id}'
'/products'

--- not recommanded ---
'/get-users'
'/get-user'
'/fetch-products'
```

- Filtering, Sorting ржПрж░ ржЬржирзНржп Query Params ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред ржЙржжрж╛рж╣рж░ржг,

{api_endpoint}/posts?tags=react

? ржПрж░ ржкрж░рзЗрж░ ржЕржВрж╢ржЯрзБржХрзБ рж╣рж▓ Query Parameters.

- Health check endpoint рждрзИрж░рзА ржХрж░рзЗ рж░рж╛ржЦрж╛ред ржЙржжрж╛рж╣рж░ржг, /health - ржпрж╛ ржмрж▓рзЗ ржжрж┐ржмрзЗ рж╕рж╛рж░рзНржнрж┐рж╕ healthy ржЖржЫрзЗ ржХрж┐ ржирж╛ред

- ISO 8601 UTC dates ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред ржпржЦржи ржЖржорж░рж╛ Time ржПржмржВ Date ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░ржмрзЛ рждржЦржи ISO 8601 UTC dates ржЖржХрж╛рж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЛред ржирж┐рж░рзНржжрж┐рж╖рзНржЯ time-zone ржП ржжрзЗржЦрж╛ржирзЛ рждрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛ржЗржб ржПрж░ ржмрж┐рж╖рзЯред

- ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ ржЬржирзНржп ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Status Code ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред

## Rest API security best practices

- HTTPS ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред
- properly Authorization implement ржХрж░рж╛ред
- Rate Limiter ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред
- User ржПрж░ ржжрзЗрзЯрж╛ Input, Validate ржХрж░рж╛ред
- OWASP API Security Risks ржирж┐рзЯрзЗ рж╕рж╛ржмржзрж╛ржи ржерж╛ржХрж╛ред

## Rest API performance best practices

### Caching

<a href="https://github.com/lahin31/system-design-bangla#section-19-caching">Caching ржирж┐рзЯрзЗ ржЖржорж╛рж░ рж▓рж┐ржЦрж╛ ржкрзЬрждрзЗ ржкрж╛рж░рзЗржи</a>

### CDN

<a href="https://github.com/lahin31/system-design-bangla#section-20-content-delivery-network">Caching ржирж┐рзЯрзЗ ржЖржорж╛рж░ рж▓рж┐ржЦрж╛ ржкрзЬрждрзЗ ржкрж╛рж░рзЗржи</a>

### Pagination

рзи рж░ржХржорзЗрж░ pagination techniques ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖржЫрзЗред Offset ржПржмржВ Cursorред ржЖржорж╛ржжрзЗрж░ requirements ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржЖржорж░рж╛ pagination technique ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмред

### Data Compression

Data Compressed ржХрж░рж▓рзЗ ржЖржорж░рж╛ API response ржПрж░ size ржХржорж╛рждрзЗ ржкрж╛рж░ржмрзЛред

### Unnecessary property send to payload and response

Payload ржПржмржВ Response ржПрж░ ржоржзрзНржпрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржкрзНрж░ржкрж╛рж░рзНржЯрж┐(object, array) ржкрж╛ржарж╛ржмрзЛ ржирж╛ред

## HTTP Status Code

HTTP Status Code ржЖржорж╛ржжрзЗрж░ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ HTTP Method(GET, POST, PUT) ржПрж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рж╕рж╛ржХрж╕рзЗрж╕ржлрзБрж▓ рж╣рзЯрзЗржЫрзЗ ржХрж┐ ржирж╛ред

ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржПржХржЯрж┐ ржЙржУржо ржкрзНрж░рж╛ржХржЯрж┐рж╕ ржмрж▓рзЗ ржЧржгрзНржп ржХрж░рж╛ рж╣рзЯред

HTTP Status Code ржХрзЗ ржкрж╛ржБржЪ рж╢рзНрж░рзЗржгрж┐рждрзЗ ржнрж╛ржЧ ржХрж░рж╛ рж╣рзЯ,

- Informational Responses(100-199)
- Successfull Responses(200-299)
- Redirects(300-399)
- Client Errors(400-499)
- Server Errors(500-599)

ржирж┐ржЪрзЗ ржХрж┐ржЫрзБ HTTP Status Code ржПрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржмрж▓рж╛ рж╣рж▓,

- 200, ржорж╛ржирзЗ рж╣рж▓ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рж╕рж╛ржХрж╕рзЗрж╕ рж╣рзЯрзЗржЫрзЗред
- 201, ржорж╛ржирзЗ рж╣рж▓ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рж╕рж╛ржХрж╕рзЗрж╕ рж╣рзЯрзЗржЫрзЗ ржПржмржВ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗред (ржЙржжрж╛рж╣рж░ржгржГ ржирждрзБржи ржЗржЙржЬрж╛рж░ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи)
- 400, ржорж╛ржирзЗ рж╣рж▓ рж╕рж╛рж░рзНржнрж╛рж░ ржмрзБржЬрждрзЗ ржкрж╛рж░ржЫрзЗ ржирж╛ client ржжрзНржмрж╛рж░рж╛ ржХрзЛржи ржнрзБрж▓ рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕ ржмрж╛ ржнрзБрж▓ рждржерзНржп ржжрзЗрзЯрж╛рж░ ржЬржирзНржпред
- 401, рж╣рж▓ unauthorized, ржорж╛ржирзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржоржи ржХрж┐ржЫрзБрж░ ржЬржирзНржп рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рзЗржЫрзЗ ржпрж╛рж░ ржЬржирзНржп рж╕рзЗ authorized ржирж╛ред
- 404, ржорж╛ржирзЗ рж╣рж▓ рж╕рж╛рж░рзНржнрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ржЯрж┐ ржЦрзБржБржЬрзЗ ржкрж╛рзЯ ржирж╛ржЗред
- 409, ржорж╛ржирзЗ request ржПрж░ ржоржзрзНржпрзЗ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ conflict ржЖржЫрзЗред
- 500, ржорж╛ржирзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржПржоржи ржХрж┐ржЫрзБ Error ржкрзЗрзЯрзЗржЫрзЗ ржпрж╛ рж╕рзЗ ржЬрж╛ржирзЗ ржирж╛ ржХрж┐ржнрж╛ржмрзЗ ржарж┐ржХ ржХрж░ржмрзЗред

ржЖрж░ржУ ржЬрж╛ржирждрзЗ ржПржЗ рж▓рж┐ржВржХрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗржи, https://developer.mozilla.org/en-US/docs/Web/HTTP/Status

## REST API ржПржмржВ GraphQL ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп

- Data Fetching

  - REST API рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржбрж┐ржлрж╛ржЗржи ржХрж░рзЗ ржжрзЗрзЯ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ ржЧржаржиред
  - GraphQL ржП ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ рж╕рж╛ржерзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржХрзЛржи ржХрзЛржи ржбрзЗржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржкрзНрж░рзЯрзЛржЬржи, рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржжрж┐рзЯрзЗ ржерж╛ржХрзЗред

- Over Fetching of data

  - REST API рждрзЗ ржпрзЗрж╣рзЗрждрзБ рж╕рж╛рж░рзНржнрж╛рж░ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ ржЧржаржи ржбрж┐ржлрж╛ржЗржи ржХрж░рзЗ ржжрзЗрзЯ рж╕рзЗржЬржирзНржп data overfetching рж╣ржУрзЯрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржерж╛ржХрзЗред
  - GraphQL ржП ржпрзЗрж╣рзЗрждрзБ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ рж╕рж╛ржерзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржХрзЛржи ржХрзЛржи ржбрзЗржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржкрзНрж░рзЯрзЛржЬржи, рж╕рзЗржЬржирзНржп data overfetching рж╣ржУрзЯрж╛рж░ рж╕ржорзНржнрж╛ржмржирж╛ ржерж╛ржХрзЗ ржирж╛ред

- Error Handling

  - REST API рж╣рж▓ Weakly Typed ржпрж╛рж░ ржорж╛ржирзЗ ржпрзЗрж╕ржм ржбрзЗржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХрзЗ ржЕржкрж░рзЗрж░ ржоржзрзНржпрзЗ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи ржХрж░ржмрзЗ рж╕рзЗржЧрзБрж▓рзЛрж░ ржЯрж╛ржЗржк well-defined ржПржмржВ validated рж╣рждрзЗ рж╣ржмрзЗ ржирж╛ред
  - GraphQL рж╣рж▓ Strongly Typed ржорж╛ржирзЗ ржбрзЗржЯрж╛рж░ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ ржПржмржВ ржпрзЗрж╕ржм ржбрзЗржЯрж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ рж╕рзЗржЧрзБрж▓рзЛрж░ ржЯрж╛ржЗржк well-defined ржПржмржВ validated ржерж╛ржХрждрзЗ рж╣ржмрзЗред

## Idempotent API

ржпрзЗрж╕ржм API ржПржоржи ржХрзЛржирзЛ рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рзА ржХрж░рзЗ ржирж╛ ржпрж╛ ржЗрждрж┐ржоржзрзНржпрзЗ рждрзИрж░рзА рж╣рзЯрзЗ рж░рзЯрзЗржЫрзЗ, рж╕рзЗржЗ API ржЧрзБрж▓рзЛржХрзЗ Idempotent API ржмрж▓рзЗред GET, PUT ржПржмржВ DELETE ржПржЧрзБрж▓рзЛ Idempotent APIред ржЖрж░ POST ржПржмржВ PATCH Idempotent API ржирзЯред

ржЖржкржирж┐ ржпржЦржи GET api ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржмрж╛рж░ ржмрж╛рж░ ржХрж┐ржВржмрж╛ api retry ржХрж░рзЗ api call ржХрж░ржмрзЗржи рждржЦржи ржЖржкржирж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐рж╕рзЛрж░рзНрж╕ ржкрж╛ржмрзЗржи, ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржХрзЛржирзЛ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рзА рж╣ржмрзЗ ржирж╛ред ржПржХржЗ ржнрж╛ржмрзЗ PUT ржПржмржВ DELETE ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ рж╕ржорж╛ржи, ржРржЦрж╛ржирзЗ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рзА рж╣ржмрзЗ ржирж╛ ржмрж░ржВ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐рж╕рзЛрж░рзНрж╕ ржЖржкржбрзЗржЯ ржПржмржВ ржбрж┐рж▓рж┐ржЯ рж╣ржмрзЗред ржпрзЗржЦрж╛ржирзЗ POST ржПржмржВ PATCH рж╕ржмрж╕ржорзЯ ржирждрзБржи рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рзА ржХрж░ржмрзЗред

### ржХрзЗржи ржПржмржВ ржХрж┐ржнрж╛ржмрзЗ API ржХрзЗ Idempotent ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯ?

ржзрж░рзБржи ржЖржкржирж┐ ржХрзЛржирзЛ ржХрж┐ржЫрзБрж░ ржЬржирзНржп Payment ржХрж░ржЫрзЗржи, ржЖржкржирж┐ Payment button click ржХрж░рж╛рж░ ржкрж░ ржЖржкржирж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗ ржПржЦржи ржкрзНрж░рж╕рзЗрж╕ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ ржЖржкржирж┐ ржХрзЛржирзЛржнрж╛ржмрзЗ ржЖржмрж╛рж░ Payment button click ржХрж░рж▓рзЗржиред ржПржЦржи рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржЖржкржирж╛рж░ ржжрзБржЯрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖржЫрзЗ, рж╕рж╛рж░рзНржнрж╛рж░ ржЖржкржирж╛рж░ ржжрзБржЯрж┐ payment request ржкрзНрж░рж╕рзЗрж╕ ржХрж░ржмрзЗред ржПрждрзЗ ржХрж░рзЗ ржЖржкржирж╛рж░ payment ржПржХржмрж╛рж░ ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржжрзБржмрж╛рж░ (payment) рж╣рзЯрзЗ ржЧрзЗрж▓рзЛред

ржПрж░ржХржо ржЖрж░рзЛ ржЕржирзЗржХ scenario ржЖржЫрзЗ ржпрзЗржЦрж╛ржирзЗ API ржорж╛ржирзЗ POST API Idempotent ржирж╛ рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржгрзЗ ржЖржкржирж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржо ржПрж░ End User ржПрж░ ржХрзНрж╖рждрж┐ рж╣рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржорж░рж╛ ржПржХржЯрж┐ ржкржжрзНржзрждрж┐ ржорзЗржирзЗ ржЪрж▓рждрзЗ ржкрж╛рж░рж┐,

- рж╕рзНржЯрзЗржк рзз: ржкрзНрж░рждрж┐ржЯрж┐ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржП ржЖржорж░рж╛ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ (UUID/ULID) ржнрзНржпрж╛рж▓рзБ HEADER ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржХрж░рзЗ ржжрж┐рзЯрзЗ ржжрж┐ржмред
- рж╕рзНржЯрзЗржк рзи: ржкрзНрж░ржержоржмрж╛рж░ ржЖржорж░рж╛ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржХрж┐ржВржмрж╛ cache ржПрж░ ржнрж┐рждрж░ ржЗржЙржирж┐ржХ ржнрзНржпрж╛рж▓рзБ ржПрж░ рж╕рзНржЯрзЗржЯ processing рж╣рж┐рж╕рж╛ржмрзЗ рж░рзЗржЦрзЗ ржжрж┐ржмред

-------- ржПрждрзЗржЗ ржкрзНрж░ржержоржмрж╛рж░рзЗрж░ ржоржд API request рждрж╛рж░ response ржкрзЗрзЯрзЗ ржпрж╛ржмрзЗ -------

- рж╕рзНржЯрзЗржк рзй: ржкрж░ржмрж░рзНрждрзА рж╕ржорзЯрзЗ API retry ржПрж░ ржлрж▓рзЗ ржпржЦржи ржЖрж░рзЗржХржЯрж┐ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕ржмрзЗ рждржЦржи рж╕рж╛рж░рзНржнрж╛рж░ ржПржЗ(ржПржХржЗ) ржЗржЙржирж┐ржХ (UUID) ржнрзНржпрж╛рж▓рзБ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржХрж┐ржВржмрж╛ cache ржПрж░ ржнрж┐рждрж░ ржЪрзЗржХ ржХрж░рзЗ ржжрзЗржЦржмрзЗ ржПржЗ ржнрзНржпрж╛рж▓рзБрж░ ржмрж░рзНрждржорж╛ржи рж╕рзНржЯрзЗржЯ ржХрж┐ред
- рж╕рзНржЯрзЗржк рзк: рж╕рзНржЯрзЗржЯ ржпржжрж┐ consumed ржХрж┐ржВржмрж╛ processing рж╣рзЯрзЗ ржерж╛ржХрзЗ ржЖржорж░рж╛ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржжрж┐ржм, ржирждрзБржиржнрж╛ржмрзЗ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛ ржЫрж╛рзЬрж╛ред

ржмрж┐:ржжрзНрж░: ржЕржирзЗржХрзЗрж░ ржоржирзЗ ржкрзНрж░рж╢рзНржи ржЖрж╕рждрзЗ ржкрж╛рж░рзЗ ржЗржЙржирж┐ржХ key ржХрзЛржерж╛рзЯ рждрзИрж░рзА ржХрж░ржмрзЛ? рж╕рж╛ржзрж╛рж░ржгржд security ржжрж┐ржХ ржерзЗржХрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рж▓рзЗ ржЗржЙржирж┐ржХ key рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ рждрзИрж░рзА рж╣рзЯрзЗ ржЖрж╕рж╛ ржнрж╛рж▓рзЛред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ key рждрзИрж░рзА ржХрж░рж▓рзЗ security concern ржерзЗржХрзЗ ржпрж╛рзЯред

## ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзНрж░рж╢рзНржиржЧрзБрж▓рзЛ

- ржХрзЛржи ржкрзНрж░ржХрж╛рж░рзЗрж░ ржкрзНрж░рзЛржЯрзЛржХрж▓ REST API ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ?
- REST API ржПрж░ Principal ржЧрзБрж▓рзЛ ржХрж┐ ржХрж┐?
- POST ржПржмржВ PUT ржПрж░ ржоржзрзНржпрзЗ ржХрж┐ ржХрж┐ ржкрж╛рж░рзНржержХрзНржп?
- PUT ржПржмржВ PATCH ржПрж░ ржоржзрзНржпрзЗ ржХрж┐ ржХрж┐ ржкрж╛рж░рзНржержХрзНржп?
- Idempotent API ржХрж┐? ржХрж┐ржнрж╛ржмрзЗ API ржХрзЗ Idempotent ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯ?
- REST API ржПрж░ Best Practice ржЧрзБрж▓рзЛ ржХрж┐ ржХрж┐?
- REST API рждрзЗ Pagination ржХрж┐ржнрж╛ржмрзЗ handle ржХрж░ржмрзЗржи?
- REST API ржПрж░ Security Practice ржЧрзБрж▓рзЛ ржХрж┐ ржХрж┐?
- Over-Fetching ржПржмржВ Under-Fetching ржХрж┐?


## Section 21: Scalability

рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржХрзНрж╖ржорждрж╛ржХрзЗ ржмрзБржЭрж╛рзЯ ржпржЦржи рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкрж░рж┐ржорж╛ржг ржмрж╛рзЬрждрзЗ ржерж╛ржХрзЗред ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржПржХржЯрж┐ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗрж░ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржПржЦржи ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржг рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирзНрждрзБ ржЖржЬ ржерзЗржХрзЗ рзл ржорж╛рж╕ ржкрж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рзи ржЧрзБржг рж╣рзЯрзЗ ржЧрзЗрж▓ рждрж╛рж░ ржарж┐ржХ ржЖрж░ржУ рзл ржорж╛рж╕ ржкрж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рзк ржЧрзБржг рж╣рзЯрзЗ ржЧрзЗрж▓, ржПржХржЯрж╛ рж╕ржорзЯ ржжрзЗржЦрж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рж╛рж░рзНржнрж╛рж░ ржПржд ржкрж░рж┐ржорж╛ржг рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ рж▓рзЛржб ржирж┐рждрзЗ ржкрж╛рж░ржЫрзЗ ржирж╛, ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЬржирзНржп рж╕рзНржХрзЗрж▓ ржХрж░рж╛ржХрзЗ рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ ржмрж▓рзЗред

рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд 2 ржкрзНрж░ржХрж╛рж░рзЗрж░, ржнрж╛рж░рзНржЯрж┐ржХрж╛рж▓ рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ (Vertical Scalability) ржПржмржВ рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐ (Horizontal Scalability)ред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: рж╕рзНржХрзЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐**
### Vertical ржПржмржВ Horizontal Scaling

#### Vertical Scaling

ржнрж╛рж░рзНржЯрж┐ржХрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ рж╣рж▓, ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзГржжрзНржзрж┐ ржХрж░рзЗ рж╕рзНржХрзЗрж▓ ржХрж░рж╛ред ржПржЦрж╛ржирзЗ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрж▓рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ Capacity(CPU/RAM/DISK) ржХрзЗ ржмрзБржЭрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред

ржнрж╛рж░рзНржЯрж┐ржХрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржПрж░ ржЙржжрж╛рж╣рж░ржг рж╣рж▓ MySQL.

<p align="center">
  <img src="sections/scalability/images/vertical-scaling.png" alt="Vertical Scaling">
</p>

#### Horizontal Scaling

рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ рж╣рж▓, ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рзЗ рж╕рзНржХрзЗрж▓ ржХрж░рж╛ред рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ Capacity ржмрзГржжрзНржзрж┐ ржХрж░рж╛рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЛржЧ ржХрж░рж╛ржЗ рж╣рж▓ рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВред

рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржПрж░ ржЙржжрж╛рж╣рж░ржг рж╣рж▓ Cassandra, MongoDBред AWS Lambda рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ ржХрж░рзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/scalability/images/horizontal-scaling.png" alt="Horizontal Scaling">
</p>

Horizontal Scaling ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржмржбрж╝ рж╕рзБржмрж┐ржзрж╛, <a href="../reliability/README.md" target="_blank">Fault Tolarance</a> and Availability.

Horizontal Scaling ржПрж░ ржПржХржЯрж┐ рж╕ржорзНржкрзВрж░рзНржг ржЙржжрж╛рж╣рж░ржг AWS Auto Scale. ржЖржкржирж╛рж░ ржпржжрж┐ ржПржХржЯрж┐ EC2 instance server ржерж╛ржХрзЗ ржПржмржВ ржЖржкржирж╛рж░ рж╕рж╛рж░рзНржнрж╛рж░ ржкрзНрж░ржЪрзБрж░ Request ржкрзЗржпрж╝рзЗ ржерж╛ржХрзЗ рждржЦржи AWS Auto Scale ржирждрзБржи рж╕рж╛рж░рзНржнрж╛рж░/instance рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ Horizontal Scale ржнрж┐рждрзНрждрж┐ржХ ржХрж╛ржЬ ржХрж░рзЗред

Real world system ржПрж░ ржХржерж╛ ржЪрж┐ржирзНрждрж╛ ржХрж░рж▓рзЗ Horizontal Scaling ржПрж░ржХржо рж╣рзЯ,

<p align="center">
  <img src="sections/scalability/images/practical-horizontal-scaling.png" alt="Horizontal Scaling">
</p>

### ржХржЦржи Scalability ржирж┐рзЯрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░ржмрзЛ?

ржпржЦржи ржЖржкржирж┐ ржХрзЛржирзЛ рж╕рж┐рж╕рзНржЯрзЗржо рждрзИрж░рзА ржХрж░ржмрзЗржи, рждржЦржи ржкрзНрж░ржержорзЗ ржЖржкржирж╛рж░ 0(zero) user ржерж╛ржХржмрзЗред ржЕрж░рзНржерж╛рзО Scalability ржХрзЛржирзЛ issue ржирж╛ред

ржЖржкржирж┐ 0 user ржерж╛ржХрж╛рж░ рж╕ржорзЯ Scalability(Vertical/Horizontal) ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж▓рзЗ, ржЖржкржирж┐ ржПржоржи ржПржХржЯрж┐ problem ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗржи ржпрж╛рж░ ржХрзЛржирзЛ ржЕрж╕рзНрждрж┐рждрзНржм ржирж╛ржЗред

Consistent ржоржирж┐ржЯрж░рж┐ржВ ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж┐ ржпржЦржи ржжрзЗржЦржмрзЗржи user ржЯрзНрж░рж╛ржлрж┐ржХ ржмрзГржжрзНржзрж┐ ржкрж╛ржЪрзНржЫрзЗ рждржЦржи Scalability ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржнрж╛рж▓рзЛред


## Section 22: Database Sharding

Database Sharding рж╣рж▓ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржкрзГржержХ ржХрж░рж╛ред ржЙржжрж╛рж╣рж░ржг ржмрж▓рж╛ ржпрж╛рзЯ, ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржбрзЗржЯрж╛/row ржпржжрж┐ ржмрж╛рзЬрждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржПржд ржкрж░рж┐ржорж╛ржг ржбрзЗржЯрж╛/row ржмрзЗрзЬрзЗ ржЧрзЗрж▓ ржпрж╛рж░ ржлрж▓рзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзЗржмрж┐рж▓рзЗ ржЖрж░ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ рждржЦржи ржЖржорж░рж╛ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржорзВрж▓ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржкрзГржержХ ржХрж░рзЗ ржЕржирзНржпрж╛ржирзНржп shard ржЯрзЗржмрж┐рж▓рзЗ distribute ржХрж░рзЗ рж░рж╛ржЦрж┐ рж╕рзЗржЯрж╛ржЗ Database Shardingред ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░ ржПржЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙрж╢ржи рж╣ржмрзЗред

<p align="center">
  <img src="./images/sharding.png" alt="Sharding">
</p>

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржбрзЗржЯрж╛ржмрзЗрж╕ рж╕рж╛рз░рзНржбрж┐ржВ**
## Database Sharding ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ

- **improve response time**: ржбрзЗржЯрж╛ retrive ржХрж░рж╛ ржЕржирзЗржХ ржлрж╛рж╕рзНржЯ рж╣рзЯрзЗ ржерж╛ржХрзЗред ржПржХрж╕рж╛ржерзЗ рж▓ржХрзНрж╖рзНржп рж▓ржХрзНрж╖рзНржп row ржерзЗржХрзЗ ржбрзЗржЯрж╛ retrive ржХрж░рждрзЗ ржпржд рж╕ржорзЯ рж▓рж╛ржЧржмрзЗ, ржЫрзЛржЯ ржЫрзЛржЯ рж╕рж╛рж░рзНржб ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ retrive ржХрж░рждрзЗ ржЖрж░рзЛ ржХржо рж╕ржорзЯ рж▓рж╛ржЧржмрзЗред ржПржнрж╛ржмрзЗ response time ржЗржорзНржкрзНрж░рзЛржн ржХрж░рж╛ ржпрж╛рзЯред

- **effective scaling**: ржорж╛рж▓рзНржЯрж┐ржкрж▓ рж╕рж╛рж░рзНржб ржЯрзЗржмрж┐рж▓рзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛рж░ ржлрж▓рзЗ scalability ensure рж╣рзЯрзЗ ржерж╛ржХрзЗред

- **database resiliency**: ржорж╛рж▓рзНржЯрж┐ржкрж▓ рж╕рж╛рж░рзНржб ржЯрзЗржмрж┐рж▓рзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛рж░ ржлрж▓рзЗ ржкрзНрж░рждрж┐ржмрж╛рж░ ржпржЦржи ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░(рж╕рж╛рж░рзНржб) ржХрзЛржи ржХрж╛рж░ржирзЗ ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ, рждржЦржи ржЕржирзНржп рж╕рж╛рж░рзНржнрж╛рж░(рж╕рж╛рж░рзНржб) up and running ржерж╛ржХрзЗред

## Sharding Techniques

### Range Based Sharding

Range Based Sharding ржП ржорзВрж▓ржд ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзЗржЮрзНржЬ ржПрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржбрзЗржЯрж╛ ржмрж┐ржнрж┐ржирзНржи рж╕рж╛рж░рзНржб-ржП ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╣рзЯрзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/database-sharding/images/range-based-sharding.png" alt="range based sharding">
</p>

ржЙржкрж░рзЗрж░ ржЫржмрж┐рждрзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ, рж░рзЗржЮрзНржЬ рззрзж ржерзЗржХрзЗ рзирзж id ржПржХржЯрж┐ рж╕рж╛рж░рзНржб-ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХржмрзЗ ржЕржкрж░ рж╕рж╛рж░рзНржб-ржП рзирзз ржерзЗржХрзЗ рзйрзл id ржкрж░рзНржпржирзНржд ржбрзЗржЯрж╛ ржерж╛ржХржмрзЗред

### Hash Based Sharding

Hash Based Sharding ржП ржорзВрж▓ржд ржПржХржЯрж┐ **рж╣рзНржпрж╛рж╢ ржлрж╛ржВрж╢ржи** ржерж╛ржХржмрзЗ ржпрж╛ ржмрж▓рзЗ ржжрж┐ржмрзЗ ржХрзЛржи row ржПрж░ ржбрзЗржЯрж╛ ржХрзЛржи рж╕рж╛рж░рзНржб ржП ржпрж╛ржмрзЗред

<p align="center">
  <img src="sections/database-sharding/images/hash-based-sharding.png" alt="hash based sharding">
</p>

ржЙржкрж░рзЗрж░ ржЫржмрж┐рждрзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ, рж╣рзНржпрж╛рж╢ ржлрж╛ржВрж╢ржи ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛рж░ ржкрж░ рззрзж ржПржмржВ рззрзл id рж╕рж╛рж░рзНржб рзз ржП ржерж╛ржХржмрзЗред ржмрж╛ржХрж┐ржЧрзБрж▓рзЛ рж╕рж╛рж░рзНржб рзи ржПред

### Directory Based Sharding

Directory Based Sharding ржП ржорзВрж▓ржд ржПржХржЯрж┐ Lookup table ржерж╛ржХржмрзЗ ржпрж╛ ржмрж▓рзЗ ржжрж┐ржмрзЗ ржХрзЛржи row ржПрж░ ржбрзЗржЯрж╛ ржХрзЛржи рж╕рж╛рж░рзНржб ржП ржпрж╛ржмрзЗред

<p align="center">
  <img src="sections/database-sharding/images/directory-based-sharding.png" alt="directory based sharding">
</p>

## Sharding in SQL, NoSQL and Cloud

AWS Database Sharding <a href="https://aws.amazon.com/blogs/database/sharding-with-amazon-relational-database-service/" target="_blank">ржпрзЗржнрж╛ржмрзЗ ржХрж░рзЗ</a>

PostgreSQL ржП natively Database Sharding рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗ ржирж╛ рждржмрзЗ PostgreSQL 11 Foreign Data Wrappers ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ ржбрж╛ржЯрж╛ ржмрж┐ржнрж┐ржирзНржи рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржПржмржВ read ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржЖржорж░рж╛ Connection Pool ржПржмржВ Proxy рж╣рж┐рж╕рзЗржмрзЗ Pgcat ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржбрзЗржЯрж╛ ржмрж┐ржнрж┐ржирзНржи shard ржПрж░ ржоржзрзНржпрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

<p align="center">
  <img src="sections/database-sharding/images/sharding-1.png" alt="sharding">
</p>

## ржХржЦржи рж╕рж╛рж░рзНржб ржХрж░ржмрзЛ ржирж╛?

(ржЪрж▓ржорж╛ржи)

## Sharding ржПржмржВ Partitioning ржПрж░ ржкрж╛рж░рзНржержХрзНржп

Sharding ржорзВрж▓ржд ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржнрж┐рждрж░ ржПржХрж╛ржзрж┐ржХ ржЯрзЗржмрж┐рж▓ ржПрж░ ржоржзрзНржпрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗ ржерж╛ржХрзЗ ржЕржирзНржпржжрж┐ржХрзЗ Partition ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржнрж┐рждрж░ ржПржХрж╛ржзрж┐ржХ ржЯрзЗржмрж┐рж▓ ржПрж░ ржоржзрзНржпрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рзЗред


## Section 23: Database Replication

Database Replication ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ Strategy, ржпрзЗржЦрж╛ржирзЗ ржПржХржЯрж┐ Master Database ржПржмржВ ржПржХржЯрж┐ ржХрж┐ржВржмрж╛ ржПржХрж╛ржзрж┐ржХ Slave Database ржерж╛ржХржмрзЗред Master Database ржПрж░ ржоржзрзНржпрзЗ Insert, Delete ржПржмржВ Update ржПрж░ ржХрж╛ржЬ рж╣ржмрзЗ ржПржмржВ Slave Database ржоржзрзНржпрзЗ Master Database ржПрж░ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛрж░ Copy ржерж╛ржХржмрзЗ ржПржмржВ рждрж╛рж░ ржоржзрзНржпрзЗ рж╢рзБржзрзБ Read Operation рж╣ржмрзЗред

<p align="center">
  <img src="./images/DB_replication.png" alt="Database Replication">
</p>

Database Replication, SQL ржПржмржВ NoSQL ржжрзБржЯрж┐ ржбрзЗржЯрж╛ржмрзЗрж╕рзЗ ржХрж░рж╛ ржпрж╛рзЯред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржбрзЗржЯрж╛ржмрзЗрж╕ рж░рзЗржкрзНрж▓рж┐ржХрзЗрж╢ржи**
## Replication Lag

рж╕рж░рзНржмржорзЛржЯ ржпржд рж╕ржорзЯ Master Database ржПрж░ update ржХрж┐ржВржмрж╛ insert ржЧрзБрж▓рзЛржХрзЗ Replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ replicate ржХрж░рждрзЗ рж▓рж╛ржЧрзЗ, рж╕рзЗржЗ рж╕ржорзЯржЯрж┐ рж╣ржЪрзНржЫрзЗ Replication Lagред

Replication Lag ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕ржорж╕рзНржпрж╛ рждрзИрж░рзА рж╣рзЯред ржпрзЗржоржи, Master Database ржП update ржХрж┐ржВржмрж╛ insert рж╣рж▓рзЗ рждрж╛ replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ replicate ржХрж░рждрзЗ ржЧрзЗрж▓рзЗ ржпржжрж┐ Replication Lag ржПрж░ рж╕ржорзЯ ржмрзЗрж╢рж┐ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ replicate ржХрж░рж╛рж░ рж╕ржорзЯ ржпржжрж┐ read (replica database ржП) read request ржЖрж╕рзЗ рждржЦржи different value ржЕрж░рзНржерж╛рзО inconsistent data рж░рж┐ржб ржХрж░рж╛рж░ рж╕рзБржпрзЛржЧ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/database-replication/images/db-replication-1.png" alt="replication">
</p>

## Consistency Model

### Synchronous Replication

ржирждрзБржи ржХрзЛржирзЛ write ржЕржкрж╛рж░рзЗрж╢ржи ржпржЦржи Master ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯ, рждржЦржи Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзНрж░ржержорзЗ рж╕рзЗржЗ ржнрзНржпрж╛рж▓рзБ ржирж┐ржЬрзЗрж░ ржоржзрзНржпрзЗ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ (read) replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ write ржЕржкрж╛рж░рзЗрж╢ржи ржкрзНрж░рзЯрзЛржЧ ржХрж░рждрзЗ ржмрж▓ржмрзЗ, replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ write ржЕржкрж╛рж░рзЗрж╢ржи рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рждржЦржи ржПрж░рж╛ Master ржбрж╛ржЯрж╛ржмрзЗрж╕ржХрзЗ acknowledgement ржкрж╛ржарж╛ржмрзЗ, рждржЦржи Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирж┐рж╢рзНржЪрж┐ржд рж╣ржмрзЗ рж╕ржм replica ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ consistent ржнрзНржпрж╛рж▓рзБ ржЖржЫрзЗред

<p align="center">
  <img src="sections/database-replication/images/db-replication-2.png" alt="replication">
</p>

ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ ржнрзНржпрж╛рж▓рзБ update ржХрж░рж╛рж░ рж╕ржорзЯ ржХрзЛржирзЛ replica ржбрж╛ржЯрж╛ржмрзЗрж╕ ржирж╖рзНржЯ ржХрж┐ржВржмрж╛ ржмржирзНржз рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ, master database ржпржЦржи ржжрзЗржЦржмрзЗ рж╕рзЗржЗ ржирж╖рзНржЯ рж╣ржУрзЯрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕ ржерзЗржХрзЗ ржХрзЛржирзЛ acknowledgement ржЖрж╕ржЫрзЗ ржирж╛ рждржЦржи рж╕рзЗржЗ ржнрзНржпрж╛рж▓рзБрж░ ржЖржкржбрзЗржЯ ржирж┐ржЬрзЗрж░ ржПржмржВ ржмрж╛ржХрж┐ replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ ржХрж░ржмрзЗ ржирж╛ ржХрж┐ржВржмрж╛ рж░рж┐ржнрж╛рж░рзНржЯ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред

### Asynchronous Replication

ржПрждрзЗ ржирждрзБржи ржХрзЛржирзЛ write ржЕржкрж╛рж░рзЗрж╢ржи ржпржЦржи Master ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯ, рждржЦржи Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзНрж░ржержорзЗ рж╕рзЗржЗ ржнрзНржпрж╛рж▓рзБ ржирж┐ржЬрзЗрж░ ржоржзрзНржпрзЗ ржЖржкржбрзЗржЯ ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ (read) replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рзЛрждрзЗ write ржЕржкрж╛рж░рзЗрж╢ржи ржкрзНрж░рзЯрзЛржЧ ржХрж░рждрзЗ ржмрж▓ржмрзЗ, ржХрж┐ржирзНрждрзБ Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрзЛржирзЛ acknowledgement ржПрж░ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░ржмрзЗ ржирж╛ред

Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржбрзЗржЯрж╛ ржирж┐ржЬрзЗрж░ ржоржзрзНржпрзЗ ржЖржкржбрзЗржЯ ржХрж░рзЗ ржмрж╛ржХрж┐ Read Replica ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржмрж▓рзЗ ржжрж┐ржмрзЗ, ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ acknowledgement ржЫрж╛рзЬрж╛ред ржПрждрзЗ ржХрж░рзЗ Master ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрзЛржирзЛ Read ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ ржирж┐рж░рзНржнрж░ ржерж╛ржХржмрзЗ ржирж╛ред

## Database Replication ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ

- Performance: ржпрзЗрж╣рзЗрждрзБ рж╕ржмржзрж░ржирзЗрж░ Write, Update and Delete Master Database ржП рж╣ржмрзЗ ржПржмржВ рж╕ржмржзрж░ржирзЗрж░ Read Slave Database ржП рж╣ржмрзЗ рж╕рзЗрж╣рзЗрждрзБ ржПржХрж╛ржзрж┐ржХ Query Parallely рж╕ржВржШржЯрж┐ржд рж╣ржмрзЗ ржпрж╛рж░ ржлрж▓рзЗ Performance Better рж╣ржмрзЗред

- Reliability: ржпржжрж┐ ржХрзЛржирзЛ Database Server ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ рждржмрзБржУ ржЖржорж░рж╛ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржЕржирзНржп ржХрзЛржирзЛ Database Server ржП ржкрж╛ржмред ржбрзЗржЯрж╛ ржирж╖рзНржЯ рж╣ржУрзЯрж╛рж░ ржХрзЛржирзЛ рж╕рзБржпрзЛржЧ ржирзЗржЗред

- Availability: ржХрзЛржирзЛ Database Server ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ рждржЦржи ржЖржорж░рж╛ ржЕржирзНржп Database Server ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржирж┐рзЯрзЗ ржЖржорж╛ржжрзЗрж░ System/Website ржХрзЗ рж╕ржЪрж▓ рж░рж╛ржЦрждрзЗ ржкрж╛рж░рж┐ред

- Reduce Latency: ржПржХрж╛ржзрж┐ржХ Database Server(Slave Database) ржерж╛ржХрж╛рж░ ржлрж▓рзЗ Latency Time reduce рж╣рзЯред

## ржХрж┐ржЫрзБ ржлрзНржпрж╛ржХрзНржЯржЧрзБрж▓рзЛ

- ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ ржпрзЗржХрзЛржирзЛ Slave Database ржирж╖рзНржЯ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ ржЕржирзНржп Slave Database ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржирзЗрзЯрж╛ ржпрж╛рзЯред

- Master Database ржирж╖рзНржЯ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ, ржХрзЛржирзЛ Slave Database рж╕рзЗржЗ ржирж╖рзНржЯ Master Database ржХрзЗ Replace ржХрж░ржмрзЗред ржкрж░рзЗ ржирждрзБржи Slave Database рждрзИрж░рж┐ рж╣рзЯрзЗ ржкрзБрж░ржирзЛ Slave Database ржХрзЗ Replace ржХрж░ржмрзЗред

## ржХрж┐ржнрж╛ржмрзЗ AWS RDS multi az read replicas; disaster recovery ржЬржирзНржп ржХрж╛ржЬ ржХрж░рзЗ?

ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ disaster recover ржХрж░рждрзЗ ржЖржорж░рж╛ AWS RDS ржПрж░ multi-az read replica feature ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржПржХржЗ region ржПрж░ ржоржзрзНржпрзЗ ржЖржорж░рж╛ ржПржХрж╛ржзрж┐ржХ Availability Zone ржерж╛ржХржмрзЗ ржПржмржВ рждрж╛ржжрзЗрж░ ржнрж┐рждрж░ ржЖржорж░рж╛ Database Instance рж░рж╛ржЦрждрзЗ ржкрж╛рж░рж┐ред ржПржХржЯрж┐ Availability Zone ржП ржЖржорж░рж╛ Master Database рж░рж╛ржЦржмрзЛ ржПржмржВ ржмрж╛ржХрж┐ржЧрзБрж▓рзЛрждрзЗ Read Replica Database ржерж╛ржХржмрзЗред

<p align="center">
  <img src="sections/database-replication/images/db-replication-3.png" alt="replication">
</p>

AWS RDS Synchronous Replication ржХрж░рзЗ ржерж╛ржХрзЗред ржХрзЛржирзЛ ржХрж╛рж░ржгрзЗ Read Replica ржирж╖рзНржЯ/ржмржирзНржз рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ, AWS RDS ржирждрзБржи Read рж░рзЗржкрзНрж▓рж┐ржХрж╛ рждрзИрж░рзА ржХрж░рзЗ ржирж╖рзНржЯ ржХрж┐ржВржмрж╛ ржмржирзНржз рж╣рзЯрзЗ ржпрж╛ржУрзЯрж╛ Replica ржбрж╛ржЯрж╛ржмрзЗрж╕ржХрзЗ replace (ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи) ржХрж░ржмрзЗред


## Section 24: Caching

Caching ржПржХржЯрж┐ ржХрзМрж╢рж▓ ржпрж╛ ржжрзНржмрж╛рж░рж╛ ржХрзЛржи Expensive Response'ржХрзЗ ржХрзЛржирзЛ ржорзЗржорзЛрж░рж┐рждрзЗ рж░рж╛ржЦрж╛ рж╣рзЯ, ржпрж╛рждрзЗ ржмрж╛рж░ ржмрж╛рж░ ржЖрж╕рж╛ рж╕рзЗржЗ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрзЗ ржжрзНрж░рзБржд рж░рзЗрж╕ржкржирзНрж╕ржЯрж┐ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред ржорзВрж▓ рж╕рж╛рж░рзНржнрж╛рж░рзЗ (ржпрзЗржоржи ржбрж╛ржЯрж╛ржмрзЗрж╕) рж╣рж┐ржЯ ржХрж░рж╛рж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред ржПрждрзЗ ржХрж░рзЗ ржпрзЗ рж╕рзБржмрж┐ржзрж╛ржЯрзБржХрзБ рж╣ржмрзЗ,

- Read API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ Fast рж╣ржмрзЗ
- Latency Reduce рж╣ржмрзЗ
- Fault Tolarence ржПрж░ ржЭрзБржБржХрж┐ ржХржоржмрзЗ

<p align="center">
  <img src="./images/caching1.png" alt="Caching">
</p>

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржХрзНржпрж╛рж╢рж┐ржВ**
## Cache Invalidation

ржЖржорж░рж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржмрж╕ржорзЯрзЗрж░ ржЬржирзНржп ржбрзЗржЯрж╛ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЛ ржирж╛, ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ ржкрж░ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржЦрж╛рж▓рж┐ ржХрж░рзЗ, ржирждрзБржи ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ, ржПржЗ ржкржжрзНржзрждрж┐ рж╣рж▓ Cache Invalidationред

ржЖржорж░рж╛ ржпржжрж┐ Cache Invalidation ржирж╛ ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ ржЖржорж░рж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ Stale ржбрзЗржЯрж╛ ржкрж╛ржм, ржХрж╛рж░ржг ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржпржжрж┐ ржирждрзБржи ржбрзЗржЯрж╛ ржерж╛ржХрзЗ рждржЦржи ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрзБрж░рзЛрждржи ржбрзЗржЯрж╛ ржерж╛ржХржмрзЗред ржпрж╛рж░ ржлрж▓рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕ржмрж╕ржорзЯ ржкрзБрж░рзЛржирзЛ ржбрзЗржЯрж╛ ржкрж╛ржмрзЗред ржПржЗ ржЬрж┐ржирж┐рж╕ржЯрж┐ avoid ржХрж░рждрзЗ Cache Invalidation ржХрж░рж╛ рж╣рзЯред

Invalidate ржХрж░рж╛рж░ ржПржХржЯрж┐ ржкржжрзНржзрждрж┐ рж╣рж▓, ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрж╕рзАржорж╛ рж╕рзЗржЯ ржХрж░рзЗ ржжрзЗрзЯрж╛ ржПржЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрж╕рзАржорж╛рж░ ржкрж░ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрж┐рж▓рж┐ржЯ рж╣рзЯрзЗ ржпрж╛ржмрзЗ, ржПржЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрж╕рзАржорж╛ржХрзЗ TTL(Time to live) ржмрж▓рзЗред ржЖрж░рзЗржХржЯрж┐ ржкржжрзНржзрждрж┐ рж╣рж▓, ржпржЦржиржЗ ржирждрзБржи рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕ржмрзЗ рждржЦржи ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЖржкржбрзЗржЯ рж╣ржУрзЯрж╛рж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ ржЖржорж░рж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ Cache Invalidation ржХрж░ржмред

## Cache Eviction

ржПржЯрж┐ ржПржХржЯрж┐ ржкрзНрж░рж╕рзЗрж╕ ржпрж╛рж░ ржорж╛ржзрзНржпржорзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣рзЯ ржпрж╛рждрзЗ ржХрж░рзЗ ржирждрзБржи ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржмрж╕ржорзЯ ржПржХржЯрж┐ Limited Capacity ржерж╛ржХрзЗ, ржпржЦржи ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ ржнрж░рзЗ ржпрж╛рзЯ рждржЦржи ржПржЗ Cache Eviction ржкржжржХрзНрж╖рзЗржк ржирзЗрзЯрж╛ рж▓рж╛ржЧрзЗ, ржпрж╛рждрзЗ ржХрж░рзЗ ржирждрзБржи ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВрж░ржХрзНрж╖ржи ржХрж░рж╛ ржпрж╛рзЯред

### Cache Eviction Policy

- Least Recently Used (LRU): ржПржЗ рж╕рзНржЯрзНрж░рж╛ржЯрзЗржЬрж┐рждрзЗ рж╕ржорзНржкрзНрж░рждрж┐ ржмрзНржпржмрж╣рзГржд ржирж╛ рж╣ржУрзЯрж╛ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржерзЗржХрзЗ ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣рзЯред
- First-in-first-out (FIFO): ржПржЗ рж╕рзНржЯрзНрж░рж╛ржЯрзЗржЬрж┐рждрзЗ ржпрзЗ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрзНрж░ржержорзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░ржмрзЗ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржкрзНрж░ржержорзЗ ржмрж╛ржж ржпрж╛ржмрзЗред
- Least Frequently Used (LFU): ржПржЗ рж╕рзНржЯрзНрж░рж╛ржЯрзЗржЬрж┐рждрзЗ ржпрзЗ ржбрзЗржЯрж╛ ржпржд ржХржоржмрж╛рж░ ржмрзНржпржмрж╣рзГржд рж╣рзЯрзЗржЫрзЗ рж╕рзЗржЗ ржбрзЗржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржерзЗржХрзЗ ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣рзЯред

## Distributed Cahing

ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржпрзЗржЦрж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ ржерж╛ржХржмрзЗ ржПржмржВ ржХрзЛржирзЛ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗрж░ ржПржХрж╛ржзрж┐ржХ ржирзЛржбрзЗ ржмрж╛рж░ ржмрж╛рж░ ржЖрж╕рж╛ рж╕рзЗржЗ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржХрзЗ ржжрзНрж░рзБржд рж░рзЗрж╕ржкржирзНрж╕ржЯрж┐ ржПржХрж╛ржзрж┐ржХ ржирзЛржбрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

<p align="center">
  <img src="sections/caching/images/distributed_caching.png" alt="Distributed Caching" />
</p>

### ржХрзЗржи ржЖржорж╛ржжрзЗрж░ Distributed Cahing ржПрж░ ржкрзНрж░рзЯрзЛржЬржи?

ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ рж╕рзНржХрзЗрж▓ ржХрж░рждрзЗред ржЖржорж╛ржжрзЗрж░ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ Resilient/Fault Tolerant ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ Distributed Cahing ржкрзНрж░рзЯрзЛржЬржиред

## Caching Strategy

рзл ржкрзНрж░ржХрж╛рж░рзЗрж░ Caching Strategy ржмрж┐ржжрзНржпржорж╛ржиред

### Cache-aside:

- ржкрзНрж░ржержорзЗ Client Application рж╕рж╛рж░рзНржнрж╛рж░рзЗ request ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ Application рж╕рж╛рж░рзНржнрж╛рж░ ржкрзНрж░ржержорзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж╣рж┐ржЯ ржХрж░ржмрзЗ,,
- ржпржжрж┐ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрж┐ржжрзНржпржорж╛ржи ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ Application рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржжрж┐ржмрзЗ ржПржмржВ Application рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ Client ржХрзЗ ржжрж┐ржмрзЗред
- ржпржжрж┐ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрж┐ржжрзНржпржорж╛ржи ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ Application рж╕рж╛рж░рзНржнрж╛рж░ Database рж╣рж┐ржЯ ржХрж░ржмрзЗ ржПржмржВ ржбрзЗржЯрж╛ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж╛ржЦржмрзЗ ржПржмржВ рждрж╛рж░ржкрж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржЗржЙржЬрж╛рж░ ржХрзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред

<p align="center">
  <img src="sections/caching/images/cache_aside.png" alt="Cache Aside" />
</p>

#### Pros of cache-aside

- read-heavy application ржПрж░ ржЬржирзНржп ржЙрждрзНрждржоред
- Cache server ржбрж╛ржЙржи ржерж╛ржХрж▓рзЗржУ request ржмрзНржпрж░рзНрже рж╣ржУрзЯрж╛рж░ рж╕рзБржпрзЛржЧ ржирж╛ржЗ, ржпрзЗрж╣рзЗрждрзБ рждржЦржи ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржирж┐ржмрзЗред

#### Cons of cache-aside

- ржирждрзБржи ржбрзЗржЯрж╛ Read ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ рж╕ржмрж╕ржорзЯ cache miss рж╣ржмрзЗред

Memcached ржПржмржВ Redis, cache-aside caching strategy follow ржХрж░рзЗред

### Read-through:

- ржкрзНрж░ржержорзЗ Client Application рж╕рж╛рж░рзНржнрж╛рж░рзЗ request ржХрж░ржмрзЗ, рждрж╛рж░ржкрж░ Application рж╕рж╛рж░рзНржнрж╛рж░ ржкрзНрж░ржержорзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж╣рж┐ржЯ ржХрж░ржмрзЗ,
- ржпржжрж┐ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрж┐ржжрзНржпржорж╛ржи ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ Application рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржжрж┐ржмрзЗ ржПржмржВ Application рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ Client ржХрзЗ ржжрж┐ржмрзЗред
- ржпржжрж┐ ржбрзЗржЯрж╛ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржмрж┐ржжрзНржпржорж╛ржи ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░ Database рж╣рж┐ржЯ ржХрж░ржмрзЗ ржПржмржВ ржбрзЗржЯрж╛ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзЗ ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж░рж╛ржЦржмрзЗ ржПржмржВ рждрж╛рж░ржкрж░ рж╕рзЗржЗ ржбрзЗржЯрж╛ Application рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред
- рждрж╛рж░ржкрж░ Application рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржбрзЗржЯрж╛'ржЯрж┐ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржжрж┐ржмрзЗред

<p align="center">
  <img src="sections/caching/images/read_through.png" alt="Read-through" />
</p>

#### Pros of Read-through

- read-heavy application ржПрж░ ржЬржирзНржп ржЙрждрзНрждржоред
- Application Server ржП ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ Data Fetching рж╣ржмрзЗ ржирж╛ред

#### Cons of Read-through

- ржирждрзБржи ржбрзЗржЯрж╛ Read ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ рж╕ржмрж╕ржорзЯ cache miss рж╣ржмрзЗред

### Write Around

- ржкрзНрж░ржержорзЗ Client Application рж╕рж╛рж░рзНржнрж╛рж░рзЗ write рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред
- Application Server рж╕рж░рж╛рж╕рж░рж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ value update ржХрж░ржмрзЗред
- Application Server ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж╛ржЯрж╛ Dirty рж╣рж┐рж╕рзЗржмрзЗ ржпрзЛржЧ ржХрж░ржмрзЗред ржпрж╛рждрзЗ ржХрж░рзЗ ржкрж░ржмрж░рзНрждрзА рж╕ржорзЯ Read рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рж▓рзЗ ржмрзБржЬрж╛ ржпрж╛рзЯ ржбрж╛ржЯрж╛ Staleред

<p align="center">
  <img src="sections/caching/images/write_around.png" alt="Write Around" />
</p>

#### Pros of Write Around

- Inconsistency issue resolve ржХрж░рзЗ between Cache and Databaseред

(ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЪрж▓ржорж╛ржи)


## Section 25: Content Delivery Network

Content Delivery Network ржЕржержмрж╛ CDN, ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржпрзЗржЦрж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ рж╕рж╛рж░рзНржнрж╛рж░ ржЖржорж╛ржжрзЗрж░ ржнрзМржЧрзЛрж▓рж┐ржХ ржПрж░ ржЖрж╕рзЗржкрж╛рж╢рзЗ ржерж╛ржХрзЗ, ржпрж╛рждрзЗ ржЖржорж░рж╛ ржЦрзБржм ржжрзНрж░рзБржд ржХржирзНржЯрзЗржирзНржЯ ржкрзЗрждрзЗ ржкрж╛рж░рж┐ред ржХржирзНржЯрзЗржирзНржЯржЯрж┐ рж╣рждрзЗ ржкрж╛рж░рзЗ JS, CSS, Images ржХрж┐ржВржмрж╛ Videosред

<p align="center">
  <img src="./images/cdn-1.png" alt="cdn">
</p>

ржЖржорж╛ржжрзЗрж░ CDN рж╕рж╛рж░рзНржнрж╛рж░ ржпржжрж┐ India рждрзЗ ржерж╛ржХрзЗ ржЖрж░ ржЖржорж░рж╛ Bangladesh ржерзЗржХрзЗ content request ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ ржЦрзБржм рждрж╛рзЬрж╛рждрж╛рзЬрж┐ content ржкрж╛ржмред ржХрж╛рж░ржг рждржЦржи Latency ржХржорзЗ ржпрж╛ржмрзЗред
ржЖрж░ ржЖржорж░рж╛ Bangladesh ржерзЗржХрзЗ England-ржП ржпрзЗржЦрж╛ржирзЗ ржорзВрж▓ рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЫрзЗ, рж╕рзЗржЦрж╛ржирзЗ ржХржиржЯрзЗржирзНржЯ ржПрж░ ржЬржирзНржп request ржХрж░рж▓рзЗ Latency рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржмрзГржжрзНржзрж┐ ржкрж╛ржмрзЗ, ржпрзЗрж╣рзЗрждрзБ ржжрзБржЗ ржжрзЗрж╢рзЗрж░ ржжрзВрж░рждрзНржм ржмрзЗрж╢рж┐ред

ржпрзЗ ржпрзЗ рж▓рзЛржХрзЗрж╢ржирзЗ CDN рж╕рж╛рж░рзНржнрж╛рж░ ржЖржЫрзЗ рж╕рзЗржЗ рж▓рзЛржХрзЗрж╢ржиржЧрзБрж▓рзЛржХрзЗ Point of Presence ржмрж╛ PoP ржмрж▓рзЗред ржпрзЗ рж╕рж╛рж░рзНржнрж╛рж░ PoP ржПрж░ ржнрж┐рждрж░рзЗ ржерж╛ржХрзЗ рждрж╛ржХрзЗ Edge Server ржмрж▓рзЗред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржХржиржЯрзЗржирзНржЯ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржирзЗржЯржУрзЯрж╛рж░рзНржХ**
## CDN ржПрж░ ржЙржкржХрж╛рж░рж┐рждрж╛

- Reduce Latency: CDN ржПрж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ Latency reduce ржХрж░рж╛ ржпрж╛рзЯред ржпрж╛рж░ ржлрж▓рзЗ ржкрзЗржЗржЬрзЗрж░ рж▓рзЛржб ржЯрж╛ржЗржо ржХржорзЗ ржпрж╛рзЯред

- Reduce Bandwidth Cost: CDN рж╕рж╛рж░рзНржнрж╛рж░ ржпрзЗрж╣рзЗрждрзБ ржЖржорж╛ржжрзЗрж░ geographically(ржнрзМржЧрзЛрж▓рж┐ржХ) ржПрж░ ржЖрж╕рзЗржкрж╛рж╢рзЗ ржерж╛ржХрзЗ, рж╕рзЗржЬржирзНржп Bandwidth Cost reduce ржХрж░рж╛ ржпрж╛рзЯред

- Ensure Content Availability: ржПржХржЯрж┐ CDN рж╕рж╛рж░рзНржнрж╛рж░ ржпржжрж┐ ржирж╖рзНржЯ ржХрж┐ржВржмрж╛ offline рж╣рзЯрзЗ ржпрж╛рзЯ, рждржЦржи ржЕржирзНржп ржПржХржЯрж┐ CDN рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ ржХржиржЯрзЗржирзНржЯ ржбрзЗрж▓рж┐ржнрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред ржПржнрж╛ржмрзЗ ржЖржорж░рж╛ Availability ensure ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

- Handle DDoS Attack: Attacker ржпржЦржи multiple рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ DDoS ржХрж░рж╛рж░ ржЬржирзНржп ржХрж░ржмрзЗ, рждржЦржи рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ CDN рж╕рж╛рж░рзНржнрж╛рж░ handle ржХрж░ржмрзЗ, ржЖрж░ ржЖржорж╛ржжрзЗрж░ ржорзВрж▓ origin рж╕рж╛рж░рзНржнрж╛рж░ ржЕржХрзНрж╖ржд ржерж╛ржХржмрзЗред

## CDN ржПрж░ ржмрзНржпржмрж╣рж╛рж░: Real-time Streaming

Real-time Streaming рж╕рж┐рж╕рзНржЯрзЗржо ржпрзЗржЦрж╛ржирзЗ Videos ржХрж┐ржВржмрж╛ Audio рж╕рж╛рж░рзНржн ржХрж░рж╛ рж╣рзЯ рж╕рзЗржЦрж╛ржирзЗ рж╕рж╛ржзрж╛рж░ржгржд CDN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ,
ржпрж╛рждрзЗ Bandwidth Cost ржХржорж╛ржирзЛ ржпрж╛рзЯ, рж╕рж╣ржЬрзЗ Scale ржХрж░рж╛ ржпрж╛рзЯ ржПржмржВ Delivery Time ржжрзНрж░рзБржд ржХрж░рж╛ ржпрж╛рзЯред ржЖрж░рзЛ ржЬрж╛ржирждрзЗ ржЪрж╛ржЗрж▓рзЗ <a href="https://youtu.be/EJQkBd_-CMo" target="_blank">ржПржЯрж┐</a> ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗржиред


## Section 26: Rate Limiter

Rate Limiter ржПржХржЯрж┐ ржкрзНрж░рж╕рзЗрж╕, ржпрзЗржЦрж╛ржирзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржпрж╛ржУрзЯрж╛рж░ ржкрзВрж░рзНржмрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЯрж┐ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛ рж╣рзЯред ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржг рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ Rate Limiter ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕рж╛рж░рзНржнрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЧрзНрж░рж╣ржг ржХрж░рзЗ ржерж╛ржХрзЗред ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржирзЗрж░ ржЪрзЗрзЯрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржмрзЗрж╢рж┐ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ Rate Limiter рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ block ржХрж░рзЗ ржлрзЗрж▓рзЗ, ржпрж╛рж░ ржлрж▓рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржЖрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржирж╛ред

ржПржЦрж╛ржирзЗ ржорзВрж▓ ржкрзЯрзЗржирзНржЯ рзиржЯрж┐, ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ ржПржмржВ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржг рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯред

<p align="center">
  <img src="./images/rate-limiter.png" alt="rate limiter">
</p>

ржЙржкрж░рзЗрж░ ржЫржмрж┐рждрзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ, рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПржмржВ рж░рзЗрж╕рзНржкржирзНрж╕рзЗрж░ ржоржзрзНржпрзЗ middleware рж╣рж┐рж╕рзЗржмрзЗ rate limiter ржЖржЫрзЗред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: рж░рзЗржЗржЯ рж▓рж┐ржорж┐ржЯрж╛рж░**
## ржХрзЗржи Rate Limiter?

- Denial of Service(DoS) attack ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рждрзЗ ржкрж╛рж░рж┐ред
- ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ block ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ cost reduce ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

## ржХрзЛржерж╛рзЯ Rate Limiter ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░ржмрзЛ?

ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ client-side ржХрж┐ржВржмрж╛ server-side ржП ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред рждржмрзЗ server-side ржП ржЗржоржкрзНрж▓рзЗржорзЗржЯ ржХрж░рж╛ betterред ржХрж╛рж░ржи client-side ржПржд reliable ржирж╛ред

## HTTP Rate Limiter

<p align="center">
  <img src="sections/rate-limiter/images/http-rate-limiter.png" alt="http rate limiter">
</p>

ржпржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрзЗрж░ ржнрж┐рждрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржг ржПрж░ ржерзЗржХрзЗ ржмрзЗрж╢рж┐ http рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рзЗржирзНржб ржХрж░рзЗ рждржЦржи HTTP status code 429 ржпрж╛рж░ ржорж╛ржирзЗ To many request ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯрж╛ рж╣рзЯред

## Rate Limiter ржПрж░ Throttle ржХрж┐рж╕рзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ рждрзИрж░рзА ржХрж░ржмрзЛ?

ржЖржкржирж┐ ржЪрж╛ржЗрж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP ржзрж░рзЗ ржХрж┐ржВржмрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ user ID ржзрж░рзЗ rate limiter ржПрж░ throttle рждрзИрж░рзА ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред IP ржзрж░рзЗ ржХрж░рж▓рзЗ ржХрж░рж▓рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрзЗрж░ ржнрж┐рждрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP ржерзЗржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржгрзЗрж░ ржерзЗржХрзЗ ржмрзЗрж╢рж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рж▓рзЗ рждрж╛ block рж╣рзЯрзЗ ржпрж╛ржмрзЗред

## Rate Limiting Algorithms

ржХрж┐ржЫрзБ Algorithm ржпрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ Rate Limit ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмред

- Token Bucket
- Leaky Bucket
- Fixed Window Counter
- Sliding Window Log
- Sliding Window Counter

ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ рж╢рзБржзрзБ Token Bucket ржПржмржВ Leaky Bucket рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржиржмред

### Token Bucket

Rate Limit ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржЦрзБржмржЗ ржЬржиржкрзНрж░рж┐рзЯ algorithmред ржПржЯрж┐ ржпрзЗрж░ржХржо ржХрж╛ржЬ ржХрж░рзЗ ржерж╛ржХрзЗ,

ржирж┐рж░рзНржжрж┐рж╖рзНржЯ capacity рж╕ржорзНржкржирзНржи ржПржХржЯрж┐ bucket ржерж╛ржХржмрзЗред bucket ржПрж░ ржнрж┐рждрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж░рж┐ржорж╛ржи token ржерж╛ржХржмрзЗред

ржпржЦржи ржПржХржЯрж┐ request ржЖрж╕ржмрзЗ bucket ржерзЗржХрзЗ ржПржХржЯрж┐ token ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣ржмрзЗред ржПрж░ржХржо ржЖрж░рзЗржХржЯрж┐ request ржЖрж╕рж▓рзЗ ржЖрж░рзЗржХржЯрж┐ token ржмрж╛ржж ржжрзЗрзЯрж╛ рж╣ржмрзЗред

ржПрж░ржХржо bucket ржерзЗржХрзЗ рж╕ржм token рж╢рзЗрж╖ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ рждржЦржи ржЖрж░ ржХрзЛржирзЛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржирзЗржУрзЯрж╛ рж╣ржмрзЗ ржирж╛ ржХрж┐ржВржмрж╛ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛ рж╣ржмрзЗ ржирж╛ред

<p align="center">
  <img src="sections/rate-limiter/images/token-bucket.png" alt="token bucket">
</p>

ржПрж░ржХржо ржЖржорж░рж╛ ржЕрждрж┐рж░рж┐ржХрзНржд рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржерзЗржХрзЗ ржмрж┐рж░ржд рж░рж╛ржЦрждрзЗ ржкрж╛рж░ржмрзЛред

ржПржХржмрж╛рж░ bucket ржЦрж╛рж▓рж┐ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ ржЖржорж░рж╛ ржЖржмрж╛рж░ bucket ржПрж░ ржоржзрзНржпрзЗ token ржжрж┐рзЯрзЗ ржкрзВрж░рзНржг ржХрж░рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

### Leaky Bucket

Leaky Bucket algorithm ржХрж┐ржирзНрждрзБ Token Bucket algorithm ржПрж░ ржорждред ржкрж╛рж░рзНржержХрзНржп рж╣рж▓ Leaky Bucket algorithm ржП рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржПржХржЯрж┐ constant rate ржП ржкрзНрж░рж╕рзЗрж╕ рж╣рзЯрзЗ ржерж╛ржХрзЗ, ржорж╛ржирзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ FIFO ржорж╛ржирзЗ First-in-first-out ржорзЗржирзЗ ржкрзНрж░рж╕рзЗрж╕ рж╣рзЯрзЗ ржерж╛ржХрзЗред

<p align="center">
  <img src="sections/rate-limiter/images/leaky-bucket.png" alt="leaky bucket">
</p>

Bucket ржП ржпржжрж┐ рждрж╛рж░ capacity ржерзЗржХрзЗ ржХржо Token ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржирждрзБржи Token ржХрж┐ржВржмрж╛ request bucket ржПрж░ ржнрж┐рждрж░ ржкрзНрж░ржмрзЗрж╢ ржХрж░ржмрзЗ ржЖрж░ рждрж╛рж░ржкрж░ FIFO ржЕржирзБржпрж╛рзЯрзА ржкрзНрж░рж╕рзЗрж╕ рж╣ржмрзЗред

ржПржЦржи bucket ржП ржпржжрж┐ capacity ржЕржирзБржпрж╛рзЯрзА Token ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ ржирждрзБржи ржЯрзЛржХрзЗржи ржЖрж░ bucket ржП ржкрзНрж░ржмрзЗрж╢ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред


## Section 27: CAP Theorem

ржПржЯрж┐ ржПржХржЯрж┐ ржХржирж╕рзЗржкрзНржЯ ржмрж╛ ржерж┐ржУрж░рж┐ ржпрж╛ ржжрзНржмрж╛рж░рж╛ ржмрзБржЬрж╛ ржпрж╛рзЯ, ржПржХржЯрж┐ Distributed System ржП ржЙрж▓рзНрж▓рж┐ржЦрж┐ржд рждрж┐ржиржЯрж┐ ржкрзНрж░рзЛржкрж╛рж░рзНржЯрж┐ ржерзЗржХрзЗ ржжрзБржЗржЯрж┐ ржкрзНрж░рзЛржкрж╛рж░рзНржЯрж┐ рж╕ржмрж╕ржорзЯ ржорзЗржирзЗ ржЪрж▓ржмрзЗред

- C ржорж╛ржирзЗ Consistency
- A ржорж╛ржирзЗ Availability
- P ржорж╛ржирзЗ Partition Tolerance

Consistency рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ ржЯрзНрж░рж╛ржирзНрж╕рзЗржХрж╢ржи (Transection) рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ рж╕ржм ржирзЛржбрзЗ рж╕ржмрж╕ржорзЯ consistent ржмрж╛ ржПржХржЗ value ржерж╛ржХржмрзЗред

Availability ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ ржкрзНрж░рждрж┐ржЯрж┐ read ржПржмржВ write рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╣рзЯ ржкрзНрж░рж╕рзЗрж╕(process) рж╣ржмрзЗ ржирж╛ рж╣рзЯ ржХрзЛржирзЛ message ржкрж╛ржмрзЗ ржпрзЗ ржЕржкрж╛рж░рзЗрж╢ржи(request) ржкрзНрж░рж╕рзЗрж╕(process) рж╣ржЪрзНржЫрзЗ ржирж╛ред

Partition Tolerance рж╣ржЪрзНржЫрзЗ ржПржХрж╛ржзрж┐ржХ ржирзЛржб ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрж╢ржи(connection) ржирж╖рзНржЯ рж╣рж▓рзЗржУ, read ржПржмржВ write ржЕржкрж╛рж░рзЗрж╢ржи ржарж┐ржХржнрж╛ржмрзЗ ржкрзНрж░рж╕рзЗрж╕ рж╣ржмрзЗред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржХрзНржпрж╛ржк ржерж┐ржУрж░рж╛ржо**
## Consistency, Availability & Partition Tolerance in Distributed System

ржХрзЛржирзЛ Distributed System ржП Consistency, Availability ржПржмржВ Partition Tolerance рж╕ржм ржПржХрж╕рж╛ржерзЗ ржорж┐рж▓рзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛, рж╣рзЯ ржЖржкржирж╛ржХрзЗ Consistency ржХрж┐ржВржмрж╛ Availability ржХрж┐ржВржмрж╛ Partition Tolerance secrifice ржХрж░рждрзЗ рж╣ржмрзЗред рждрж╛рж░ржорж╛ржирзЗ ржпрж╛ ржжрж╛рзЬрж╛рж▓рзЛ, рж╕рж┐рж╕рзНржЯрзЗржорзЗ 

* Consistency ржЖрж░ Availability ржерж╛ржХржмрзЗред
* Consistency ржЖрж░ Partition Tolerance ржерж╛ржХржмрзЗред
* Availability ржЖрж░ Partition Tolerance ржерж╛ржХржмрзЗред

ржПржЗ рждрж┐ржиржЯрж┐ ржерзЗржХрзЗ ржпрзЗржХрзЛржирзЛ ржПржХржЯрж┐ ржорзЗржирзЗ ржЪрж▓ржмрзЗред

### ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗ Consistency ржЖрж░ Availability ржорзЗржирзЗ ржЪрж▓рзЗ

Distributed System ржП Consistency ржЖрж░ Availability ржорзЗржирзЗ ржЪрж▓рж┐ рждрж╛рж░ржорж╛ржирзЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржм ржирзЛржбрзЗ рж╕ржмрж╕ржорзЯ Consistent Value ржерж╛ржХржмрзЗ ржПржмржВ ржкрзНрж░рждрж┐ржЯрж┐ ржирзЛржб рж╕ржмрж╕ржорзЯ Available ржерж╛ржХржмрзЗред 

<p align="center">
  <img src="sections/cap-theorem/images/cap-1.png" alt="cap theorem">
</p>

ржПржЦржи ржпржжрж┐ ржжрзБржЯрж┐ ржирзЛржбрзЗрж░ ржоржзрзНржпрзЗ Partition Tolerance рж╣рзЯ,

<p align="center">
  <img src="sections/cap-theorem/images/cap-2.png" alt="cap theorem">
</p>

Node 1 ржП ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБ ржЖржкржбрзЗржЯ рж╣рж▓рзЗ рж╕рзЗржЯрж┐ ржЖрж░ Node 2 ржПрж░ рж╕рж╛ржерзЗ sync рж╣рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред рждрж╛рж╣рж▓рзЗ consistency ржЖрж░ ржерж╛ржХржмрзЗ ржирж╛ред ржПржЦржи рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ consistency ржЖрж░ availability ржПржХрж╕рж╛ржерзЗ Maintain рж░рж╛ржЦрждрзЗ рж╣рж▓рзЗ рждржЦржи ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред

### ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗ Consistency ржЖрж░ Partition Tolerance ржорзЗржирзЗ ржЪрж▓рзЗ

Distributed System ржП Consistency ржЖрж░ Partition Tolerance ржорзЗржирзЗ ржЪрж▓рж┐ рждрж╛рж░ржорж╛ржирзЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржм ржирзЛржбрзЗ рж╕ржмрж╕ржорзЯ Consistent Value ржерж╛ржХржмрзЗ ржПржмржВ Partition Tolerance рж╣рж▓рзЗ ржЕржирзНржп ржирзЛржб ржЖрж░ available ржерж╛ржХржмрзЗ ржирж╛ред

<p align="center">
  <img src="sections/cap-theorem/images/cap-3.png" alt="cap theorem">
</p>

Node 1 ржПржмржВ Node 2 ржПрж░ ржоржзрзНржпрзЗ Partition Tolerance рж╣ржУрзЯрж╛рж░ ржХрж╛рж░ржгрзЗ Node 2 ржПрж░ ржнрзНржпрж╛рж▓рзБ ржорж╛ржирзЗ a ржПрж░ ржорж╛ржирзЗрж░ ржХрзЛржирзЛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ ржирж╛ржЗред рждржЦржи consistency ржмржЬрж╛рзЯ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп Node 2 рж╕рж╛ржорзЯрж┐ржХ рж╕ржорзЯрзЗрж░ ржЬржирзНржп ржмржирзНржз ржХрж░рждрзЗ рж╣ржмрзЗ, ржорж╛ржирзЗ Node 2 ржПрж░ availability secrifice ржХрж░рж╛ред 

<p align="center">
  <img src="sections/cap-theorem/images/cap-4.png" alt="cap theorem">
</p>

### ржпржжрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗ Availability ржЖрж░ Partition Tolerance ржорзЗржирзЗ ржЪрж▓рзЗ

Distributed System ржП Availability ржЖрж░ Partition Tolerance ржорзЗржирзЗ ржЪрж▓рж┐ рждрж╛рж░ржорж╛ржирзЗ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржм ржирзЛржбрзЗ рж╕ржмрж╕ржорзЯ Consistent Value ржерж╛ржХрж╛ рж▓рж╛ржЧржмрзЗ ржирж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕ржм ржирзЛржб Available ржерж╛ржХрждрзЗ рж╣ржмрзЗ ржпржжрж┐ Partition Tolerance рж╣рзЯрзЗ ржерж╛ржХрзЗред рждрж╛рж░ржорж╛ржирзЗ ржПржЦрж╛ржирзЗ consistency рж╕рзЗржХрзНрж░рж┐ржлрж╛ржЗрж╕ ржХрж░рждрзЗ рж╣ржмрзЗред 

<p align="center">
  <img src="sections/cap-theorem/images/cap-3.png" alt="cap theorem">
</p>

рж╕рзБрждрж░рж╛ржВ ржпрзЗржХрзЛржирзЛ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗржб рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржПржХрж╕рж╛ржерзЗ Consistency, Availability, Partition Tolerance ржЪрж▓ржмрзЗ ржирж╛ред 

## Section 29: Polling, Web Socket and Server-Sent Events

Polling ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ client regular interval ржП server ржХрзЗ ржмрж╛рж░ ржмрж╛рж░ ржбрзЗржЯрж╛рж░ ржЬржирзНржп рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред ржпрзЗржоржи, ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржкрзНрж░рждрж┐ рзл рж╕рзЗржХрзЗржирзНржб ржкрж░ ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ ржЖрж░ рж╕рж╛рж░рзНржнрж╛рж░ рждрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ ржжрж┐ржмрзЗред

<p align="center">
  <img src="./images/polling.png" alt="polling">
</p>

Polling ржПрж░ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЬ рж╕ржорж╕рзНржпрж╛ рж╣ржЪрзНржЫрзЗ ржЕрждрж┐рж░рж┐ржХрзНржд Bandwidth ржмрзНржпржмрж╣рж╛рж░ рж╣ржУрзЯрж╛ред

Web Socket ржорж╛ржирзЗ рж╣ржЪрзНржЫрзЗ Socket ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржПржмржВ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рзА рж╣ржмрзЗ ржпрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржмрж╛ рж╕рж╛рж░рзНржнрж╛рж░ ржпрждржХрзНрж╖ржи ржкрж░рзНржпржирзНржд disconnected ржирж╛ рж╣ржЪрзНржЫрзЗ рждрждржХрзНрж╖ржи ржкрж░рзНржпржирзНржд ржХрж╛ржирзЗржХрж╢ржи ржерж╛ржХржмрзЗред ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржЦрж╛ржирзЗ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржмрж╛рж░ ржмрж╛рж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░рж╛ рж▓рж╛ржЧржмрзЗ ржирж╛, ржпрзЗрж╣рзЗрждрзБ ржХрж╛ржирзЗржХрж╢ржи ржЖржЫрзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ ржоржзрзНржпрзЗ рж╕рзЗрж╣рзЗрждрзБ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ event рж╕рж╛рж░рзНржнрж╛рж░рзЗ рж╕ржВржШржЯрж┐ржд рж╣рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ рж░рзЗрж╕ржкржирзНрж╕ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред Web Socket ржЯрзЗржХржирзЛрж▓ржЬрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Chat Application ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯред

<p align="center">
  <img src="./images/web_socket.png" alt="web_socket">
</p>

Web Socket ржП рж╕рж╛рж░рзНржнрж╛рж░ ржПржмржВ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рзА рж╣рзЯ, ржЕрж░рзНржерж╛рзО рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржнрж┐рждрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрзЗрж░ ржХрж┐ржЫрзБ ржЗржиржлрж░ржорзЗрж╢ржи ржерж╛ржХрждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЬржирзНржп ржПржЯрж┐ржХрзЗ Stateful Architecture ржмрж▓рж╛ рж╣рзЯред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржкрзЛрж▓рж┐ржВ, ржУрзЯрзЗржм рж╕ржХрзЗржЯ ржПржмржВ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржирзНржЯ ржЗржнрзЗржирзНржЯрж╕**
## Polling ржПрж░ ржЯрж╛ржЗржк

### Short Polling

ржПржЯрж┐ ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ Polling, ржпрзЗржЦрж╛ржирзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХржЯрж┐ рж╕ржорзЯ ржкрж░ ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ рж░рзЗрж╕ржкржирзНрж╕ ржХрж░ржмрзЗ, рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржпржжрж┐ рж╕рзЗржЗ ржбрзЗржЯрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ empty response ржкрж╛ржарж╛ржмрзЗред

<p align="center">
  <img src="sections/polling-web-socket-server-sent-events/images/short-polling.png" alt="short-polling">
</p>

### Long Polling

ржПржЦрж╛ржирзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржХржЯрж┐ рж╕ржорзЯ ржкрж░ ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░ рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржПрж░ рж░рзЗрж╕ржкржирзНрж╕ ржХрж░ржмрзЗ, ржПржЦржи ржпржжрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ ржХрж╛ржЫрзЗ рж░рзЗрж╕ржкржирзНрж╕ ржирж╛ ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░ржмрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯрзЗрж░ ржнрж┐рждрж░ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрзЗржЯрж╛ ржЖрж╕рзЗ рждрж╛рж╣рж▓рзЗ ржбрзЗржЯрж╛ рж╕рж╛рж░рзНржнрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕ ржЖржХрж╛рж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХрзЗ ржжрж┐рзЯрзЗ ржжрж┐ржмрзЗ ржирж╛ рж╣рзЯ ржЕржкрж╛рж░рзЗрж╢ржи Timeout рж╣рзЯрзЗ ржпрж╛ржмрзЗ,рждржЦржи ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЖржмрж╛рж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ ржкрж░ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред

<p align="center">
  <img src="sections/polling-web-socket-server-sent-events/images/long-polling.png" alt="long-polling">
</p>

## Web Socket ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

Web Socket ржПржХржЯрж┐ single TCP ржХрж╛ржирзЗржХрж╢ржи ржПрж░ ржорж╛ржзрзНржпржорзЗ рждрзИрж░рзА рж╣ржУрзЯрж╛ Bidirectional Communication Protocolред ржкрзНрж░рж╕рзЗрж╕ рж╢рзБрж░рзБ рж╣рзЯ,

- TCP Connection: client ржкрзНрж░ржержорзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░ рж╕рж╛ржерзЗ TCP Connection рждрзИрж░рзА ржХрж░ржмрзЗред ржПржЯрж┐ HTTP ржкрзНрж░рзЛржЯрзЛржХрж▓рзЗрж░ ржорж╛ржзрзНржпржорзЗ "WebSocket Handshake" ржирж╛ржоржХ ржПржХржЯрж┐ ржмрж┐рж╢рзЗрж╖ ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛рзЯ (Upgrade: websocket рж╣рзЗржбрж╛рж░ рж╕рж╣)ред

- Connection рж╕ржмрж╕ржорзЯ open ржерж╛ржХрж╛: Server ржпржжрж┐ WebSocket рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗ, рждржмрзЗ ржПржЯрж┐ HTTP 101 Switching Protocols ржжрж┐рзЯрзЗ ржЙрждрзНрждрж░ ржжрзЗрзЯ ржПржмржВ TCP рж╕ржВржпрзЛржЧ WebSocket рж╕ржВржпрзЛржЧрзЗ рж░рзВржкрж╛ржирзНрждрж░рж┐ржд рж╣рзЯред ржПржХржмрж╛рж░ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкрж┐ржд рж╣рж▓рзЗ, ржПржЯрж┐ рж╕ржмрж╕ржорзЯ ржЦрзЛрж▓рж╛ ржерж╛ржХрзЗред ржПржЗ Open ржХрж╛ржирзЗржХрж╢ржи ржПрж░ ржоржзрзНржпрзЗ Data Transmit рж╣ржмрзЗред

- Connection ржмржирзНржз: ржпржЦржи ржХрзЛржирзЛ ржПржирзНржб(client ржХрж┐ржВржмрж╛ server) ржирж┐рж░рзНржжрж┐рж╖рзНржЯржнрж╛ржмрзЗ ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз ржХрж░рж▓рзЗ, рждржЦржи ржХрж╛ржирзЗржХрж╢ржи рж╕рж┐рж╕рзНржЯрзЗржо ржмржирзНржз рж╣ржмрзЗред ржЕржирзНржпржерж╛рзЯ ржХрж╛ржирзЗржХрж╢ржи рж╕ржмрж╕ржорзЯ Open ржерж╛ржХржмрзЗред

### Web Socket ржПрж░ рж╕рзАржорж╛ржмржжрзНржзрждрж╛

ржЖржкржирж┐ WebSocket ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржЪрзНржпрж╛ржЯ ржЕрзНржпрж╛ржк рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗржи, ржпрзЗржЦрж╛ржирзЗ A ржПржмржВ B ржирж┐ржЬрзЗржжрзЗрж░ ржоржзрзНржпрзЗ ржЪрзНржпрж╛ржЯ ржХрж░ржЫрзЗред ржпржжрж┐ B-ржПрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝, рждрж╛рж╣рж▓рзЗ ржХрж┐ ржЪрзНржпрж╛ржЯ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржирж┐рж╖рзНржХрзНрж░рж┐ржпрж╝ рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗ?

рж╣рзНржпрж╛ржБ, ржпржЦржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи рж╣ржпрж╝, рждржЦржи ржПржЯрж┐ тАШcloseтАЩ ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░ржмрзЗред

ржЖржкржирж┐ ржПржоржи ржПржХржЯрж┐ ржорзЗржХрж╛ржирж┐ржЬржо рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи, ржпрж╛рждрзЗ A ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗ ржпрзЗ B рж╕ржВржпрзЛржЧ ржмрж┐ржЪрзНржЫрж┐ржирзНржи рж╣ржпрж╝рзЗржЫрзЗред

ржзрж░рзБржи A ржмрж╛рж░рзНрждрж╛ ржкрж╛ржарж┐рзЯрзЗ ржпрж╛ржЪрзНржЫрзЗ(B-ржПрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржирж╛ржЗ), ржХрж┐ржирзНрждрзБ ржпржжрж┐ ржХрж┐ржЫрзБ рж╕ржорзЯ B-ржПрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржкрзБржирж░рж╛ржпрж╝ ржЪрж╛рж▓рзБ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ B ржХрзА ржорзЗрж╕рзЗржЬржЧрзБрж▓рзЛ ржкрж╛ржмрзЗ ржпрж╛ A рждрж╛ржХрзЗ ржкрж╛ржарж┐рзЯрзЗржЫрж┐рж▓ ржпржЦржи B-ржПрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржмржирзНржз ржЫрж┐рж▓?

B ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рзЛ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржкрж╛ржмрзЗ ржирж╛, ржпржжрж┐ ржирж╛ рж╕рзЗ chat page рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рзЗ ржмрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ-рж╕рж╛ржЗржб рж▓ржЬрж┐ржХрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ WebSocket рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржирзЗрж░ ржмрзНржпржмрж╕рзНржерж╛ ржХрж░рж╛ рж╣ржпрж╝ред

ржПржЯрж╛ржЗ(рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржорзЗрж╕рзЗржЬ ржирж╛ ржкрж╛ржУрзЯрж╛) WebSocket ржПрж░ рж╕рзАржорж╛ржмржжрзНржзрждрж╛ред

## Server-Sent Events

(ржЪрж▓ржорж╛ржи)


## Section 31: Message Queue

ржПржЯрж┐ ржПржХржЯрж┐ ржкрзНрж░рж╕рзЗрж╕ ржпрзЗржЦрж╛ржирзЗ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Producer ржерж╛ржХржмрзЗ, ржпрж╛ржжрзЗрж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ Message(ржПржЦрж╛ржирзЗ message ржорж╛ржирзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ) Queue ржПрж░ ржоржзрзНржпрзЗ send ржХрж░рж╛ ржПржмржВ queue рж╕рзЗржЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржмрж┐ржнрж┐ржирзНржи consumer ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред

<p align="center">
  <img src="./images/mq-1.png" alt="Message Queue">
</p>

рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ Throughput ржмрзГржжрзНржзрж┐ ржХрж░рж╛рж░ ржЬржирзНржп Message Queue ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

Message Queue ржкрзНрж░рждрж┐ржЯрж╛ Task ржХрзЗ Asynchronously ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржерж╛ржХрзЗ, ржорж╛ржирзЗ ржПржХржЯрж┐ Task ржкрзНрж░рж╕рзЗрж╕ рж╣рзЯ рждржЦржи ржЕржирзНржп task ржПрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржирж╛ред

ржкржкрзБрж▓рж╛рж░ Streaming Service Netflix, Airbnb ржЗрждрзНржпрж╛ржжрж┐ Message Queue ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред Agoda рждрж╛ржжрзЗрж░ Analytical Data, Real-time Monitoring ржПрж░ Solution ржПрж░ ржЬржирзНржп Message Queue ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖрж╕ржЫрзЗ, 1.8 trillion events ржкрзНрж░рждрж┐ ржжрж┐ржи Message Queue ржПрж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржЖрж╕ржЫрзЗред

ржЖржорж░рж╛ ржпрзЗ ржХрзЛржирзЛ Food Delivery рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржХржерж╛ ржЪрж┐ржирзНрждрж╛ ржХрж░рж┐ ржпржжрж┐, ржпрзЗржЦрж╛ржирзЗ ржПржХржЬржи Delivery boy ржПрж░ рж▓рж╛ржЗржн рж▓рзЛржХрзЗрж╢ржи ржЖржорж░рж╛ ржпржжрж┐ Pooling ржПрж░ ржорж╛ржзрзНржпржорзЗ рзл рж╕рзЗржХрзЗржирзНржб ржкрж░ ржкрж░ ржирж┐рзЯрзЗ ржерж╛ржХрж┐ ржПржмржВ ржХрзЛржи рж╕ржорзЯрзЗ ржХрзЛржи рж▓рзЛржХрзЗрж╢ржирзЗ ржЫрж┐рж▓ рж╕рзЗржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржоржзрзНржпрзЗ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрж┐ред ржПржХржЬржи ржЗржЙржЬрж╛рж░ ржПрж░ ржЬржирзНржп ржЪрж┐ржирзНрждрж╛ ржХрж░рж▓рзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржарж┐ржХржорждрзЛ ржХрж╛ржЬ ржХрж░ржмрзЗ, ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦржмрзЗред

ржХрж┐ржирзНрждрзБ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржПржХржЬржи ржорж╛ржирзБрж╖ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ ржирж╛ред рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ Delivery boy ржПрж░ рж▓рж╛ржЗржн рж▓рзЛржХрзЗрж╢ржи ржЖржорж░рж╛ ржпржжрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ рж╕рзНржЯрзЛрж░рзЗ ржХрж░рзЗ рж░рж╛ржЦрж┐, рждрж╛рж╣рж▓рзЗ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржо ржХрзНрж░рзНржпрж╛рж╢ ржХрж░ржмрзЗред ржХрж╛рж░ржг ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ Throughput ржХржоред

ржПржЗ рж╕ржорж╕рзНржпрж╛рж░ рж╕ржорж╛ржзрж╛ржи ржЖржорж░рж╛ Message Queue ржПрж░ ржорж╛ржзрзНржпржорзЗ ржХрж░рждрзЗ ржкрж╛рж░ржмред рзи ржЯрж┐ ржЬржиржкрзНрж░рж┐рзЯ Message Queue рж╣ржЪрзНржЫрзЗ,

- Kafka
- RabbitMQ

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржорзЗрж╕рзЗржЬ ржХрж┐ржЙ**
## Kafka

Kafka ржЦрзБржмржЗ ржЬржиржкрзНрж░рж┐рзЯ Message Queueред High-performance data pipelines, streaming analytics, data integration, ржПржмржВ mission-critical applications ржЧрзБрж▓рзЛрж░ ржЬржирзНржп Kafka ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред 

## Components of Kafka

- Producer: Producer ржХрж┐ржВржмрж╛ Publisher ржпрж╛рж░ ржХрж╛ржЬ рж╣ржЪрзНржЫрзЗ message pass ржХрж░рж╛ред ржПржЦрж╛ржирзЗ message рж╣рждрзЗ ржкрж╛рж░рзЗ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯред

- Cluster: Producer message ржЯрж┐ Cluster ржП pass ржХрж░ржмрзЗред Cluster ржПрж░ ржнрж┐рждрж░ Topics, Broker ржПржмржВ ZooKeeper ржерж╛ржХржмрзЗред

<p align="center">
  <img src="sections/message-queue/images/cluster.png" alt="Cluster">
</p>

- Broker: Cluster ржПрж░ ржнрж┐рждрж░ Broker ржерж╛ржХрзЗред ржПржЯрж┐ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░ ржпрж╛рж░ ржХрж╛ржЬ рж╣рж▓ message/data ржЧрзНрж░рж╣ржг ржПржмржВ ржкрзНрж░рж╕рзЗрж╕ ржПрж░ ржкрж░ send ржХрж░рж╛ред 

<p align="center">
  <img src="sections/message-queue/images/broker.png" alt="Broker">
</p>

- Topic: Topic ржорзВрж▓ржд Broker ржПрж░ ржПржХржЯрж┐ Core Section, ржпрж╛рж░ ржХрж╛ржЬ рж╣рж▓ ржорзЗрж╕рзЗржЬржЧрзБрж▓рзЛржХрзЗ Organize ржХрж░рж╛ред Broker ржПрж░ ржнрж┐рждрж░ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ Topic ржерж╛ржХржмрзЗред

<p align="center">
  <img src="sections/message-queue/images/topic.png" alt="Topic">
</p>

Topic ржПрж░ ржнрж┐рждрж░ Data Partitioning рж╣рзЯрзЗ ржерж╛ржХрзЗред ржкрзНрж░рждрж┐ржЯрж┐ Partition ржП ржорзВрж▓ржд Set of Messages ржмрж┐ржжрзНржпржорж╛ржи ржерж╛ржХрзЗред ржкрзНрж░рждрж┐ржЯрж┐ message identifie ржХрж░рж╛ рж╣рзЯ partition ржПрж░ offset ржжрзНржмрж╛рж░рж╛ред Messages ржЧрзБрж▓рзЛ partition ржПрж░ рж╢рзЗрж╖рзЗ ржпрзБржХрзНржд рж╣рзЯ ржПржмржВ ржЕржирзНржп ржжрж┐ржХ ржерзЗржХрзЗ send ржХрж░рж╛ рж╣рзЯред

<p align="center">
  <img src="sections/message-queue/images/partition.png" alt="Partition">
</p>

ржкрзНрж░рждрж┐ржЯрж┐ ржорзЗрж╕рзЗржЬ ржПржХржЯрж┐ Dedicated Partition ржП ржЪрж▓рзЗ ржпрж╛ржмрзЗред

- Consumer: Consumer ржорзВрж▓ржд Topic ржерзЗржХрзЗ Message ржирж┐рзЯрзЗ ржерж╛ржХрзЗред Topic ржПрж░ Partition ржерзЗржХрзЗ Message Consumer ржП ржпрж╛рзЯред

<p align="center">
  <img src="sections/message-queue/images/consumer-1.png" alt="Consumer">
</p>

ржЫржмрж┐рждрзЗ ржжрзБржЯрж┐ Partition ржПржмржВ ржПржХржЯрж┐ Consumer ржЖржЫрзЗ, Kafka ржПрж░ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржЕржирзБржпрж╛рзЯрзА ржПржХржзрж┐ржХ Partition ржерзЗржХрзЗ ржбрзЗржЯрж╛ consume ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред 

<p align="center">
  <img src="sections/message-queue/images/consumer-2.png" alt="Consumer">
</p>

ржПржЦрж╛ржирзЗ ржжрзБржЯрж┐ Partition ржПржмржВ ржжрзБржЯрж┐ Consumer ржЖржЫрзЗ, Kafka ржПржЗ ржжрзБржЯрж┐ Partition ржПржмржВ ржжрзБржЯрж┐ Consumer ржХрзЗ рж╕ржорж╛ржиржнрж╛ржмрзЗ ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ (Auto Balancing) ржХрж░рзЗ ржжрж┐ржмрзЗред

<p align="center">
  <img src="sections/message-queue/images/consumer-3.png" alt="Consumer">
</p>

ржпрзЗрж╣рзЗрждрзБ рззржЯрж┐ Partition ржХрзЗ ржХрзЗржмрж▓ рззржЯрж┐ Consumer ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗ рж╕рзЗржЬржирзНржп consumer 3 ржХрж┐ржЫрзБ consume ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред 

- ZooKeeper: ржПржЯрж┐рждрзЗ ржорзВрж▓ржд Kafka Cluster ржПрж░ information ржПржмржВ Consumer ржПрж░ details рж╕ржВрж░ржХрзНрж╖ржи ржХрж░рж╛ ржерж╛ржХрзЗред ржПржЯрж┐ Active Broker ржПрж░ ржПржХржЯрж┐ рж▓рж┐рж╕рзНржЯ ржорзЗржЗржиржЯрзЗржЗржи ржХрж░рзЗред ржпржЦржи ржХрзЛржирзЛ Broker ржирж╖рзНржЯ рж╣рзЯрзЗ ржпрж╛рзЯ ржХрж┐ржВржмрж╛ ржХрзЛржирзЛ error рж╣рж▓рзЗ ZooKeeper ржПржХржЯрж┐ notification ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯ Kafka'рж░ ржХрж╛ржЫрзЗред Kafka рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржЬржирзНржп ZooKeeper ржерж╛ржХрж╛ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХред

<p align="center">
  <img src="sections/message-queue/images/zookeeper.png" alt="zookeeper">
</p>

## Real life Kafka use-cases

- Real-time Data Processing.
- Messaging System.
- Stream Processing.
- Event-driven Architecture.
- Log Aggregation.

## Section 33: Single Sign-On

Single Sign-On ржХрж┐ржВржмрж╛ SSO рж╣рж▓ ржПржХржЯрж┐ Authentication Mechanismред ржпрж╛ user ржХрзЗ ржПржХрж╛ржзрж┐ржХ ржкрзНрж▓рж╛ржЯржлрж░рзНржо (ржЧрзБржЧрж▓, ржлрзЗржЗрж╕ржмрзБржХ, ржЯрзБржЗржЯрж╛рж░) ржжрж┐рзЯрзЗ Authenticate ржХрж░рзЗ ржжрзЗрзЯ, ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ credential ржорж╛ржзрзНржпржорзЗред

<p align="center">
  <img src="./images/sso.png" alt="sso">
</p>

(ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЪрж▓ржорж╛ржи)

## Section 34: Elasticsearch

ржПржЯрж┐ ржПржХржЯрж┐ NoSQL ржнрж┐рждрзНрждрж┐ржХ ржбрзЗржЯрж╛ржмрзЗрж╕ред ржорзВрж▓ржд ржПржЯрж┐ржХрзЗ Distributed Search ржПржмржВ Aggregation Engine рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред Elasticsearch ржПрж░ ржнрж┐рждрж░ structured ржПржмржВ unstructured data рж╕рзНржЯрзЛрж░ ржХрж░рзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржЗрж▓рж╛рж╕рзНржЯрж┐ржХрж╕рж╛рж░рзНржЪ**
## ржХрзЗржирзЛ Elasticserach?

ржЖржорж░рж╛ ржПржХржЯрж┐ scenario ржЪрж┐ржирзНрждрж╛ ржХрж░рж┐, ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ e-commerce application ржЖржЫрзЗред ржпрзЗржЦрж╛ржирзЗ рзорзж рж▓ржХрзНрж╖ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЖржЫрзЗред ржПржЦржи end user ржХрзЛржирзЛ ржПржХржЯрж┐ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржПрж░ keyword ржжрж┐рзЯрзЗ ржпржЦржи рж╕рж╛рж░рзНржЪ ржХрж░ржмрзЗ рждржЦржи response time 400ms ржмрж╛ рждрж╛рж░ ржерзЗржХрзЗржУ ржмрзЗрж╢рж┐ рж╣рждрзЗ ржкрж╛рж░рзЗред

ржЖрж░рзЗржХржЯрж┐ scenario ржЪрж┐ржирзНрждрж╛ ржХрж░рж┐, ржЖржкржирж╛рж░ ржПржХржЯрж┐ ржмрзНрж▓ржЧ ржЖржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ end user ржПрж╕рзЗ Full Text Search ржХрж░ржЫрзЗ ржорж╛ржирзЗ ржПржХржЯрж┐ sentence ржжрж┐рзЯрзЗ blog рж╕рж╛рж░рзНржЪ ржХрж░ржмрзЗред

ржПрж░ржХржо ржЖрж░рзЛ ржЕржирзЗржХ scenario ржЖржЫрзЗред ржПрж╕ржмрзЗрж░ ржЬржирзНржп Elasticserach ржЦрзБржмржЗ ржкрзНрж░рзЯрзЛржЬржирзАрзЯред

## Elasticsearch ржПрж░ structure

Elasticsearch ржП ржХрж╛рж▓рж╛ржоржЧрзБрж▓рзЛржХрзЗ рж╕рж╛ржзрж╛рж░ржгржд Field ржПржмржВ Row ржЧрзБрж▓рзЛржХрзЗ Document ржмрж▓рзЗред ржПржЦрж╛ржирзЗ ржорж╛ржирзЗ Elasticsearch ржП ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рзЛржХрзЗ index ржмрж▓рж╛ рж╣рзЯред

## Elasticsearch ржХрж┐ржнрж╛ржмрзЗ GET рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржерж╛ржХрзЗ?

ржкрзНрж░ржержорзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ GET рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ, ржмрзНржпрж╛ржХржПржирзНржб рж╕рж╛рж░рзНржнрж╛рж░ ржирж┐ржЬ ржерзЗржХрзЗ Elasticsearch Instance ржПрж░ ржоржзрзНржпрзЗ GET рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржХрж░ржмрзЗред Elasticsearch server ржПрж░ ржХрж╛ржЬ рж╣рж▓ рж╕рзЗржЗ query ржПрж░ ржЗржиржбрзЗржХрзНрж╕ ржнрзНржпрж╛рж▓рзБ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ ржжрзЗрзЯрж╛, рждрж╛ array ржЖржХрж╛рж░рзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред рждрж╛рж░ржкрж░ рж╕рзЗржЗ ржЗржиржбрзЗржХрзНрж╕ржЧрзБрж▓рзЛ ржжрж┐рзЯрзЗ ржмрзНржпрж╛ржХржПржирзНржб рж╕рж╛рж░рзНржнрж╛рж░ рждржЦржи ржорзВрж▓ ржбрж╛ржЯрж╛ржмрзЗрж╕ MySQL ржХрж┐ржВржмрж╛ Postgresql ржП рж╣рж┐ржЯ ржХрж░ржмрзЗред ржЕрждржГржкрж░ MySQL рж╕рзЗржЗ ржЗржиржбрзЗржХрзНрж╕ ржнрзНржпрж╛рж▓рзБ ржжрж┐рзЯрзЗ рж╕рж╛рж░рзНржЪ ржХрж░рзЗ ржбрж╛ржЯрж╛ржЧрзБрж▓рзЛржХрзЗ ржмрзНржпрж╛ржХржПржирзНржб рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐ржмрзЗред

<p align="center">
  <img src="sections/elasticsearch/images/elasticsearch-get.png" alt="Elasticsearch">
</p>

## Mapping

Elasticsearch ржПрж░ Mapping рж╣рж▓ index ржПрж░ ржоржзрзНржпрзЗ ржХрж┐ржнрж╛ржмрзЗ Field ржХрж┐ржнрж╛ржмрзЗ рж╕рзНржЯрзЛрж░ рж╣ржмрзЗ рждрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржерж╛ржХрзЗред Field ржПрж░ ржбрж╛ржЯрж╛ ржЯрж╛ржЗржк ржХрзЗржоржи рж╣ржмрзЗ рждрж╛ ржмрж▓рзЗ ржжрзЗрзЯред

```
{
  "mappings": {
    "properties": {
      "name": { type: "text" },
      "email": { type: "text" },
      "username": { type: "text" },
      "age": { type: "text", index: false }
    }
  }
}
```

Elasticsearch ржП рж╕рж╛ржзрж╛рж░ржгржд рж╕ржм field ржП ржЗржиржбрзЗржХрзНрж╕ ржХрж░рж╛ ржерж╛ржХрзЗ, ржЖржорж░рж╛ ржЪрж╛ржЗрж▓рзЗ { index: false } ржжрж┐рждрзЗ ржкрж╛рж░ржм ржпржжрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ field ржПрж░ ржЬржирзНржп index ржкрзНрж░рзЯрзЛржЬржи ржирж╛ рж╣рзЯред

## DSL Query

Domain Specific Language рж╕ржВржХрзНрж╖рзЗржкрзЗ DSL ржпрж╛ ржПржХржЯрж┐ JSON based query languageред рждрж╛ ржжрзНржмрж╛рж░рж╛ ржЖржорж░рж╛ Elasticsearch ржП query operation ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рж┐ред ржЙржжрж╛рж╣рж░ржг,

```
{
  "query": {
    "match": {
      "field_name": "search_term"
    }
  }
}
```

ржПржЦрж╛ржирзЗ,

- query: query configuration рж╢рзБрж░рзБ рж╣ржмрзЗ query ржЕржмржЬрзЗржХрзНржЯрзЗрж░ ржнрж┐рждрж░ ржжрж┐рзЯрзЗред
- match: ржХрзЛржи рж░ржХржорзЗрж░ query ржерж╛ржХржмрзЗ Full Text Search ржПрж░ ржЬржирзНржпред
- field_name: ржХрзЛржи ржлрж┐рж▓рзНржб search рж╣ржмрзЗ ржПржЦрж╛ржирзЗ ржмрж▓рзЗ ржжрж┐рждрзЗ рж╣рзЯред ржпржжрж┐ ржЖржорж░рж╛ description ржирж╛ржорзЗрж░ field search ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ description ржжрж┐рждрзЗ рж╣ржмрзЗред
- search_term: ржпрзЗ ржЯрж╛рж░рзНржо ржЖржорж░рж╛ search ржХрж░ржм рждрж╛ ржПржЦрж╛ржирзЗ ржмрж▓рзЗ ржжрж┐ржмред

DSL Query insertion ржПрж░ ржЬржирзНржп рж╕рж░рж╛рж╕рж░рж┐ ржмрзНржпржмрж╣рзГржд рж╣рзЯ ржирж╛, ржЖржкржирж┐ Elasticsearch ржПрж░ client library ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ insertion ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред


## Section 35: Bloom Filter

Bloom Filter ржПржХржЯрж┐ Probabilistic Data Structureред Hashing ржЯрзЗржХржирж┐ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржЦрж╛ржирзЗ ржбрзЗржЯрж╛ insert ржХрж░рж╛ рж╣рзЯред ржПржЯрж┐ ржЦрзБржмржЗ Faster ржПржмржВ ржорзЗржорзЛрж░рж┐ Efficientред

Bloom Filter ржПрж░ ржмрзНржпрж╛ржкрж╛рж░рзЗ ржЬрж╛ржирж╛рж░ ржкрзВрж░рзНржмрзЗ Hashing ржХрж┐ ржЬрж╛ржирж╛ ржирзЗрзЯрж╛ ржпрж╛ржХред ржПржХржЯрж┐ Hash Function ржирж┐ржЬрзЗрж░ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░рзЗ input ржирж┐рзЯрзЗ ржерж╛ржХрзЗ ржПржмржВ рж╕рзЗржЗ input ржХрзЗ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржПржХржЯрж┐ ржлрж┐ржХрзНрж╕ржб length ржПрж░ unique identifier рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗред

ржЙржжрж╛рж╣рж░ржг, ржЗржиржкрзБржЯ 'david' рж╣рж▓рзЗ ржЖржЙржЯржкрзБржЯ рж╣ржмрзЗ 5

```js
// hash function
function generateHash(table_size, user) {
  let index;
  let user_length = user.length;

  index = user_length % table_size;
  return index;
}

generateHash(10, "david"); // 5
```

Bloom Filter Data Structure ржП Hash function ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ set ржПрж░ ржоржзрзНржпрзЗ specific position ржП element insert ржХрж░рждрзЗ ржкрж╛рж░рж┐ред рждрж╛рж░ржкрж░ set ржПрж░ ржоржзрзНржпрзЗ specific element рж╕рж╛рж░рзНржЪ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

ржПрж░ ржоржзрзНржпрзЗ ржпржЦржи ржЖржорж░рж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ element рж╕рж╛рж░рзНржЪ ржХрж░рж┐ рждржЦржи ржЖржорж░рж╛ ржжрзБржЯрж┐ ржЬрж┐ржирж┐рж╕рзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ ржкрж╛ржмрзЛ,

- рж╣рзЯ possibly yes - ржорж╛ржирзЗ element, set ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХржмрзЗ рждржмрзЗ ржирж╛ ржерж╛ржХрж╛рж░ рж╕рж╛ржорж╛ржирзНржп ржХрж┐ржЫрзБ рж╕ржорзНржнрж╛ржмржирж╛ ржЖржЫрзЗред

- ржирж╛ рж╣рзЯ no - ржорж╛ржирзЗ element, set ржПрж░ ржоржзрзНржпрзЗ ржирж╛ржЗред

ржПржЬржирзНржп рждрж╛ржХрзЗ Probabilistic Data Structure ржмрж▓рж╛ рж╣рзЯред

ЁЯФЧ **ржЖрж░ржУ ржкрзЬрзБржи: ржмрзНрж▓рзБржо ржлрж┐рж▓рзНржЯрж╛рж░**
## ржмрзНрж▓рзБржо ржлрж┐рж▓рзНржЯрж╛рж░ ржП insertion ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

- рж╢рзБрж░рзБрждрзЗ bucket ржПрж░ рж╕ржм index ржПрж░ ржнрзНржпрж╛рж▓рзБ 0ред

<p align="center">
  <img src="sections/bloom-filter/images/bf-1.png" alt="bloom filter">
</p>

- `generateHash(10, 'david')` ржПрж░ рж░рж┐ржЯрж╛рж░рзНржи ржнрзНржпрж╛рж▓рзБ 5, index 5 ржПрж░ ржнрзНржпрж╛рж▓рзБ 0 ржерзЗржХрзЗ 1 ржмрж╛ржирж╛ржирзЛ рж╣рж▓, david ржПрж░ ржПржХржЯрж┐ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ index 5 ржП рж░рж╛ржЦржмрзЗред

<p align="center">
  <img src="sections/bloom-filter/images/bf-2.png" alt="bloom filter">
</p>

- `generateHash(10, 'lahin')` ржПрж░ржУ рж░рж┐ржЯрж╛рж░рзНржи ржнрзНржпрж╛рж▓рзБ 5, index 5 ржП ржПржЦржи рзи ржЯрж┐ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржерж╛ржХржмрзЗред

<p align="center">
  <img src="sections/bloom-filter/images/bf-3.png" alt="bloom filter">
</p>

## ржмрзНрж▓рзБржо ржлрж┐рж▓рзНржЯрж╛рж░-ржП рж╕рж╛рж░рзНржЪ

ржЖржорж░рж╛ ржпржжрж┐ lahin рж╕рж╛рж░рзНржЪ ржХрж░рждрзЗ ржпрж╛ржЗ, `generateHash(10, 'david')` 5 рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред ржПржЦржи index 5 ржП ржХрж┐ржирзНрждрзБ david, lahin ржжрзБржЯрж┐ ржЖржЫрзЗ ржПржЦрж╛ржирзЗ Bloom Filter accurately ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛, рж╕рзЗржЬржирзНржп ржмрж▓ржмрзЗ ржерж╛ржХрждрзЗржУ ржкрж╛рж░рзЗ ржЖржмрж╛рж░ ржирж╛ржУ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред

ржХрж┐ржирзНрждрзБ ржЖржорж░рж╛ ржпржжрж┐ john рж╕рж╛рж░рзНржЪ ржХрж░рж┐ рждрж╛рж╣рж▓рзЗ `generateHash(10, 'john')` 4 рж░рж┐ржЯрж╛рж░рзНржи ржХрж░ржмрзЗред ржпрзЗрж╣рзЗрждрзБ index 4 ржПрж░ ржнрзНржпрж╛рж▓рзБ 0 рж╕рзЗржЬржирзНржп Bloom Filter accurately ржмрж▓рждрзЗ ржкрж╛рж░ржмрзЗ john ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐ред

## ржмрзНрж▓рзБржо ржлрж┐рж▓рзНржЯрж╛рж░-ржП ржбрж┐рж▓рж┐ржЯ

ржпрзЗрж╣рзЗрждрзБ index 5 ржП ржжрзБржЯрж┐ ржнрзНржпрж╛рж▓рзБрж░ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржЖржЫрзЗ рж╕рзЗрж╣рзЗрждрзБ ржПржЦрж╛ржирзЗ ржХрзЛржирзЛ ржнрзНржпрж╛рж▓рзБ Delete ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛ред

## ржмрзНрж▓рзБржо ржлрж┐рж▓рзНржЯрж╛рж░ ржПрж░ рж╕рзБржмрж┐ржзрж╛ржЧрзБрж▓рзЛ

- constant time complexity
- constant space complexity
- no false negative


## Section 38: How OAuth2 works

OAuth2 рж╣рж▓ ржПржХ ржкрзНрж░ржХрж╛рж░рзЗрж░ Authorization Grant Techniqueред ржПржЯрж┐ Google, Facebook ржПрж░ ржоржд ржУрзЯрзЗржмрж╕рж╛ржЗржЯ ржерзЗржХрзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ information ржЖржирждрзЗ ржкрж╛рж░рзЗ ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ password ржПржмржВ ржЕржирзНржпрж╛ржирзНржп sensitive information ржЫрж╛рзЬрж╛ред ржПржЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ information ржП ржПржХржЯрж┐ Access Token ржерж╛ржХрзЗ ржпрж╛ ржжрзНржмрж╛рж░рж╛ ржЖржорж░рж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐рж╕рзЛрж░рзНрж╕(рж╣рждрзЗ ржкрж╛рж░рзЗ ржХрзЛржирзЛ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ ржП Login) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

ржПржЯрж┐ ржпрзЗржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ,

ржзрж░рзБржи ржЖржкржирж┐ ржХрзЛржирзЛ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗ рж▓ржЧржЗржи ржХрж░ржЫрзЗржиред рж╕рзЗржЬржирзНржп ржЖржкржирж┐ Continue with Google ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗржи,

- ржкрзНрж░ржержорзЗ ржУрзЯрзЗржмрж╕рж╛ржЗржЯ (ржорж╛ржирзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ) Google-ржПрж░ Authorization Server-ржП ржПржХржЯрж┐ Authorization Request ржкрж╛ржарж╛рзЯред

- Google ржЗржЙржЬрж╛рж░ржХрзЗ рждрж╛рж░ рж▓ржЧржЗржи ржкрзЗржЬрзЗ рж░рж┐ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж░рзЗ, ржпрзЗржЦрж╛ржирзЗ рж╕рзЗ Email ржУ Password Google-ржПрж░ ржкрзЗржЗржЬрзЗ ржЗржиржкрзБржЯ ржжрзЗрзЯред

- ржЗржЙржЬрж╛рж░ ржпржжрж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ рж▓ржЧржЗржи ржХрж░рзЗ ржПржмржВ ржкрж╛рж░ржорж┐рж╢ржи ржжрзЗрзЯ, рждржЦржи Google ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржПржХржЯрж┐ Authorization Code ржкрж╛ржарж╛рзЯред

- ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ ржПржЗ Authorization Code ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Google-ржПрж░ Authorization Server-ржП ржПржХржЯрж┐ Access Token ржПрж░ ржЬржирзНржп рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛рзЯред

- Google ржПржХржЯрж┐ Access Token (ржПржмржВ рж╕ржорзНржнржм рж╣рж▓рзЗ ID Token) ржкрж╛ржарж╛рзЯ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗред

- ржПрж░ржкрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржЗ Access Token ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Google-ржПрж░ Resource Server ржерзЗржХрзЗ ржЗржЙржЬрж╛рж░рзЗрж░ рждржерзНржп (ржпрзЗржоржи ржирж╛ржо, ржЗржорзЗржЗрж▓) рж╕ржВржЧрзНрж░рж╣ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

<p align="center">
  <img src="./images/oauth2.png" alt="oauth2">
</p>

## Section 40: High Availability best practices by Netflix

Netflix High Availability ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛рж░ ржЬржирзНржп ржХрж┐ржЫрзБ ржЯрж┐ржкрж╕ рж╢рзЗрзЯрж╛рж░ ржХрж░рзЗржЫрж┐рж▓(ржпрзЗржЧрзБрж▓рзЛ ржПрж░рж╛ ржирж┐ржЬрзЗ follow ржХрж░рзЗ ржерж╛ржХрзЗ) ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржЕржирзЗржХ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржХрж╛ржЬрзЗ рж▓рж╛ржЧржмрзЗ,

- Regional deployment over global ones: Deployment ржЖржорж░рж╛ region by region ржХрж░ржмрзЛ, ржпрж╛рждрзЗ region ржП impact ржЯрж┐ observe ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржХрзЛржирзЛ ржкрзНрж░ржХрж╛рж░рзЗрж░ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ ржЖржорж░рж╛ Rollback ржХрж░рзЗ ржкрзВрж░рзНржмрзЗрж░ рж╕рзНржЯрзЗржЯ ржП ржЪрж▓рзЗ ржпрзЗрждрзЗ ржкрж╛рж░ржмрзЛ, рждржЦржи ржЕржирзНржп region ржПрж░ ржЙржкрж░ ржХрзЛржирзЛ ржирзЗржЧрзЗржЯрж┐ржн ржЗржоржкрзНржпрж╛ржХрзНржЯ ржкрж░ржмрзЗ ржирж╛ред

- Use Blue/Green deployment strategy: ржПржЗ strategy рждрзЗ Deploy ржХрж░рж╛рж░ рж╕ржорзЯ рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ ржжрзБржЯрж┐ ржнрж╛рж░рзНрж╕ржи ржерж╛ржХрзЗ, Blue рж╣рж▓ ржмрж░рзНрждржорж╛ржи ржнрж╛рж░рзНрж╕ржи ржПржмржВ green рж╣рж▓ ржирждрзБржи ржнрж╛рж░рзНрж╕ржиред Green ржнрж╛рж░рзНрж╕ржи ржЯрзЗрж╕рзНржЯ ржХрж░рж╛ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗ, рж╕ржмржХрж┐ржЫрзБ ржарж┐ржХ ржерж╛ржХрж▓рзЗ ржЖржорж░рж╛ Blue ржнрж╛рж░рзНрж╕ржи ржерзЗржХрзЗ рж╕ржмржХрж┐ржЫрзБ Green ржнрж╛рж░рзНрж╕ржирзЗ ржирж┐рзЯрзЗ ржпрж╛ржмред

- Use deployment windows: Deployment ржЖржорж░рж╛ office hour ржПржмржВ off-peak ржПрж░ рж╕ржорзЯ ржХрж░ржмред

- Enable Chaos Monkey: ржПржЯрж┐ ржПржХржЯрж┐ Tool ржпрж╛ ржЖржорж╛ржжрзЗрж░ production рж╕рж╛рж░рзНржнрж╛рж░ржХрзЗ ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж╢рзНржЪрж┐ржд рж╣рждрзЗ ржкрж╛рж░ржм ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржоржЯрж┐ ржХржд resilienceред

- Deploy exactly what you tested to production: ржпрзЗ ржкрж╛рж░рзНржЯ ржПрж░ ржЯрзЗрж╕рзНржЯрж┐ржВ ржХрж░рж╛ рж╣рзЯ рж╕рзЗржЗ ржкрж╛рж░рзНржЯ Deploy ржХрж░рж╛ рж╣ржмрзЗред

Original Post: https://netflixtechblog.medium.com/tips-for-high-availability-be0472f2599c

## Section 41: Real World Problems

ржПржХржЬржи ржнрж╛рж▓рзЛ system designer рж╣рждрзЗ рж╣рж▓рзЗ, ржЖржорж╛ржжрзЗрж░ржХрзЗ real-world рж╕ржорж╕рзНржпрж╛ржЧрзБрж▓рзЛрж░ requirements ржПржмржВ planning рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрзБржЬрждрзЗ рж╣ржмрзЗред ржЖржорж┐ ржПржЦрж╛ржирзЗ ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ ржПржмржВ рж╕рзЗржЗ рж╕ржорж╕рзНржпрж╛ржЧрзБрж▓рзЛрж░ рж╕ржорж╛ржзрж╛ржирзЗрж░ ржзрж╛рж░рж╛ ржЖржорж┐ ржмрж░рзНржгржирж╛ ржХрж░ржЫрж┐ред

- Design a URL Shortener
- [**Design a Highly Concurrent Wordcamp Event Booking System**](./sections/real-world-problems/wc-event-booking/README.md)
- [**Design a Highly Concurrent Wordcamp Event Booking System, with Performance and Consistency in mind**](./sections/real-world-problems/wc-event-booking-perf/README.md)
- Design a Scalable One to One and One to Many chat system
- Design an Image Service that supports ~5M uploads/hour (~1.39k uploads/sec)

## Section 42: Resources

- <a href="https://github.com/donnemartin/system-design-primer" target="_blank">System Design Primer by Donne Martin (free)</a>
- <a href="https://www.amazon.com/Designing-Data-Intensive-Applications-Reliable-Maintainable/dp/1449373321" target="_blank">Designing Data Intensive Applications (paid)</a>
- <a href="amazon.com/System-Design-Interview-Insiders-Guide/dp/1736049119" target="_blank">System Design Interview by Alex Xu (paid)</a>
